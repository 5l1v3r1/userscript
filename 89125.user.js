// ==UserScript==// @name           Highlight new stories on HN homepage// @namespace      http://news.ycombinator.com/// @description    New stories (defined as those that were not on the HN homepage the last time you viewed it) will be highlighted in yellow (or the color of your choice)// @include        http://news.ycombinator.com/// @require       http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js// ==/UserScript==// Set the higlight colorvar highlight_color = '#FF0';$(document).ready(function() {   var old_string = GM_getValue('HN_homepage','');   if (old_string.indexOf(",") != -1) {      var old_array = old_string.split(',');   }   var id = '';   var new_array = Array();   var new_string = '';     $('span[id^=down_]').each(function (k, v) {      id = $(this).attr('id');      id = id.replace('down_','');      if (old_string.indexOf(",") != -1) {         if (in_array(id, old_array) != true) {            $(this).parent().parent().next().css('background-color', highlight_color);         }         else {            //$(this).parent().parent().next().css('background-color', '#FFF');         }      }      new_array.push(id);   });            new_string = new_array.join(',');      GM_setValue('HN_homepage', new_string);});function in_array(needle, haystack) {   for (key in haystack) {      if (haystack[key] == needle) {         return true;      }   }}