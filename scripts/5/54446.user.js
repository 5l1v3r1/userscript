// ==UserScript==// @name Mig[VK]Script// @namespace http://vkontakte.ru/// @description Полезные фичи для [в]контакте// @author Mr_Mig// @version 0.15.11// @copyright 2009+, Mr_Mig (http://vkontakte.ru/id4518704)// @license Beerware// @include http://*vkontakte.ru/*// @include http://*vk.com/*// @include http://vk.hamlab.net/*// @exclude http://vkontakte.ru/login*// @exclude http://vk.com/login*// @exclude http://login.vk.com/*// @exclude http://vk.com/im*// @exclude http://vkontakte.ru/im*// ==/UserScript==/* * ---------------------------------------------------------------------------- * "THE BEER-WARE LICENSE" (Revision 42): <migfizik@gmail.com> wrote this file. * As long as you retain this notice you can do whatever you want with this * stuff. If we meet some day, and you think this stuff is worth it, you can buy * me a beer in return. Mr_Mig * ---------------------------------------------------------------------------- * "THE BEER-WARE LICENSE" (Revision 42): <migfizik@gmail.com> написал сей * скрипт. Вы можете использовать этот код как пожелаете и для любых целей при * условии, что вы сохраните эту заметку. Если мы когда-либо встретимся, и вы * считаете, что данный скрипт вам полезен, вы можете купить мне пиво, либо * выпить за мое здоровье. Mr_Mig * ---------------------------------------------------------------------------- */var MigScript={SCRIPT_VERSION:"0.15.11",HOST:"http://vk.com",CSS_HOST:"http://vk.hamlab.net",DEBUG:false,myUid:null,myNumericId:null,isCompatible:false,purge:null,log:function(a){if(MigScript.DEBUG){console.log(a);}},$:function(a){if(typeof(a)==="string"){return document.getElementById(a);}else{return a;}},$c:function(a){return document.createElement(a);},alert:function(b,c,a){if(MigScript.Settings.local_settings[14]){if(a){(new MigScript.CustomObjects.AlerterClass(a)).alert(b,c);}else{(new MigScript.CustomObjects.AlerterClass()).alert(b,c);}}},helloMsg:"<center><h1>Здравствуйте!</b></h1></center><br>"+"<center>Версия <b>0.15.9</b></center><br><br>"+"<br> "+"<br> Приветствую вас, пользователи скрипта!"+"<br> Люди, если вам не нравится скрипт - удаляйте, не стесняйтесь."+"<br> Не забывайте про <a href='javascript:void(0)' onclick='MigScript.UI.Settings.openSettings();'><b>настройки</b></a>!"+"<br>"+"<br> <h1>Исчезли настройки?? ЭТО РЕЗУЛЬТАТ смены id на ИМЯ! Больше исчезать не должны.</h1>"+"<br>"+"<br>В версии 0.15.8 вы найдете:"+"<ul> "+"<li> Исправлено отображение кнопки скачивания аудио</li>"+"<li> Поправлено выпадение меню контакта при наведении на ссылки</li>"+"<li> Устранён ряд последствий введения имён </li>"+"</ul>"+"<br>В версии 0.15.9 вы найдете:"+"<ul> "+"<li> Поправлено выпадение меню при наведении на ссылки со своим профилем</li>"+"</ul>"+"<br>В версии 0.15.10 вы найдете:"+"<ul> "+"<li> Исправлены <b>почти все</b> последствия перехода на имена!</li>"+"<li> fix отображения истории статусов</li>"+"<li> fix отметки всех на видео</li>"+"<li> fix ссылок в всплывающем меню</li>"+"</ul>"+"<br>В версии 0.15.11:"+"<ul> "+"<li> fix списка скинов</li>"+"</ul>"+""+"<br><br> Заходите в нашу <a href='/club12388587'>группу</a> для решения проблем и общения!"+"<br>"+"<br><br><hr><b>Warning:</b> Поддержка скрипта не осуществляется! Новых версий может не быть!</a>!",registerGlobal:function(){unsafeWindow.MigScript=MigScript;},checkUid:function(){var a=GM_getValue("id",MigScript.Util.getMyUid(1));MigScript.myUid=MigScript.Util.getMyUid(1);if(MigScript.myUid!=a&&((a.toString().match(/\d+/)&&MigScript.myUid.match(/\d+/))||(!a.toString().match(/\d+/)&&!MigScript.myUid.match(/\d+/)))){MigScript.Util.promptId(a);}else{MigScript.myUid=a?a:MigScript.myUid;}},init:function(){MigScript.HOST=MigScript.Util.checkLocation("vk.com")?"http://vk.com":"http://vkontakte.ru";MigScript.isCompatible=/mozilla/i.test(navigator.userAgent.toLowerCase());if(MigScript.isCompatible){MigScript.myUid=MigScript.Util.getMyUid(1);MigScript.log(MigScript.myUid);MigScript.UI.showHelloMsg();MigScript.purge=MigScript.Util.deserialize("purge",false);MigScript.log("purge: "+MigScript.purge);if(MigScript.purge){MigScript.Settings.purgeSettings();}if(!MigScript.Util.checkLocation("vk.hamlab.net")){MigScript.Ajax.init();MigScript.log("Ajax init");MigScript.Settings.init();MigScript.log("Settings init");MigScript.UI.MainMenu.resetMenu();MigScript.Watcher.init();MigScript.log("Watcher init");MigScript.Update.init();MigScript.log("Update init");MigScript.Styler.init();MigScript.log("Styler init");MigScript.Friends.init();MigScript.log("Friends init");MigScript.ExFriends.init();MigScript.log("exFriends init");MigScript.Menu.init();MigScript.log("Menu init");MigScript.Alerts.checkAlerts();MigScript.UI.createUI();MigScript.log("UI created");MigScript.UI.Menu.init();MigScript.OnlineFriends.init();MigScript.log("OF init");MigScript.WhoFaved.init();MigScript.log("Who faved init");MigScript.FavContainer.init();MigScript.log("Containers init");}else{MigScript.Styler.prepareUI();}}else{MigScript.UI.showWarnMessage();}}};MigScript.Settings={userIdCache:null,loadSettings:function(){return[{n:2,id:"version",text:"Версия скрипта (кликни, чтобы обновить ->)",type:"alink",value:MigScript.Settings.local_settings[0],title:"Проверить наличие новой версии",action:MigScript.Update.forceUpd,condition:MigScript.Update.updReady,defaultValue:"0.0.0"},{n:23,id:"config_msg_add",text:"Добавить всплывающее меню каждому контакту",type:"checkbox",value:MigScript.Settings.local_settings[1]},{n:11,id:"config_fr_watch",text:'Включить модуль "Бывшие друзья"',type:"checkbox",value:MigScript.Settings.local_settings[2]},{n:71,id:"config_fr_timer",text:"Проверять список бывших друзей каждые Х минут",type:"input",value:MigScript.Settings.local_settings[3]},{n:15,id:"config_refresh_timer",text:"Задержка выпадения меню, мс",type:"input",value:MigScript.Settings.local_settings[4]},{n:31,id:"config_newmsg_bgcolor",text:"Цвет фона нового сообщения",type:"input",value:MigScript.Settings.local_settings[5]},{n:32,id:"config_newmsg_color",text:"Цвет текста нового сообщения",type:"input",value:MigScript.Settings.local_settings[6]},{n:33,id:"config_use_userstyle",text:"Использовать свой стиль",type:"checkbox",value:MigScript.Settings.local_settings[7]},{n:35,id:"config_userstyle",text:"Ваш стиль",type:"area",value:MigScript.Settings.local_settings[8]},{n:3,id:"config_upd_time",text:"Проверять обновление скрипта каждые Х минут",type:"input",value:MigScript.Settings.local_settings[9]},{n:19,id:"config_gsearch_vdownlinks",text:"Создавать ссылки на скачивание видео при поиске (кушает трафик)",type:"checkbox",value:MigScript.Settings.local_settings[10]},{n:34,id:"config_css_select",text:"Выбранный скин (нажми, чтобы изменить)",type:"alink",value:MigScript.Settings.local_settings[11],title:"Выбрать другой скин",defaultValue:"Стандартный",action:MigScript.Styler.showSkinSelector,condition:function(){return true;}},{n:12,id:"config_onl_check",text:'Включить модуль "Список друзей онлайн"',type:"checkbox",value:MigScript.Settings.local_settings[12]},{n:72,id:"config_onl_period",text:"Обновлять онлайн-список каждые Х секунд",type:"input",value:MigScript.Settings.local_settings[13]},{n:41,id:"config_alert_show",text:"Включить всплывающие оповещения",type:"checkbox",value:MigScript.Settings.local_settings[14]},{n:62,id:"config_sound_play",text:"Проигрывать звуки",type:"checkbox",value:MigScript.Settings.local_settings[15]},{n:32,id:"config_alert_rem",text:"Оповещения исчезают через Х секунд",type:"input",value:MigScript.Settings.local_settings[16]},{n:42,id:"config_alert_show_msg",text:"Оповещать о новых сообщениях",type:"checkbox",value:MigScript.Settings.local_settings[17]},{n:43,id:"config_alert_show_online",text:"Оповещать о выходе друзей в сеть",type:"checkbox",value:MigScript.Settings.local_settings[18]},{n:13,id:"config_menu_reset",text:"Включить новый вид главного меню (выпадающие ссылки)",type:"checkbox",value:MigScript.Settings.local_settings[19]},{n:73,id:"config_watcher_period",text:"Проверять обновления сообщений, отметок и т.д. каждые Х секунд",type:"input",value:MigScript.Settings.local_settings[20]},{n:16,id:"config_mainmenu_btn",text:"Плавающее главное меню (можно отцепить)",type:"checkbox",value:MigScript.Settings.local_settings[21]},{n:35,id:"config_mainmenu_spanpage",text:"При отцепливании главного меню страница расширяется",type:"checkbox",value:MigScript.Settings.local_settings[22]},{n:46,id:"config_alert_show_fr",text:"Оповещать о заявках на дружбу",type:"checkbox",value:MigScript.Settings.local_settings[23]},{n:47,id:"config_alert_show_photos",text:"Оповещать об отметках на фото",type:"checkbox",value:MigScript.Settings.local_settings[24]},{n:48,id:"config_alert_show_videos",text:"Оповещать об отметках на видео",type:"checkbox",value:MigScript.Settings.local_settings[25]},{n:49,id:"config_alert_show_notes",text:"Оповещать о новых комментариях к заметкам",type:"checkbox",value:MigScript.Settings.local_settings[26]},{n:50,id:"config_alert_show_groups",text:"Оповещать о приглашениях в группы",type:"checkbox",value:MigScript.Settings.local_settings[27]},{n:51,id:"config_alert_show_events",text:"Оповещать о приглашениях на мероприятия",type:"checkbox",value:MigScript.Settings.local_settings[28]},{n:63,id:"config_sound_online",text:"Звук при выходе друзей онлайн",type:"checkbox",value:MigScript.Settings.local_settings[29]},{n:64,id:"config_sound_message",text:"Звук при получении нового сообщения",type:"checkbox",value:MigScript.Settings.local_settings[30]},{n:65,id:"config_sound_new items",text:"Звук при обновлении фото, видео, заметок и т.д.",type:"checkbox",value:MigScript.Settings.local_settings[31]},{n:14,id:"config_mainmenu_cascadeRight",text:"Главное меню раскрывается вправо",type:"checkbox",value:MigScript.Settings.local_settings[32]},{n:24,id:"config_whofaved",text:'Включить модуль "Кто добавил в закладки"',type:"checkbox",value:MigScript.Settings.local_settings[33]},{n:18,id:"config_vdownlinks",text:"Добавлять ссылки на скачивание видео",type:"checkbox",value:MigScript.Settings.local_settings[34]},{n:20,id:"config_adownlinks",text:"Добавлять ссылки на скачивание аудио",type:"checkbox",value:MigScript.Settings.local_settings[35]},{n:21,id:"config_audio_dublicates",text:"Удалять дубликаты при поиске аудио",type:"checkbox",value:MigScript.Settings.local_settings[36]},{n:16,id:"config_stripmenu",text:"Убирать префиксы в меню",type:"checkbox",value:MigScript.Settings.local_settings[37]},{n:17,id:"config_stripmenu_mask",text:"Удалять следующие префиксы",type:"input",value:MigScript.Settings.local_settings[38]},{n:26,id:"config_animation",text:"Анимация и эффекты",type:"checkbox",value:MigScript.Settings.local_settings[39]},{n:44,id:"config_sound_fav_online",text:"Оповещать только о выходе избранных друзей в сеть",type:"checkbox",value:MigScript.Settings.local_settings[40]},{n:25,id:"config_wrap_messages",text:"Включить отправку сообщений через всплывающие контейнеры",type:"checkbox",value:MigScript.Settings.local_settings[41]},{n:22,id:"config_lyrics",text:"Добавлять ссылки на текст песен с lyricsplugin",type:"checkbox",value:MigScript.Settings.local_settings[42]},{n:61,id:"config_sound_infolabel",text:"Для проигрывания звуков нужен отдельный файл Mig[vk]Sound",type:"alink",value:"Установить звуки",title:"Установить скрипт Mig[vk]Sound",defaultValue:"Установить звуки",action:function(){window.location="http://userscripts.org/scripts/source/64840.user.js";},condition:function(){return true;}},{n:1,label:"Автообновление",type:"section"},{n:10,label:"Модули",type:"section"},{n:30,label:"Стили и скины",type:"section"},{n:40,label:"Оповещения",type:"section"},{n:60,label:"Звуки",type:"section"},{n:70,label:"Управление запросами",type:"section"}];},getDefaultSettings:function(){return[MigScript.SCRIPT_VERSION,true,true,30,300,"#eeee00","navy",true,MigScript.Styler.getDefaultStyle(),60,false,"Стандартный",true,30,true,false,5,true,true,true,5,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,"Мои|Мое",true,false,true,true];},local_settings:null,default_settings:null,settings:null,getSortedSettings:function(){var b=[];for(var a=0;a<MigScript.Settings.settings.length;a++){b.push(MigScript.Settings.settings[a]);}return b.sort(MigScript.Util.sNum);},saveSettings:function(){for(var i=1;i<MigScript.Settings.settings.length;i++){var value=null;try{value=eval(MigScript.$(MigScript.Settings.settings[i].id).getAttribute("value"));}catch(e){try{value=MigScript.$(MigScript.Settings.settings[i].id).getAttribute("value");}catch(e1){}}try{if(value==null){if(MigScript.$(MigScript.Settings.settings[i].id).value!=null){value=MigScript.$(MigScript.Settings.settings[i].id).value;}}MigScript.Settings.local_settings[i]=value;}catch(e2){}}var ls=MigScript.Settings.local_settings;MigScript.Util.serialize("local_settings",ls);window.location.reload();},resetSettings:function(){MigScript.Util.serialize("local_settings",MigScript.Settings.getDefaultSettings());MigScript.Util.serialize("updRejected",false);MigScript.Util.serialize("newVer",MigScript.SCRIPT_VERSION);MigScript.Util.serialize("updTime",0);window.location.reload();},purgeSettings:function(){if(confirm("Все настройки скрипта будут удалены ПОЛНОСТЬЮ! Вы точно уверены, что этого хотите ??")){MigScript.Util.serialize("local_settings",null);MigScript.Util.serialize("favFriendsList",null);MigScript.Util.serialize("exFriends",null);MigScript.Util.serialize("lastList",null);MigScript.Util.serialize("last_checked",null);MigScript.Util.serialize("olFloat",null);MigScript.Util.serialize("olFloat_x",null);MigScript.Util.serialize("olFloat_H",null);MigScript.Util.serialize("olFloat_W",null);MigScript.Util.serialize("olFloat_y",null);MigScript.Util.serialize("olFloat_fix",null);MigScript.Util.serialize("olFloat_roll",null);MigScript.Util.serialize("mainMenu",null);MigScript.Util.serialize("mainMenu_x",null);MigScript.Util.serialize("mainMenu_H",null);MigScript.Util.serialize("mainMenu_W",null);MigScript.Util.serialize("mainMenu_y",null);MigScript.Util.serialize("mainMenu_fix",null);MigScript.Util.serialize("mainMenu_roll",null);MigScript.Util.serialize("favGroups",null);MigScript.Util.serialize("favGroups_x",null);MigScript.Util.serialize("favGroups_H",null);MigScript.Util.serialize("favGroups_W",null);MigScript.Util.serialize("favGroups_y",null);MigScript.Util.serialize("favGroups_fix",null);MigScript.Util.serialize("favGroups_roll",null);MigScript.Util.serialize("favFriends",null);MigScript.Util.serialize("favFriends_x",null);MigScript.Util.serialize("favFriends_H",null);MigScript.Util.serialize("favFriends_W",null);MigScript.Util.serialize("favFriends_y",null);MigScript.Util.serialize("favFriends_fix",null);MigScript.Util.serialize("favFriends_roll",null);MigScript.Util.serialize("favedList",null);MigScript.Util.serialize("favedList_x",null);MigScript.Util.serialize("favedList_H",null);MigScript.Util.serialize("favedList_W",null);MigScript.Util.serialize("favedList_y",null);MigScript.Util.serialize("favedList_fix",null);MigScript.Util.serialize("favedList_roll",null);MigScript.Util.serialize("onlFriends",null);MigScript.Util.serialize("onlUpdTime",null);MigScript.Util.serialize("updTime",null);MigScript.Util.serialize("newVer",null);MigScript.Util.serialize("updRejected",null);MigScript.Util.serialize("hello",null);MigScript.Util.serialize("alerts",null);MigScript.Util.serialize("notifiedPool",null);MigScript.Util.serialize("purge",false);window.location.reload();}},init:function(){MigScript.Settings.local_settings=MigScript.Util.deserialize("local_settings");MigScript.Settings.default_settings=MigScript.Settings.getDefaultSettings();MigScript.Settings.local_settings=MigScript.Settings.local_settings?MigScript.Settings.local_settings:[];if(MigScript.Settings.local_settings.length<MigScript.Settings.default_settings.length){for(var a=MigScript.Settings.local_settings.length;a<MigScript.Settings.default_settings.length;a++){MigScript.Settings.local_settings.push(MigScript.Settings.default_settings[a]);}}if(MigScript.Settings.local_settings[0]!=MigScript.SCRIPT_VERSION){MigScript.Settings.local_settings[0]=MigScript.SCRIPT_VERSION;}MigScript.Settings.settings=MigScript.Settings.loadSettings();MigScript.Settings.tsettings=MigScript.Settings.getSortedSettings();MigScript.Settings.loadCache();},saveCache:function(){var a="{";for(i in MigScript.Settings.userIdCache){a+=",'"+i+"':'"+MigScript.Settings.userIdCache[i]+"'";}a+="}";a=a.replace(/,/,"");MigScript.Util.serialize("idCache",a);},loadCache:function(){var str=MigScript.Util.deserialize("idCache",null);if(str==null){MigScript.Settings.userIdCache={};}if(typeof(str)==="string"){MigScript.Settings.userIdCache=eval("("+str+")");}}};MigScript.Ajax={captchaBox:null,AjaxClass:function(onDone,onFail,eval_res){var _t=this;this.onDone=onDone;this.onFail=onFail;var tran=null;var calls=0;try{tran=new XMLHttpRequest();}catch(e){tran=null;}try{if(!tran){tran=new ActiveXObject("Msxml2.XMLHTTP");}}catch(e1){tran=null;}try{if(!tran){tran=new ActiveXObject("Microsoft.XMLHTTP");}}catch(e2){tran=null;}var parseRes=function(){if(!tran||!tran.responseText){return;}var res=tran.responseText.replace(/^[\s\n]+/g,"");if(res.substr(0,10)=="<noscript>"){try{var arr=res.substr(10).split("</noscript>");eval(arr[0]);tran.responseText=arr[1];}catch(e){}}else{}};this.get=function(u,q,f){f=f||false;if(typeof(q)!=="string"){q=MigScript.Ajax.ajx2q(q);}u=u+(q?("?"+q):"");tran.open("GET",u,!f);if(calls){tran.onreadystatechange=function(){stateDisp();};}tran.setRequestHeader("X-Requested-With","XMLHttpRequest");tran.send("");calls++;};this.post=function(u,d,f){f=f||false;if(typeof(d)!=="string"){d=MigScript.Ajax.ajx2q(d);}tran.open("POST",u,!f);if(calls){tran.onreadystatechange=function(){stateDisp();};}tran.setRequestHeader("Content-Type","application/x-www-form-urlencoded");tran.setRequestHeader("X-Requested-With","XMLHttpRequest");tran.send(d);calls++;};this.postWithCaptcha=function(url,data,options){var onSuccess,onFail,onCaptchaShow,onCaptchaHide,difficulty;if(!options){options={};}if(options){onSuccess=options.onSuccess;onFail=options.onFail;onCaptchaShow=options.onCaptchaShow;onCaptchaHide=options.onCaptchaHide;}difficulty=options.difficultCaptcha?"":"s=1&";var _onDone=function(ajaxObj,responseText){var response;try{try{response=eval("("+responseText+")");}catch(e1){}if(response&&response.ok&&response.ok==-2){if(MigScript.Ajax.captchaBox==null){var x=document.documentElement.clientWidth/2-120;var y=200;MigScript.Ajax.captchaBox=new MigScript.CustomObjects.FloaterClass(x,y,"captcha","Капча",{minHeight:110});MigScript.Ajax.captchaBox.body.style.backgroundColor="white";MigScript.Ajax.captchaBox.txt.style.backgroundColor="white";MigScript.Ajax.captchaBox.txt.innerHTML="Введите число";MigScript.Ajax.captchaBox.wrapCont.style.setProperty("z-index","3000","important");}else{MigScript.DomUtil.show(MigScript.Ajax.captchaBox.wrapCont);}if(response.difficult){difficulty=response.difficult?"":"s=1&";}var box=MigScript.Ajax.captchaBox.body;var key;MigScript.DomUtil.removeChildNodes(box);var img=MigScript.$c("img");img.src=MigScript.HOST+"/captcha.php?"+difficulty+"sid="+response.captcha_sid;box.appendChild(img);box.appendChild(MigScript.$c("br"));var inp=MigScript.$c("input");inp.type="text";inp.id="captchaKey";box.appendChild(inp);inp.addEventListener("keypress",function(e){if(((e.keyCode==10)||(e.keyCode==13))||((e.ctrlKey)&&((e.keyCode==10)||(e.keyCode==13)))){if(typeof(data)==="object"){MigScript.Util.extend(data,{"captcha_sid":response.captcha_sid,"captcha_key":MigScript.$("captchaKey").value});}else{data+="&captcha_sid="+response.captcha_sid+"&captcha_key="+MigScript.$("captchaKey").value;}_t.onDone=_onDone;_t.onFail=onFail;_t.post(url,data);MigScript.Ajax.captchaBox.close();}},true);if(onCaptchaShow){onCaptchaShow();}key=MigScript.$("captchaKey");key.focus();}else{throw"Exit";}}catch(e){if(options.json&&response){responseText=response;}else{if(response&&typeof(response.text)==="string"){responseText=response.text;}}if(MigScript.Ajax.captchaBox){MigScript.Ajax.captchaBox.close();if(onCaptchaHide){onCaptchaHide(true);}}if(onSuccess){onSuccess(ajaxObj,responseText);}}};this.onDone=_onDone;this.onFail=onFail;this.post(url,data);};var stateDisp=function(){if(tran.readyState==4){if(tran.status>=200&&tran.status<300){if(eval_res){parseRes();}if(_t.onDone){_t.onDone(_t,tran.responseText);}}else{if(_t.onFail){_t.onFail(_t,tran.responseText);}}}};tran.onreadystatechange=stateDisp;},ajx2q:function(c){var b=[];for(var a in c){if(c[a]==undefined||c[a]==null||typeof(c[a])==="function"){continue;}b.push(encodeURIComponent(a)+"="+encodeURIComponent(c[a]));}return b.join("&");},ajax:null,init:function(){MigScript.Ajax.ajax=new MigScript.Ajax.AjaxClass(function(){},function(){MigScript.log("ajax error");});}};MigScript.Update={UpdaterClass:function(a){var d=this;var b="http://migvkscript.googlecode.com/svn/ver/version.txt";var c=Math.floor(1+(9999)*Math.random());this.init=function(){if(MigScript.Util.checkPeriod("updTime",a)){MigScript.log("update check");this.check();}};this.check=function(){c=Math.floor(1+(9999)*Math.random());MigScript.log("update url: "+b+"?seed="+c);GM_xmlhttpRequest({method:"GET",url:b+"?seed="+c,onreadystatechange:this.update});MigScript.log("ask for update");};this.update=function(j){if(j.readyState==4){var f=j.responseText;vnum=f;f=f.split(".");var g=MigScript.SCRIPT_VERSION.split(".");var e=false;f=parseInt(f[0]*10000,10)+parseInt(f[1]*100,10)+parseInt(f[2],10);g=parseInt(g[0]*10000,10)+parseInt(g[1]*100,10)+parseInt(g[2],10);MigScript.log("update processed");MigScript.log("v:"+g+" u:"+f);if(f-g>0){e=true;MigScript.Util.serialize("newVer",vnum);}var h=MigScript.Util.deserialize("updRejected",false);if(e&&!h){if(confirm("Новое обновление Mig[vk]Script v "+vnum+" есть в наличии. Обновить скрипт??")){d.install();}else{MigScript.Util.serialize("updRejected",true);}}}};this.install=function(){MigScript.Util.serialize("updRejected",false);MigScript.Util.serialize("hello",false);window.location="http://userscripts.org/scripts/source/"+54446+".user.js";};this.init();},updater:null,forceUpd:function(){MigScript.Util.serialize("updRejected",false);MigScript.Update.updater.check();},forceInst:function(){var a=MigScript.Util.deserialize("updRejected",false);if(!a){MigScript.Update.updater.check();}else{MigScript.Update.updater.install();}},updReady:function(){var c=MigScript.Util.deserialize("newVer",0);var b=MigScript.Util.deserialize("updRejected",false);if(b){var a=MigScript.$c("img");a.src=MigScript.UI.Images.warningImg();a.id="warn_upd";a.title="Имеется новая v "+c+" версия скрипта!";a.width="20";a.style.marginRight="10px";a.style.marginBottom="-5px";a.style.cursor="pointer";a.addEventListener("click",function(){MigScript.Update.forceInst();},true);MigScript.$("version").parentNode.insertBefore(a,MigScript.$("version"));}},init:function(){MigScript.Update.updater=new MigScript.Update.UpdaterClass(MigScript.Settings.local_settings[9]*1000*60);setTimeout(function(){MigScript.Update.updater.check();},MigScript.Settings.local_settings[9]*1000*60);}};MigScript.CustomObjects={floaters:[],serializableAlerters:[],alerters:[],CheckboxClass:function(_id,_value){this.body=MigScript.$c("img");this.body.id=_id;this.body.style.cursor="pointer";this.body.value=eval(_value);var _v=uneval(_value);this.body.setAttribute("value",_v);if(!this.body.value){this.body.src=MigScript.UI.Images.uncheckedImg();}else{if(this.body.value){this.body.src=MigScript.UI.Images.checkedImg();}}this.body.addEventListener("click",function(){toggleChk(this.id);},true);var toggleChk=function(id){var img=MigScript.$(id);var value=eval(img.getAttribute("value"));value=!value;img.setAttribute("value",uneval(value));if(!value){img.src=MigScript.UI.Images.uncheckedImg();}else{if(value){img.src=MigScript.UI.Images.checkedImg();}}};},Dragable:function(b,e,a,d,g,c){if(typeof(b)==="string"){b=document.getElementById(b);}if(b==null){return;}c=c||{};if(c.canMove==null){c.canMove=true;}if(typeof(e)==="string"){e=document.getElementById(e);}if(e==null){e=b;}this.ox=0;this.oy=0;this.isDrag=false;var f=this;this.startDrag=function(h){if(h.stopPropagation){h.stopPropagation();}if(h.preventDefault){h.preventDefault();}h.cancelBubble=true;h.cancel=true;h.returnValue=false;f.isDrag=true;f.ox=h.pageX;f.oy=h.pageY;if(a){a();}};this.stopDrag=function(h){if(f.isDrag){f.isDrag=false;if(d){d();}}};this.drag=function(l){if(f.isDrag){if(l.stopPropagation){l.stopPropagation();}if(l.preventDefault){l.preventDefault();}l.cancelBubble=true;l.cancel=true;l.returnValue=false;var j=l.pageX-f.ox;var h=l.pageY-f.oy;f.ox=l.pageX;f.oy=l.pageY;if(c.left&&f.ox<c.left){f.ox=c.left;}if(c.right&&f.ox>c.right){f.ox=c.right;}if(c.top&&f.oy<c.top){f.oy=c.top;}if(c.bottom&&f.oy>c.bottom){f.oy=c.bottom;}if(c.canMove){b.style.left=b.offsetLeft+j+"px";b.style.top=b.offsetTop+h+"px";}if(g){g(j,h);}}};e.addEventListener("mousedown",this.startDrag,false);e.addEventListener("mouseup",this.stopDrag,false);document.addEventListener("mouseup",this.stopDrag,false);document.addEventListener("mousemove",this.drag,false);},Resizable:function(e,y){if(typeof(e)==="string"){e=MigScript.$(e);}if(e==null){return;}y=y||{};var A=y.borderWidth||4;var h=y.width||y.minWidth||10*A;var z=y.height||y.minHeight||10*A;var v=this;if(y.bodyNode){if(typeof(y.bodyNode)==="string"){y.bodyNode=document.getElementById(y.bodyNode);}this.body=y.bodyNode;}else{this.body=MigScript.$c("div");this.body.className="resBody";e.parentNode.appendChild(this.body);}var c=MigScript.$c("div");c.className="nwHandle";var b=function(B){if(h+B>y.minWidth){h+=B;}else{if(h!=y.minWidth){B=y.minWidth-(h);h=y.minWidth;}else{B=0;}}return B;};var l=function(B){if(z+B>y.minHeight){z+=B;}else{if(z!=y.minHeight){B=y.minHeight-(z);z=y.minHeight;}else{B=0;}}return B;};var f=function(C,B){C=b(-C);B=l(-B);v.updatePosition(-C,-B);};new MigScript.CustomObjects.Dragable(c,null,null,null,f,{canMove:false});var g=MigScript.$c("div");g.className="nHandle handler";var j=function(C,B){C=0;B=l(-B);v.updatePosition(C,-B);};new MigScript.CustomObjects.Dragable(g,null,null,null,j,{canMove:false});var p=MigScript.$c("div");p.className="neHandle handler";var s=function(C,B){C=b(C);B=l(-B);v.updatePosition(0,-B);};new MigScript.CustomObjects.Dragable(p,null,null,null,s,{canMove:false});var t=MigScript.$c("div");t.className="eHandle handler";var u=function(C,B){C=b(C);B=0;v.updatePosition(0,B);};new MigScript.CustomObjects.Dragable(t,null,null,null,u,{canMove:false});var o=MigScript.$c("div");o.className="seHandle handler";var r=function(C,B){C=b(C);B=l(B);v.updatePosition(0,0);};new MigScript.CustomObjects.Dragable(o,null,null,null,r,{canMove:false});var w=MigScript.$c("div");w.className="sHandle handler";var x=function(C,B){B=l(B);v.updatePosition(0,0);};new MigScript.CustomObjects.Dragable(w,null,null,null,x,{canMove:false});var a=MigScript.$c("div");a.className="swHandle handler";var d=function(C,B){C=b(-C);B=l(B);v.updatePosition(-C,0);};new MigScript.CustomObjects.Dragable(a,null,null,null,d,{canMove:false});var m=MigScript.$c("div");m.className="wHandle handler";var n=function(C,B){C=b(-C);B=0;v.updatePosition(-C,B);};new MigScript.CustomObjects.Dragable(m,null,null,null,n,{canMove:false});this.container=MigScript.$c("div");this.container.className="resContainer";this.container.style.marginTop=A+"px";this.container.style.marginLeft=A+"px";if(!y.handles){y.handles="all";}if(/all/.test(y.handles)||/nw/.test(y.handles)){this.body.appendChild(c);}if(/all/.test(y.handles)||/n/.test(y.handles)){this.body.appendChild(g);}if(/all/.test(y.handles)||/ne/.test(y.handles)){this.body.appendChild(p);}if(/all/.test(y.handles)||/w/.test(y.handles)){this.body.appendChild(m);}this.body.appendChild(this.container);if(/all/.test(y.handles)||/e/.test(y.handles)){this.body.appendChild(t);}if(/all/.test(y.handles)||/sw/.test(y.handles)){this.body.appendChild(a);}if(/all/.test(y.handles)||/s/.test(y.handles)){this.body.appendChild(w);}if(/all/.test(y.handles)||/se/.test(y.handles)){this.body.appendChild(o);}this.container.appendChild(e);this.updatePosition=function(C,B){this.body.style.width=h+2*A+"px";this.body.style.height=z+2*A+"px";if(C!=0){v.body.style.left=v.body.offsetLeft+C+"px";}if(B!=0){v.body.style.top=v.body.offsetTop+B+"px";}c.style.width=A+"px";c.style.height=A+"px";g.style.width=h+"px";g.style.height=A+"px";g.style.left=A+"px";p.style.width=A+"px";p.style.height=A+"px";p.style.left=A+h+"px";t.style.width=A+"px";t.style.height=z+"px";t.style.left=A+h+"px";t.style.top=A+"px";w.style.width=h+"px";w.style.height=A+"px";w.style.left=A+"px";w.style.top=A+z+"px";o.style.width=A+"px";o.style.height=A+"px";o.style.left=A+h+"px";o.style.top=A+z+"px";a.style.width=A+"px";a.style.height=A+"px";a.style.top=A+z+"px";m.style.width=A+"px";m.style.height=z+"px";m.style.top=A+"px";if(y.onEndResize){y.onEndResize(h,z);}};this.setHeight=function(B){z=B;this.updatePosition();};this.updatePosition();},FloaterClass:function(h,f,a,l,b){this.name=a;this.label=l;var n=this;this.rolled=MigScript.Util.deserialize(this.name+"_roll",true);var m=MigScript.Util.deserialize(this.name+"_x",h);var g=MigScript.Util.deserialize(this.name+"_y",f);b=b||{};b.height=MigScript.Util.deserialize(this.name+"_H",b.height);b.width=MigScript.Util.deserialize(this.name+"_W",b.width);this.fixed=MigScript.Util.deserialize(this.name+"_fix",true);this.isDrag=false;this.onClose=null;var j=MigScript.CustomObjects.floaters.length;MigScript.CustomObjects.floaters.push(this);this.id=j;var d=function(){MigScript.$("fl_"+n.id+"_head").style.cursor="move";};var e=function(){MigScript.$("fl_"+n.id+"_head").style.cursor="default";var o=MigScript.$(n.name);m=o.offsetLeft;g=o.offsetTop;MigScript.Util.serialize(n.name+"_x",m);MigScript.Util.serialize(n.name+"_y",g);};this.updateSize=function(p,o){n.body.style.width=p+"px";n.body.style.height=o-n.head.offsetHeight-n.txt.offsetHeight+"px";n.cont.style.width=p+"px";n.cont.style.height=o+"px";MigScript.Util.serialize(n.name+"_W",p);MigScript.Util.serialize(n.name+"_H",o);};var c=null;this.createUI=function(){this.wrapCont=MigScript.$c("div");this.wrapCont.className="floater_cont";this.wrapCont.id=this.name;this.wrapCont.style.left=m+"px";this.wrapCont.style.top=g+"px";this.cont=MigScript.$c("div");this.cont.className="floater_cont_inner";this.cont.style.width=b.width+"px";this.cont.style.height=b.height+"px";document.body.appendChild(this.wrapCont);this.wrapCont.appendChild(this.cont);this.head=MigScript.$c("div");this.head.id="fl_"+this.id+"_head";this.head.className="floater_head";this.cont.appendChild(this.head);this.txt=MigScript.$c("div");this.txt.id="fl_"+this.id+"_txt";this.txt.className="floater_txt";this.cont.appendChild(this.txt);if(b.width<b.minWidth){b.width=null;}if(b.height<b.minHeight){b.height=null;}b.minWidth=b.minWidth||125;b.minHeight=b.minHeight||this.head.offsetHeight+this.txt.offsetHeight;this.body=MigScript.$c("div");this.body.id="fl_"+this.id+"_body";this.body.className="floater_body";this.body.style.overflow="auto";this.body.style.height=b.minHeight-this.head.offsetHeight-this.txt.offsetHeight+"px";this.cont.appendChild(this.body);if(this.rolled){this.body.style.display="block";}else{this.body.style.display="none";}var o=MigScript.$c("div");o.style.display="block";o.id="lc";this.head.addEventListener("mouseover",function(x){MigScript.DomUtil.hide(MigScript.DomUtil.getDescendantById(n.head,"lc"));MigScript.DomUtil.show(MigScript.DomUtil.getDescendantById(n.head,"bc"));},true);this.head.addEventListener("mouseout",function(x){MigScript.DomUtil.hide(MigScript.DomUtil.getDescendantById(n.head,"bc"));MigScript.DomUtil.show(MigScript.DomUtil.getDescendantById(n.head,"lc"));},true);var p=MigScript.$c("a");p.innerHTML=this.label;var r=MigScript.$c("b");var w=MigScript.$c("center");this.head.appendChild(o);o.appendChild(w);w.appendChild(r);r.appendChild(p);r.style.top="3px";r.style.position="relative";var v=MigScript.$c("div");v.style.display="none";v.id="bc";this.head.appendChild(v);var u=MigScript.$c("a");u.id="fl_"+this.id+"_fx_btn";u.title="Фиксировать";if(!this.fixed){u.innerHTML="<b>[f]</b>";this.wrapCont.style.setProperty("position","absolute","important");}else{u.innerHTML="<font style='color:#f00!important;'><b>[f]</b></font>";this.wrapCont.style.setProperty("position","fixed","important");}u.style.cursor="pointer";u.style.fontSize="8pt";u.style.marginRight="5px";u.style.marginTop="2px";u.style.setProperty("float","right","");u.addEventListener("click",function(x){MigScript.CustomObjects.floaters[j].dofix(x);},true);v.appendChild(u);var s=MigScript.$c("a");s.id="fl_"+this.id+"_cls_btn";s.innerHTML="<b>_</b>";s.title="Закрыть";s.style.cursor="pointer";s.style.fontSize="8pt";s.style.marginRight="5px";s.style.marginTop="2px";s.style.setProperty("float","right","");s.addEventListener("click",function(){MigScript.CustomObjects.floaters[j].close();},true);v.appendChild(s);var t=MigScript.$c("a");t.id="fl_"+this.id+"_roll_btn";if(this.rolled){t.innerHTML="[-]";}else{t.innerHTML="[+]";}t.title="Развернуть";t.style.cursor="pointer";t.style.fontSize="8pt";t.style.marginRight="5px";t.style.marginTop="2px";t.style.setProperty("float","right","");t.addEventListener("click",function(){MigScript.CustomObjects.floaters[j].roll();},true);v.appendChild(t);new MigScript.CustomObjects.Dragable(this.wrapCont,this.head,d,e);c=new MigScript.CustomObjects.Resizable(this.cont,{handles:"all",minWidth:b.minWidth,width:b.width,height:b.height,minHeight:b.minHeight,onEndResize:n.updateSize,bodyNode:n.wrapCont});};this.roll=function(){MigScript.UI.togglePlusBtn("fl_"+this.id+"_roll_btn");var o=this.head.offsetHeight+this.txt.offsetHeight;if(this.body.style.display=="none"){this.rolled=true;o=MigScript.Util.deserialize(this.name+"_oH",0);c.setHeight(o);this.body.style.setProperty("display","block","important");}else{this.rolled=false;MigScript.Util.serialize(this.name+"_oH",o+this.body.offsetHeight);this.body.style.setProperty("display","none","important");c.setHeight(o);}MigScript.Util.serialize(this.name+"_roll",this.rolled);};this.fix=function(r){m-=window.scrollX;g-=window.scrollY;this.wrapCont.style.left=m+"px";this.wrapCont.style.top=g+"px";this.wrapCont.style.setProperty("position","fixed","important");var p=MigScript.$("fl_"+this.id+"_fx_btn");var o=this.id;p.innerHTML="<font style='color:#f00!important;'><b>[f]</b></font>";MigScript.Util.serialize(this.name+"_fix",true);MigScript.Util.serialize(n.name+"_x",m);MigScript.Util.serialize(n.name+"_y",g);};this.unfix=function(){this.wrapCont.style.setProperty("position","absolute","important");var p=MigScript.$("fl_"+this.id+"_fx_btn");var o=this.id;m+=window.scrollX;g+=window.scrollY;this.wrapCont.style.left=m+"px";this.wrapCont.style.top=g+"px";p.innerHTML="<b>[f]</b>";MigScript.Util.serialize(this.name+"_fix",false);MigScript.Util.serialize(n.name+"_x",m);MigScript.Util.serialize(n.name+"_y",g);};this.dofix=function(o){if(MigScript.$("fl_"+this.id+"_fx_btn").innerHTML=="<b>[f]</b>"){this.fix(o);}else{this.unfix();}};this.wakeUp=function(p,o){MigScript.log("wake up "+p+"_"+o);m=p;g=o;if(m&&g){this.wrapCont.style.left=m;this.wrapCont.style.top=g;}this.wrapCont.style.setProperty("display","block","important");};this.close=function(){this.wrapCont.style.setProperty("display","none","important");MigScript.Util.serialize(this.name+"_x",m);MigScript.Util.serialize(this.name+"_y",g);MigScript.Util.serialize(this.name+"_fix",this.fixed);MigScript.Util.serialize(this.name+"_roll",this.rolled);if(this.onClose){this.onClose();}};this.createUI();},AlerterClass:function(prefix){var _t=this;this.id=-1;this.body=null;this.capt=null;this.cont=null;this.prefix=null;this.caption="";this.text="";this.isActive=false;var render=function(){var x=MigScript.Util.deserialize(_t.prefix+"posX",document.documentElement.clientWidth-_t.cont.offsetWidth);var y=MigScript.Util.deserialize(_t.prefix+"posY",document.documentElement.clientHeight-_t.cont.offsetHeight);_t.cont.style.left=x+"px";_t.cont.style.top=y+"px";};var push=function(){MigScript.CustomObjects.alerters.push(_t);_t.id=MigScript.CustomObjects.alerters.length;};var showNext=function(){var next=MigScript.CustomObjects.alerters[_t.id];if(next){next.show();}else{MigScript.CustomObjects.alerters=[];}};var createUI=function(){_t.cont=MigScript.$c("div");_t.cont.className=_t.prefix+"alert_cont";_t.cont.id="al_"+_t.id+"_cont";document.body.appendChild(_t.cont);var head=MigScript.$c("div");head.className=_t.prefix+"alert_head";head.id="al_"+_t.id+"_head";new MigScript.CustomObjects.Dragable(_t.cont,null,null,onDragStop);_t.cont.addEventListener("dblclick",function(e){e.stopPropagation();_t.close();},false);var cl_link=MigScript.$c("a");cl_link.innerHTML="<font color='red'>[x]</font>";cl_link.style.cursor="pointer";cl_link.addEventListener("click",function(e){e.stopPropagation();_t.close();},false);_t.capt=MigScript.$c("span");_t.capt.className=_t.prefix+"alert_capt";_t.capt.style.overflow="hidden";head.appendChild(_t.capt);head.appendChild(cl_link);_t.body=MigScript.$c("div");_t.body.id="al_"+_t.id+"_body";_t.body.className=_t.prefix+"alert_body";_t.cont.appendChild(head);_t.cont.appendChild(_t.body);};var serialize=function(){var alerter={"id":_t.id,"text":_t.text,"caption":_t.caption,"prefix":_t.prefix};if(MigScript.CustomObjects.serializableAlerters==null){MigScript.CustomObjects.serializableAlerters=[];}MigScript.CustomObjects.serializableAlerters.push(alerter);MigScript.Util.serialize("alerts",MigScript.CustomObjects.serializableAlerters);};this.show=function(){createUI();this.isActive=true;clearTimeout(eval(_t.cont.getAttribute("timer")));this.capt.innerHTML="<center><b>"+this.caption+"</b></center>";this.body.innerHTML="<center>"+this.text+"</center>";serialize();render();if(MigScript.Settings.local_settings[16]>0){setTimeout(function(){_t.close();},MigScript.Settings.local_settings[16]*1000);}};this.alert=function(caption,text){this.isActive=true;this.text=text;this.caption=caption;if(this.id==1){this.show(caption,text);}};var onDragStop=function(){if(_t.isActive){var x=_t.cont.offsetLeft;var y=_t.cont.offsetTop;MigScript.Util.serialize(_t.prefix+"posX",x);MigScript.Util.serialize(_t.prefix+"posY",y);}};var remove=function(){try{onDragStop();_t.isActive=false;document.body.removeChild(_t.cont);for(var i=0;i<MigScript.CustomObjects.serializableAlerters.length;i++){if(MigScript.CustomObjects.serializableAlerters[i]!=null){if(MigScript.CustomObjects.serializableAlerters[i].id==_t.id){MigScript.CustomObjects.serializableAlerters[i]=null;break;}}}MigScript.Util.serialize("alerts",MigScript.CustomObjects.serializableAlerters);showNext();}catch(e){MigScript.log(e);}};this.close=function(){MigScript.UI.animateHide(this.cont,remove);};this.init=function(prefix){if(prefix){this.prefix=prefix+"_";}else{this.prefix="";}push();};this.init(prefix);},FloatListClass:function(e,d,c){var g=this;this.isShown=true;var f;this.name=e+"_";this.onClose=null;this.onPopulate=null;this.onPadDeleted=null;c=c||{};if(!c.minWidth){c.minWidth=105;}if(!c.minHeight){c.minHeight=64;}if(!c.list){c.list=[];}if(!c.padCondition){c.padCondition=function(){return false;};}if(!c.hasOwnProperty("avatar")){c.avatar=true;}if(!c.hasOwnProperty("padDelete")){c.padDelete=false;}if(!c.hasOwnProperty("strictLink")){c.strictLink=false;}if(!c.hasOwnProperty("update")){c.update=false;}this.list=c.list;var b=function(h){g.body.removeChild(MigScript.DomUtil.getDescendantById(g.body,"nd"+h));c.list[h-1]=null;if(g.onPadDeleted){g.onPadDeleted(h);}};this.addPad=function(n,l,m){var j=MigScript.$c("div");j.id="nd"+m;if(!c.padCondition(n,m)){j.className="fr_pad";}else{j.className="fav_fr_pad";}if(!c.strictLink){var s=MigScript.$c("div");s.className="floater_link";var o=MigScript.$c("a");o.href=MigScript.HOST+"/id"+n;o.innerHTML=l;o.target="_top";s.appendChild(o);j.appendChild(s);}else{j.innerHTML=l;}if(c.avatar){o.addEventListener("mouseover",function(u){var t=this.href.substring(this.href.indexOf("/id")+3);MigScript.UI.showAvatar(t,u.clientX,170,u.pageY,g.body.offsetWidth);},true);o.addEventListener("mouseout",function(u){var t=this.href.substring(this.href.indexOf("/id")+3);MigScript.UI.hideAvatar(t);},true);}j.addEventListener("mouseover",function(){MigScript.DomUtil.highlight(this);},true);j.addEventListener("mouseout",function(){MigScript.DomUtil.unlight(this);},true);this.body.appendChild(j);if(c.padDelete){var h=MigScript.$c("div");h.className="cross";var p=MigScript.$c("a");p.innerHTML="[x]";p.style.color="#ff0000";p.style.cursor="pointer";p.id="cross"+m;var r=m;p.addEventListener("click",function(){b(r);},true);j.insertBefore(h,s);h.appendChild(p);}};this.populateList=function(j){j=j||c.list;MigScript.DomUtil.removeChildNodes(this.body);for(var h=1;h<=j.length;h++){if(!c.strictLink){this.addPad(j[h-1][0],j[h-1][1],h);}else{this.addPad(null,j[h-1],h);}}if(this.onPopulate){this.onPopulate();}};this.wakeUp=function(h,j){this.isShown=true;MigScript.Util.serialize(e,true);f.wakeUp(h,j);};var a=function(){var h,l;h=(document.documentElement.clientWidth-c.minWidth)/2;l=(document.documentElement.clientHeight-c.minHeight)/2;h=MigScript.Util.deserialize(g.name+"x",h);l=MigScript.Util.deserialize(g.name+"y",l);MigScript.Util.serialize(e,true);f=new MigScript.CustomObjects.FloaterClass(h,l,e,d,c);f.onClose=function(){g.isShown=false;MigScript.Util.serialize(e,false);if(g.onClose){g.onClose();}};g.body=f.body;g.txt=f.txt;if(c.update){var j=MigScript.$c("a");g.txt.appendChild(j);j.style.cursor="pointer";j.addEventListener("click",function(){this.innerHTML='<img src="'+MigScript.UI.Images.loaderImg()+'"/>';c.update();},true);j.innerHTML="[Обновить]";}};a();},MultiPanelClass:function(b){this.buttons=[];var a=function(){this.body=MigScript.$c("div");this.body.className="multipanel";this.body.style.position="absolute";this.body.style.left="0px";this.body.style.top=document.documentElement.clientHeight-this.body.offsetHeight+"px";document.body.appendChild(this.body);}();}};MigScript.Alerts={checkAlerts:function(d){MigScript.CustomObjects.serializableAlerters=MigScript.Util.deserialize("alerts",[]);if(MigScript.Util.notNullCount(MigScript.CustomObjects.serializableAlerters)==0){MigScript.CustomObjects.serializableAlerters=[];}MigScript.log("Serializable alerts is "+MigScript.CustomObjects.serializableAlerters);if(MigScript.CustomObjects.serializableAlerters!=null){for(var a=0;a<MigScript.CustomObjects.serializableAlerters.length;a++){var c=MigScript.CustomObjects.serializableAlerters[a];if(c!=null){var b=new MigScript.CustomObjects.AlerterClass(c.prefix);b.alert(c.caption,c.text);}MigScript.CustomObjects.serializableAlerters[a]=null;}}}};MigScript.UI={getOpaqueBg:function(){var a;a=MigScript.$("hider");if(a==undefined){a=MigScript.$c("div");a.id="hider";a.style.top="0px";a.style.left="0px";a.style.position="absolute";a.style.backgroundColor="#0000ff";a.style.opacity="0.3";a.style.zIndex="1900";a.style.width="100%";a.style.visibiity="visible";a.style.height=document.height+"px";document.body.appendChild(a);}else{a.style.display="inline";}return a;},createVkBtnSet:function(){var b=MigScript.$c("div");b.id="buttons";var a=MigScript.$c("div");a.id="btnset";a.className="nNav";var d=MigScript.$c("center");d.appendChild(b);b.appendChild(a);return d;},addVkBtn:function(b,e,f){var d=MigScript.$("btnset");if(d!=null){var a=MigScript.$c("div");a.className="vkbtn";a.style.width=e;d.appendChild(a);var c=MigScript.$c("div");c.innerHTML=b;c.style.display="inline";c.style.marginLeft="10px";c.className="ncc";c.addEventListener("click",f,true);c.style.cursor="pointer";c.style.width=(e);a.appendChild(c);}},showDFDialog:function(c,b){MigScript.UI.getOpaqueBg();MigScript.UI.Dialog.getDialog("Удаление из друзей");MigScript.UI.Dialog.showBlock(c);var a=MigScript.$c("div");a.id="fr_ok_btn";a.className="box_button";a.innerHTML="Удалить";MigScript.$("dlg_ok_btn").appendChild(a);a.addEventListener("click",function(){MigScript.Menu.declineFriend(b);},true);},showAFDialog:function(c,b){MigScript.UI.getOpaqueBg();MigScript.UI.Dialog.getDialog("Запрос дружбы");MigScript.UI.Dialog.showBlock(c);var a=MigScript.$c("div");a.id="fr_ok_btn";a.className="box_button";a.innerHTML="Добавить";MigScript.$("dlg_ok_btn").appendChild(a);a.addEventListener("click",function(){MigScript.Menu.acceptFriend(b);},true);},placeBookmarkStubs:function(){if(MigScript.Util.checkLocation("id")&&MigScript.$("addToFaves")){MigScript.DomUtil.removeChildNodes(MigScript.$("addToFaves"));var b=MigScript.$c("a");b.style.cursor="pointer";if(MigScript.Friends.isFavFriend(MigScript.$("mid").value)){b.innerHTML="Удалить из избранного";b.addEventListener("click",function(a){MigScript.Bookmarks.unbookAction(MigScript.$("mid").value);},false);}else{b.innerHTML="Добавить в избранное";b.addEventListener("click",function(a){MigScript.Bookmarks.bookAction(MigScript.$("mid").value);},false);}MigScript.$("addToFaves").appendChild(b);}},killAlerts:function(){for(var a=0;a<MigScript.CustomObjects.alerters.length;a++){if(MigScript.CustomObjects.alerters[a]!=null){MigScript.CustomObjects.alerters[a].close();}}MigScript.log("alerts cleaned out");},createUI:function(){var N;var v;var h;var w;var x=MigScript.DomUtil.geByClass("moreDiv",null,"div")[0];var P=MigScript.$c("a");P.id="sett_link";var D=document.createTextNode("Mig[vk]Script");P.appendChild(D);var u=MigScript.$c("li");u.appendChild(P);u.style.cursor="pointer";P.addEventListener("click",function(){MigScript.UI.Settings.openSettings();},true);MigScript.$("nav").insertBefore(u,x);try{var b=MigScript.$("flash_app");if(!b){b=MigScript.$("player");}if(b){b.setAttribute("wmode","opaque");}}catch(J){}MigScript.UI.MainMenu.init();MigScript.UI.MainMenu.extendMenu();GM_addStyle(".mailbox table tr.newRow{background-color:"+MigScript.Settings.local_settings[5]+"!important;}");GM_addStyle(".mailbox table tr.newRow .messageBody {color:"+MigScript.Settings.local_settings[6]+"!important;}");if(MigScript.Util.checkLocation("photo")){h=MigScript.$c("div");h.addEventListener("click",MigScript.Photo.markAll,true);h.innerHTML="<br><b><a>Отметить всех</a></b>";h.style.cursor="pointer";var E=MigScript.$("photoactions");if(E){E.appendChild(h);}if(MigScript.Photo.getTotalMarksNumber()>0&&MigScript.$("photoactions").childNodes.length>8){h=MigScript.$c("a");h.addEventListener("click",MigScript.Photo.deleteAllMarks,true);h.style.cursor="pointer";h.innerHTML="Удалить все отметки ("+MigScript.Photo.getTotalMarksNumber()+")";MigScript.$("photoactions").appendChild(h);}}if(MigScript.Util.checkLocation("photos")){if(MigScript.Util.checkLocation("act=added")){var M=MigScript.$c("center");B=MigScript.$c("div");B.id="btnset";M.appendChild(B);MigScript.$("searchResults").appendChild(M);MigScript.UI.addVkBtn("<b>Я присутствую НА ВСЕХ фото</b>","400px",function(){MigScript.Photo.confirmAll();});}}if(MigScript.Util.checkLocation("video")&&!MigScript.Util.checkLocation("gsearch")){var A=document.documentElement.innerHTML;var n=MigScript.Video.getVideoUrl(A);v=MigScript.$("videoactions");var r;if(MigScript.Settings.local_settings[34]){r=MigScript.$c("a");r.href=n;r.innerHTML="<b>Скачать<b>";if(v){v.appendChild(r);}}r=MigScript.$c("a");r.style.cursor="pointer";r.innerHTML="Отметить всех";r.addEventListener("click",function(){MigScript.Video.markAll();},true);if(v){v.appendChild(r);}if(MigScript.Video.getTotalMarksNumber()>0&&MigScript.$("videoactions").childNodes.length>7){h=MigScript.$c("a");h.addEventListener("click",MigScript.Video.deleteAllMarks,true);h.style.cursor="pointer";h.innerHTML="Удалить все отметки ("+MigScript.Video.getTotalMarksNumber()+")";MigScript.$("videoactions").appendChild(h);}}if(MigScript.Settings.local_settings[35]){if(MigScript.Util.checkLocation("audio.php")||MigScript.Util.checkLocation("id")||MigScript.Util.checkNames(window.location.href)||MigScript.Util.checkLocation("club")){try{MigScript.UI.placeADownLinks();}catch(t){MigScript.log(t);}w=MigScript.$("audiosWrap");if(w){w.addEventListener("DOMNodeInserted",function(a){if((a.target.id!=null)&&(a.target.id=="audios")){MigScript.UI.placeADownLinks();}},true);}}}if(MigScript.Util.checkLocation("gsearch")){if(MigScript.Settings.local_settings[35]){if(MigScript.Util.checkLocation("section=audio")||MigScript.Util.checkLocation("section%5D=audio")){MigScript.UI.placeAsearchDownLinks();w=MigScript.$("results");if(w){w.addEventListener("DOMNodeInserted",function(c){if((c.target.className!=null)&&(c.target.className=="audioRow")){var a=c.target.getElementsByTagName("img")[0];MigScript.UI.placeAsearchLink(a);}},true);}}}if(MigScript.Settings.local_settings[34]){if(MigScript.Util.checkLocation("section=video")||MigScript.Util.checkLocation("section%5D=video")){if(MigScript.Settings.local_settings[10]){MigScript.UI.placeVDownLinks();}N=MigScript.$c("a");N.style.cursor="pointer";N.innerHTML="Добавить ссылки на скачивание";N.addEventListener("click",function(){MigScript.UI.placeDownLinks();},true);MigScript.$("header").appendChild(N);}}}MigScript.UI.placeBookmarkStubs();if(MigScript.Util.checkLocation("fave.php")){v=MigScript.$("Information").parentNode;if(MigScript.Settings.local_settings[33]){var H=MigScript.$c("div");var g=MigScript.$c("div");g.innerHTML='<div class="flexHeader clearFix"><div><h2>Вы в закладках у этих людей</h2></div></div>';g.className="bOpen";v.appendChild(g);v.appendChild(H);H.innerHTML="<img src='"+MigScript.UI.Images.loaderImg()+"'/>";MigScript.WhoFaved.getList(function(){H.innerHTML="";for(var c=0;c<MigScript.WhoFaved.favedList.length;c++){var Q=MigScript.WhoFaved.favedList[c];var S=MigScript.$c("div");S.style.width="60px";S.style.setProperty("float","left","");S.style.padding="10px 2px 5px 2px";H.appendChild(S);var s=MigScript.$c("a");s.href=MigScript.HOST+"/id"+Q[0];s.style.cursor="pointer";var R=MigScript.$c("div");R.style.overflow="hidden";R.style.height="55px";S.appendChild(R);var a=MigScript.$c("div");a.innerHTML='<a href="'+MigScript.HOST+"/id"+Q[0]+'">'+Q[1]+"</a>";S.appendChild(a);var e=MigScript.$c("img");e.src=Q[2];e.style.width="55px";s.appendChild(e);R.appendChild(s);}});}}if(window.location.href.match(/id\d+/)||MigScript.Util.checkNames(window.location.href)){var l=MigScript.$("activity_time");try{if(!l){N=MigScript.$c("a");N.id="activity_time";N.style.cursor="pointer";N.style.fontSize="8pt";N.innerHTML="[История статусов пользователя]";var p=window.location.href.match(/id\d+/);if(p){p=p.toString();p=p.substring(p.indexOf("/id")+3);}else{var G=MigScript.$("profilePhoto").children[0].src;var C=G.substring(G.indexOf("/u")+2);p=C.substring(0,C.indexOf("/"));}N.addEventListener("click",function(){MigScript.UI.getActivityHistory(p);},false);v=MigScript.DomUtil.geByClass("accountInfo clearFix")[0];v.appendChild(MigScript.$c("br"));var L=MigScript.$c("div");L.id="hlink_cont";L.style.padding="2px";L.style.clear="both";v.appendChild(L);L.appendChild(N);l=MigScript.$c("div");l.id="hist_cont";l.style.borderTop="1px solid #DAE1E8";v.appendChild(l);MigScript.DomUtil.hide(l);}}catch(f){MigScript.log(f);}}if(MigScript.Util.checkLocation("club")){var z=MigScript.$("addToFaves").parentNode;var y=MigScript.$c("li");N=MigScript.$c("a");N.innerHTML="<b>Пригласить всех друзей</b>";N.id="gr_frCall";N.style.cursor="pointer";N.addEventListener("click",function(){MigScript.Group.callFriends();},true);y.appendChild(N);z.appendChild(y);}if(MigScript.Util.checkLocation("groups")){var F;var B;if(MigScript.DomUtil.geByClass("s_sep")){F=MigScript.DomUtil.geByClass("s_sep")[0];}if(F){var O=MigScript.$c("div");O.className="s_sep";F.parentNode.insertBefore(O,F.nextSibling);B=MigScript.UI.Group.createMngButton("Выделить друзей","settings5",function(){MigScript.UI.Group.markFriends();});F.parentNode.insertBefore(B,F.nextSibling);}if(MigScript.Group.isAdmin()){B=MigScript.UI.Group.createMngButton("Выгнать всех не друзей на странице",null,function(){MigScript.Group.kickNoFriends();});F.parentNode.insertBefore(B,F.nextSibling);}}if(MigScript.Util.checkLocation("topic")){MigScript.UI.Group.addReplyButtons();MigScript.$("rows_content").addEventListener("DOMNodeInserted",function(c){if(c.target.className!=null&&c.target.className.match(/post/)){var a=c.target.getElementsByTagName("div");MigScript.UI.Group.addReplyButton(a);}},true);}MigScript.UI.ExFriends.init();var m=MigScript.$("banner1");if(m!=null){m.style.display="none";m.innerHTML="";}m=MigScript.$("banner2");if(m!=null){m.style.display="none";m.innerHTML="";}m=MigScript.DomUtil.geByClass("ad_box");if(m){for(var I=0;I<m.length;I++){try{MigScript.log("left_Ad href: "+m[I].href);if(m[I].href.match(/ads.php/)){m[I].style.display="none";MigScript.log("left_Ad href matched. Ad removed");}}catch(J){try{if(m.href.match(/ads.php/)){m.style.display="none";}}catch(o){}}}}if(MigScript.Settings.local_settings[1]){document.body.addEventListener("mouseover",function(a){MigScript.UI.addContactMenu(a,a.target,a.target.toString());},false);MigScript.UI.purgeContactMenu();}var j=document.getElementsByTagName("a");for(var I=0;I<j.length;I++){if(j[I].href.split("away.php?to=").length==2){j[I].href=unescape(j[I].href.split("away.php?to=")[1]);}if(j[I].href===MigScript.HOST+"/help.php?page=target"){MigScript.$("sideBar").removeChild(j[I].parentNode);}}var K=MigScript.$("edit_activity_text");if(K){K.removeAttribute("onblur","");K.setAttribute("maxlength","255");}},placeVDownLinks:function(){var b=MigScript.$("results");for(var c=0;c<b.childNodes.length;c++){var e=b.childNodes[c];if(e.id!=null&&e.id.match(/video/)){var a=e.id.substring(5);var g=MigScript.$("videoInfo"+a);if(MigScript.$("dx"+a)==null){var f=g.childNodes[1].childNodes[0].href;var d=new MigScript.Ajax.AjaxClass(function(j,m){var h=/vkid:.(.*?).,/.exec(m)[1];var n=MigScript.$("videoInfo"+h);j=MigScript.$c("a");j.href=MigScript.Video.getVideoUrl(m);j.innerHTML="Скачать видео";j.id="dx"+h;var l=MigScript.$c("br");n.appendChild(l);n.appendChild(j);});d.get(f);}}}},getActivityHistory:function(a){var b=new MigScript.Ajax.AjaxClass();b.get("/profile.php",{"activityhistory":"1","id":a});MigScript.$("activity_time").innerHTML='<img src="'+MigScript.UI.Images.loaderImg()+'"/>';b.onDone=function(g,f){var h=MigScript.$("hist_cont");MigScript.DomUtil.show("hist_cont");h.innerHTML=f;MigScript.DomUtil.removeChildNodes(MigScript.$("hlink_cont"));var d=MigScript.$c("a");d.id="activity_time";d.style.cursor="pointer";d.style.fontSize="8pt";d.innerHTML="[Спрятать историю]";var e=window.location.href.match(/id\d+/);if(e){e=e.toString();e=e.substring(e.indexOf("/id")+3);}else{e=MigScript.Util.getUserId(window.location.href);}MigScript.$("hlink_cont").appendChild(d);d.addEventListener("click",function(){MigScript.DomUtil.hide("hist_cont");MigScript.DomUtil.removeChildNodes(MigScript.$("hlink_cont"));var c=MigScript.$c("a");c.id="activity_time";c.style.cursor="pointer";c.style.fontSize="8pt";MigScript.$("hlink_cont").appendChild(c);c.innerHTML="[История статусов пользователя]";var j=window.location.href.match(/id\d+/);if(j){j=j.toString();j=j.substring(j.indexOf("/id")+3);}else{var m=MigScript.$("profilePhoto").children[0].src;var l=m.substring(m.indexOf("/u")+2);j=l.substring(0,l.indexOf("/"));}c.addEventListener("click",function(){MigScript.UI.getActivityHistory(j);},false);},false);};},placeAsearchLink:function(p,e){var h=MigScript.$c("img");h.src=MigScript.UI.Images.downloadImg();h.style.width="16px";h.style.padding="1px";h.style.cursor="pointer";if(e){h.id="dx"+e;}p.parentNode.style.width="50px";var o=p.parentNode.parentNode.getElementsByClassName("audioTitle")[0].childNodes;var s,v;for(var m=0;m<o.length;m++){if(o[m].id!=null){if(o[m].id.match(/performer/)){s=o[m].innerHTML;}else{if(o[m].id.match(/title/)){if(o[m].childNodes!=null){if(o[m].childNodes[0].tagName=="a"){v=o[m].childNodes[0].innerHTML;}else{v=o[m].childNodes[0].textContent;}}else{v=o[m].innerHTML;}}}}}if(MigScript.Settings.local_settings[36]){var c=p.parentNode.parentNode.getElementsByClassName("duration")[0].innerHTML;var d={"artist":s.toLowerCase(),"title":v.toLowerCase(),"dur":c};var r=false;for(var g=0;g<MigScript.Audio.doubles.length;g++){if(MigScript.Audio.doubles[g].artist==d.artist){if(MigScript.Audio.doubles[g].title==d.title){if(MigScript.Audio.doubles[g].dur==d.dur){p.parentNode.parentNode.parentNode.parentNode.parentNode.style.display="none";r=true;break;}}}}if(!r){MigScript.Audio.doubles.push(d);}}var t=p.getAttribute("onclick");t=t.match(/[0-9]+,[0-9]+,[0-9]+,\'(\w+)\',[0-9]+/).toString();t=t.split(",");var b="http://cs"+t[1]+".vkontakte.ru/u"+t[2]+"/audio/"+t[5]+".mp3";s=s.replace("&amp;","&");v=v.replace("&amp;","&");h.title=s+" - "+v;var u=MigScript.$c("a");u.href=b;p.parentNode.appendChild(u);u.appendChild(h);if(MigScript.Settings.local_settings[42]){var n=MigScript.$c("img");n.style.width="32px";n.src=MigScript.UI.Images.lyricsImg();n.addEventListener("click",function(){window.open("http://www.lyricsplugin.com/winamp03/plugin/?artist="+encodeURIComponent(s.replace("'","\\'").replace(/&amp;/g,"&"))+"&title="+encodeURIComponent(v.replace("'","\\'").replace(/&amp;/g,"&"))+"","_blank","width=300, height=500,scrollbars=1");},false);n.style.marginLeft="2px";n.style.cursor="pointer";p.parentNode.appendChild(n);}},placeAsearchDownLinks:function(){var b=MigScript.$("results");MigScript.Audio.doubles=[];for(var c=0;c<b.childNodes.length;c++){var d=b.childNodes[c];if(d.id!=null&&d.id.match(/audio/)){var e=d.id.substring(5);if(MigScript.$("dx"+e)==null){var a=MigScript.$("imgbutton"+e);MigScript.UI.placeAsearchLink(a,e);}}}},placeALink:function(h){var c=MigScript.$c("img");c.src=MigScript.UI.Images.downloadImg();c.style.width="16px";c.style.padding="1px";c.style.cursor="pointer";h.parentNode.style.width="50px";var n=h.getAttribute("onclick");n=n.match(/\'.+'/).toString();n=n.replace(/\'/g,"");var b=n;var g;var m;var p;try{g=h.parentNode.parentNode.getElementsByClassName("audioTitle")[0].childNodes;for(var d=0;d<g.length;d++){if(g[d].id!=null){if(g[d].id.match(/performer/)){m=g[d].childNodes[0].innerHTML;}else{if(g[d].id.match(/title/)){if(g[d].childNodes!=null){if(g[d].childNodes[0].tagName=="a"){p=g[d].childNodes[0].innerHTML;}else{p=g[d].childNodes[0].textContent;}}else{p=g[d].innerHTML;}}}}}}catch(l){g=h.parentNode.parentNode.getElementsByClassName("duration")[0].parentNode.childNodes[0].childNodes;for(var d=0;d<g.length;d++){if(g[d].id!=null){if(g[d].id.match(/performer/)){m=g[d].childNodes[0].innerHTML;}else{if(g[d].id.match(/title/)){p=g[d].innerHTML;}}}}}m=m.replace("&amp;","&");p=p.replace("&amp;","&");c.title=m+" - "+p;var o=MigScript.$c("a");o.href=b;h.parentNode.appendChild(o);o.appendChild(c);if(MigScript.Settings.local_settings[42]){var f=MigScript.$c("img");f.style.width="32px";f.src=MigScript.UI.Images.lyricsImg();f.addEventListener("click",function(){window.open("http://www.lyricsplugin.com/winamp03/plugin/?artist="+encodeURIComponent(m.replace("'","\\'").replace(/&amp;/g,"&"))+"&title="+encodeURIComponent(p.replace("'","\\'").replace(/&amp;/g,"&"))+"","_blank","width=300, height=500,scrollbars=1");},false);f.style.marginLeft="2px";f.style.cursor="pointer";f.style.marginLeft="2px";f.style.cursor="pointer";c.parentNode.parentNode.appendChild(f);}},placeDownLinks:function(){MigScript.UI.placeVDownLinks();MigScript.UI.placeADownLinks();},placeADownLinks:function(){var b=MigScript.DomUtil.geByClass("playimg");if(b){for(var c=0;c<b.length;c++){var a=b[c];MigScript.UI.placeALink(a);}}},purgeContactMenu:function(){var d=document.getElementsByTagName("a");for(var c=0;c<d.length;c++){var a=d[c].getAttribute("href");var b=MigScript.Util.getUserId(a);if(b&&b!=""&&b!=MigScript.myUid&&d[c].getElementsByTagName("img").length==0){MigScript.UI.Menu.addMenu(d[c],b);}}},addContactMenu:function(d,c,a){var b=MigScript.Util.getUserId(a);MigScript.log(b);if(b&&b!=""&&b!=MigScript.myUid){MigScript.UI.Menu.addMenu(c,b);MigScript.UI.Menu.showMenu(b,c,d);}},togglePlusBtn:function(b){var a=MigScript.$(b);if(a){if(a.innerHTML=="[-]"){a.innerHTML="[+]";a.title="Развернуть";}else{a.innerHTML="[-]";a.title="Свернуть";}}},showHelloMsg:function(){var c=MigScript.Util.deserialize("hello",false);if(!c){MigScript.UI.getOpaqueBg();MigScript.UI.Dialog.getDialog("<center>Новости MigScript</center>");MigScript.$("dlg_body").style.overflow="auto";MigScript.$("dlg_body").style.minHeight="100px";MigScript.$("dlg_body").style.maxHeight="300px";MigScript.UI.Dialog.showBlock(MigScript.helloMsg);var b=MigScript.$c("div");b.id="hello_wr_btn";b.className="box_button";b.innerHTML="Написать автору";MigScript.$("dlg_ok_btn").appendChild(b);b.addEventListener("click",function(){window.location.href="http://vkontakte.ru/mail.php?act=write&to=4518704";},true);MigScript.Util.serialize("hello",true);MigScript.Util.serialize("warcherPool",null);try{MigScript.$("doclick").addEventListener("click",function(){MigScript.Util.promptId();},true);}catch(a){}MigScript.Statistics.ping();}},showWarnMessage:function(){MigScript.helloMsg="<center><h1>Внимание!</b></h1></center><br>"+"<center>Ваш браузер <b>не поддерживает Mig[vk]Script</b>!</center><br><br>"+"<br> "+"<br> Уважаемый пользователь!"+"<br> К сожалению, ваш браузер не поддерживает данный скрипт."+"<br> Скрипт работает только в браузере <b>Mozilla Firefox</b>"+"<br> Для того, чтобы скрипт не создавал вам трудностей, <b>удалите его</b> сейчас."+"<br><br> Более подробную информацию можно получить в группе <a href='/club12388587'>Mig[vk]Script</a> или прочитать в <a href='/pages.php?id=10553319'>F.A.Q</a>. "+"<br>";MigScript.UI.getOpaqueBg();MigScript.UI.Dialog.getDialog("<center>Новости MigScript</center>");MigScript.$("dlg_body").style.overflow="auto";MigScript.$("dlg_body").style.minHeight="100px";MigScript.$("dlg_body").style.maxHeight="300px";MigScript.UI.Dialog.showBlock(MigScript.helloMsg);var a=MigScript.$c("div");a.id="hello_wr_btn";a.className="box_button";a.innerHTML="Написать автору";MigScript.$("dlg_ok_btn").appendChild(a);a.addEventListener("click",function(){window.location.href="http://vkontakte.ru/mail.php?act=write&to=4518704";},true);},showAvatar:function(uid,x,dx,y,containerWidth,list){var div=MigScript.UI.createAvatarBox(uid,list);clearTimeout(eval(div.getAttribute("timer")));div.style.opacity="1";if(x<150){div.style.left=x+containerWidth+"px";}else{div.style.left=x-dx+"px";}div.style.top=y+"px";div.style.display="block";},hideAvatar:function(a){var b=MigScript.$("abox_"+a);MigScript.UI.animateHide(b);},createAvatarBox:function(d,e){var f=MigScript.$("abox_"+d);if(!f){f=MigScript.$c("div");f.style.width="100px";f.style.maxHeight="200px";f.id="abox_"+d;f.style.position="absolute";f.style.zIndex="3000";var b=MigScript.$c("img");var a;if(!e){for(var c=0;c<MigScript.Friends.friendList.length;c++){if(d==MigScript.Friends.friendList[c][0]){a=MigScript.Friends.friendList[c];break;}}b.src=a[2];}else{for(c=0;c<e.length;c++){if(d==e[c][0]){a=e[c];break;}}b.src=a[2];}b.style.border="1px solid #B1BDD6";f.appendChild(b);document.body.appendChild(f);}return f;},animateHide:function(b,a){if(b!=null){if(MigScript.Settings.local_settings[39]){var d=setTimeout(function(){c(0);},20);b.setAttribute("timer",uneval(d));}else{b.style.display="none";if(a){a();}}}function c(e){if(b.style.opacity==0&&b.style.opacity!=""){b.style.display="none";if(a){a();}}else{b.style.opacity=(1-0.1*e);d=setTimeout(function(){c(++e);},20);b.setAttribute("timer",uneval(d));}}}};MigScript.UI.Images={noDataImg:function(){return"http://vkontakte.ru/images/question_b.gif";},loaderImg:function(){return"http://vkontakte.ru/images/upload.gif";},mailImg:function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8%2F9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA%2Bf8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAK0SURBVHjapJLPihxlFMV%2F35%2Bumu6q7p6Z7slMCIkSBpUg7gQDQt7AhUSfwJ3gO%2BQJXOcFApqdKxeKKOIuhIgOIc4fxnGIPT39p7p6uuqrr%2Bq7Ljroxl0OHO7ZnMM9l6tEhNeB5jVhnz%2F69P3t9z75PGr3WiidCgghaHSrUdpIqJ0VESUSRBuLK1bh5ODJjzcG0ff%2B4ulvavTs68et%2FY%2Fvt2PFhtH8XyH1as7yJbPLGX%2BdjSl8wZ3bw6%2B0QYd%2BrMknY7LFDKgJUv1LRYNzBSdHR2SjC3b7m7QIfPftN%2Fz%2B4vQjW%2Fs6BCdsp32yfMG0mLK1vYVSCiWK8XjMZDJhuL1DmqSsnKMoS7IsYzadFLapfe1KhxJHr5MwmU758%2FiUbq%2FL6O8RrSjm5o2bND6wyle4psa5CqUUWmus92VRuhKjGvI8p%2FSepNNlkS3ppn2CBFbLAmmEOjSUvqZyHgBjNLqp69r7hkW2YJ4vieKYEALJRkpkY6SBl6MRq8pRVJ7KeZyrXgVYbGjqer7I8UVOb3OTqvTruwuICKIVthVxOZ2Qdro45ymrdQWjNXa5uDzK9IydrYSyWCcLsjaLIAIKDUFxMR7TbidUlQcEbQy2I%2BNHmQ0Pfvj5p77Vln63R5KktNsdoijCGIvWGqUUVR24ms5omgAojNFYfXU8vvWufXy2M%2Fzs5PA5p%2BfH%2BGq9iTURcdymvZGQdLokSZemgT8OX6BUQGujbLUcE%2F%2F65Rf33r7%2F5IM79z4sQ7S%2FLOXW4qoYZtmiNZ9Nmc%2BnXM7POXu5wlc1y2XGYDCgt7mNOnh4F2kqFIKJU3TcxyTX%2Bqazt6s6e29I%2B%2FpbdWvwTqU6%2Bytvbucrv3d1VfTSbq98c9A8UAcP7%2F739BJAAiLNWiMopdF2Ax2lmM4w0u1rA53sXqd2i%2BL8l8N%2FBgBQbXgCU4xqbAAAAABJRU5ErkJggg%3D%3D";},wrenchImg:function(){return"data:image/gif;base64,R0lGODlhIAAgAMQfAClop5m50YzK6V%2BKrQ1Qhtjr9unz%2BvP3%2BqfV7VCTzM%2Fc50V4oMTh8rPZ7maTxK%2FF2XzB5XWiyeHv%2BKPK5Fe04rTM5SZilr3c72%2B%2B5dHj8H%2BhvcDR39%2Fo8EF8vQBFfP%2F%2F%2FyH5BAEAAB8ALAAAAAAgACAAAAX%2F4CeKymIO26iubPtplqYtnuPerkZUx6EQA5xwpOvwfJ7AsFV6fA4WQuRgOMCWrIUl%2BRsYvoaNB7tKRjxAsERy8CjIo2QjsiisJfaM5wAXeSIMDQ0FhIUMQH0fWhIXDRcZhBlrE4hwDgQOEoGCggwIEg%2BVWBwEFgkPkhkTgw0CEpRBZAEeFh22thMMBggCBQGiS6EEpRYAHbkGrb7AQwYBJjTGyLzLsYmzxhe6yr%2FWfdgdBQwF1N0KGxzfHgAOBdrlBB7yMXDY7YK8F6sSHAEWFnyw2CvACUEDBAgvGLCwoN66TAgjTkCwipQSWQ8l8BLAsSODAQ0dAlAgoSPHBBB8W1m45sEOhJcQEhirMCsRBw8VDLzEkKADGltj%2BrSZAoEnAA8DokRJ9IEAAIIUEnhoCAUp0wEEOjAQQMGnkwMpmJKq5SAmAQ1MV%2FxwautsWrU00CR5y4LDhrssQgAAOw%3D%3D";},warningImg:function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM%2FrhtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAB15JREFUeNrMmWtsHNUVx%2F%2Bz6921HeNHYsdJnBDsgPMyedVpIG4ckkAcRFJeMSQhgTxKadJCW0GFVKklokkAixQkVL5RVS2tEM8PqdQPDcgR4iEhnoIkSCBeIZDGcfyYndndedz%2Bz%2BxdZ3dt1%2BsQao%2F0094dz879zznnnnPu2FBKYTwfxgW813JyI3HIi%2BQDPR4XFriEvEB6SDd5jjSR4vEgrowcrywNq3val6o7r2lQUSOw2ttkJomOtcD94sbDj%2B9Uyvtcqfh76skd85V27QFSS8JjJU4sZG5dMUOpb48o1XVMqZ5Plfv%2BU2p5nSECT5MV2spjcrxUEYM6%2Ba8Hler%2BSKmv31LqJOk9pl7ruE4ZaSu%2BqGM0cj4ThL6DuNXkhvvamzG1eRUQ5%2FrwEoBLzF4s37gTmxaXynXryTJtxVFnjfONDXmwZ2dOjEz728FfI1pZx4Ri0V4ecQE%2FSTnVWFgVx58PfRB2FKbz%2Bn%2BTfuL9PwT%2Bguz6y71r0bRyA45%2FEceZfgddA7jo6k6gce6lCH3ZiZePx0Xg5%2BRjYo8mN55Poq4mR9c0Tao5%2FI8%2F4Kw7Gf886sDIupPSJr5pIV18ohMLNj2GT3pwQkKCHCPW9xmDv%2BOPajr2rANKKmEke%2BEkLSQTFlIZbAteyoKyu1Ayawn2bZkjvxMr7iITR%2BO50QqcTe7ava4BS370Q6DvLEJuHLYVRzx%2BDpMkE3GE%2BTeYFm5pX4%2FWmYGJbyPzyITvS%2BATNWVFsQd%2BspaLgo5M9SHsUYxNYWauyBTPGQ4F2t0wKurw%2BE%2BbETFQznvcq8MkcqEFbiDX%2FLb9ctTUz6BlzlJg2koOrdWfJVDGIjCwoIjs78Hi1lbsvCJIO1eTlaS8kDVQqECppx3z6iZgd%2FsVnJCTpsxAYMQzmfpMijJhamScsk2630xfxziFH8ED25aipiSY81dkMoldKIF7yJzHdi1F7CKGj80JnfTkYXewQLPfpFVNuljEaZH93ZjaeBn2bpgk91tANpGKkTQUInAq2bt%2BSS3WtjZyYfSm3SaJWT7pRo%2BWNLNdTPwk%2F%2BZpFwcwR9sp7Fq%2FAE01wX1%2FRhpIyXcVuC8aNio67lhEMW7aGjJhSsOxSuXFYH9W%2FKWysHoQq6zEwzdLgxO4WESKSYuGm7xoBHFUhdt3t9Vj7hw%2Bdn8fY8nReOnSFlYUyDVD3Z5elxa%2FF%2FkcuLqnzj68EK5rqceGztM4dNzfqJtbugV9Q1WYkQT%2BsW5icdGDm5m64uJSVinf1QJdXXsVY43aKdDXranJUhz1hhEYLLkwHm2fgsMPnSy1XdwnDa8uganRuFiCeNXejY0or%2BTMDPqgU3G1UIHVQr4bJG5ZsDQyjihLXzsElonGS6uw58rA5K2kTaedUKEWlIS1f9HMcmxfMyNtHofiPD6gTzxtQSGkEKU7GXpMK9rFtGDE09ZzhpnBD%2BH%2BdZV4%2Bp3Txqk47uaZIySuLTmiBX8pK%2BzRrXNQJDOJtaTX82xtRcEeYIJhw7ZziSo755pBsGbXVMewry2SKaFbSGV%2BnR5KYD25f3NLHdY0c4GZki5oEjeLTGOqKQsnYCcSSGRRjNxrBkORVgI7WkqwbHow712kMT%2FtDCXwQGksXLHvlllMssm0W0WglzV2c8%2BXhZMMrST7gjQpEkXmuv9BKoFwkcKBtiDSpMv5eX6dzo9B1jHcenfbJWi4mGHY26eFOJqk%2FszEoRPEYC13v3Vs6CP6tg4%2Fq2N6Fbsj5AmumdVzDdzIRPHSUfyYZ57RaUf22Cq%2FWL9WP7l0%2BbsdLaiIOFBJS7sjGXwaA1Y8J5BZEDaHZl6CKOPCL4kU0hEz9RUZ%2BPQ%2FCov%2FxPWYxKu6b%2FxC0k62BbfL64v9t85GRVUxVE8SviRbXwW5LsDPxeC5EBP17c8Db36VO%2B1K7uP%2BzkTluQW0VGzdZk0D7rmSqaMz2KbKRutpciYjUIr2Qy2zq7BpNbe6dgIujRu8V%2FJzUVlj2flGaaJTzEJf9%2BVOeiqeNo7rF7Dv4D2i9MBvmBH%2F%2Bi7wVW%2BQdl6RnC%2BL5CIi2XzKI7fNh8FAkpLrMrt4vLmnJxGkRw2%2Bq%2FTY0edDQ%2FgxbKQfximAFOdyGSYVTNW%2FXzWQSbaRKhF4Pdm5bUUdWpov5j7CRdI7JyQjbkDkEN8TQ7hRzuVfOxxynSX3YIjvaAaWTh9okGvFxT%2BQlmrNZRwWR5HopXuZ5ZWsH59u1gRjzwjKL3SfELicD7FwymArNtVqkQXuglO8T4TmKqE%2FG6qAt04EaadaBL5Bbn7qlS9nXLXwKGonVSPkW0EyVrIBZ6uiIKuVsxmCz7XPtRtKNx6yXg5ei5xtZ%2Ba8WCdcYEss5UO89irbhiOfBafOIB3iQQzeSQ5WM4c31upKk%2FPmVeV8DLXvNgYnj9G9STXS1v7wFN3tBG8fniCHDF1NynUt3CqLRZ%2B7kG9fCz1kzXeRTvK6tGFGloXFksxGqNH1MISxOXz95oG2xDdGXl2O6de2kTGyYCY6nOEa2PH3ln%2B8%2FxvivwIMADlRM6flJ8gyAAAAAElFTkSuQmCC";},checkedImg:function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8%2F9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1%2B%2FAAAACV0RVh0U29mdHdhcmUATWFjcm9tZWRpYSBGaXJld29ya3MgTVggMjAwNId2rM8AAANNSURBVDjLbZNtTBR0AMb%2FXuuDW6vNhKkEk0VFvCuOOxjcwcG9yMXJhAgmQkAXMGOSwZlkY4uClrYxCscBGzPeRNHBQOQODDiRjPS4gBZiIIOtJCGxMOB4%2BfWhNhfjw7Pny%2FP8Pj2PAMRmCSHcxXahFq4iQfhLknYq9%2BoyUt7z2DK7qfiiCBE5z%2BVu75RVec5HXPBD0ehDUJXnnPtpN0uwUZ630u9w3RIgXhJ%2B4qho0TVJOfNLJtWLRqodH%2FL10gd8%2FjCTrNFopPWvISsOtnRazPL%2FAYRE7N6Wts2cclVF63ox5xwnKfwji%2FdnUsmZTiZxRENyfwzx15QEnH8ZTZn2u9WFNf%2BnAJUo1DcF07pRwpcrJ%2FjiyXGKHh3jk4VjHBnWkt6ezN1f72G7bydpUI1vrTsFTR%2FXAM8K4SRcdhpfsJVN51C5UcBXG%2FmUreVzdjmXrInD5HUfZ2lpGYAKq4noGwo0twNRmSKnfpu7HyaEv9CrGwJXah2nKZhNI8eeRNGjLE7Np5Dd%2FTaPH%2F8FQOVAJbLmfei%2BjyJuLJL9dV6rXT%2B2GoVEKwxxHaFUOPLI7krHPjFMbm8m%2Bi4FdyZtAJh%2FMhN02Y%2B4IS2aPiXx41r2NjpzxVZXLnbES7IPdQRTuphL%2BY1zAIxMj1LSVQLA9Nw0MS0aEkd1xA6qieqRox9TsadhB%2B3DF6uFZ9quJFXT%2FrXieQOplrf4feEhAGz8a6fMRiKtUhKGookeUBLRE4pyJITX6zzWb09az4g3DVrvV4vdxj%2BaOUL8kJL8zjwcjlUAhqbsqFrkxN5Rob%2BlIqpXTuTNMLz63dGdP%2Fjn4t%2FziQIQPicDKrRtByhaNCC9HEDfuBWAz6xFBJm9if1Bg8oaTqglhPAxKS61TlT0mGyAswDEtSvmQJ8i71H9dSlpU1qM356g3daB4kIo2oEIovoUKG%2FKCf9ZhsslZwwNhsWV5ZXUp1MWiPJmU4LsrOyuvM2XiF5fFN37iLErOTx%2BkKjhUHxveeDasIuM%2BoylmdmZQkCy%2BUySBxMPIt%2BpebctvCps9sAlLzyad%2BN20Qmv%2BlfQ1qiflHaV2oB04Jkt3%2Fifnr83MflGhbn607LO8m9M16saWwfbytaW1pOBPZvz%2FwA7GoOmYElPgQAAAABJRU5ErkJggg%3D%3D";},uncheckedImg:function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8%2F9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1%2B%2FAAAACV0RVh0U29mdHdhcmUATWFjcm9tZWRpYSBGaXJld29ya3MgTVggMjAwNId2rM8AAAKSSURBVDjLdVPdS5NhFH8vo5ugP6OglXod4V0YiXST6UVGwbxpoAy6qAvBi5ANd9fFtoSNfShzkzllw%2Fk9dV%2B6Md2X7ktttGqRcwsbMk7P79CiyXrg4X3e5z2%2F3%2Fmd8zuvRETS1d1zv6dT%2FlT%2BTPlC%2BXJMMSafeDsxNP5mvKtdbMtLR0fHrdHR0SmtVvttcXGRlpeXyev1ktPpJL1e%2F2VyctJgs9k62xL09%2Fc%2FVqlU%2BbW1NcpkMnRycsI7n8%2FzezQaZSKdTvdJPAdaCGQy2W21Wp3z%2B%2F1UKpWoUCjQ0dERJRIJ3tvb27Szs0NbW1vkcrnIaDQWxf2DvwQjIyNTyAwwMjazYoM0HA7TxcUFnZ2dUSgUIofDQXNzc26BvS51d3ffE7K%2BZ7NZOj09ZfDx8TE%2Fd3d3aX9%2Fn5rr4OCAVYDUYrH8TCXjD6Xe3t4BNKxYLHIAak2n0ywdBI1Gg8GRSIQ8Hg%2BDcZ6ZmaFQMPBOGhwcfIVuIyvk1Wo1DkBJlUqFwblcjsH47vP5aG9vj%2Bx2O8VisQ%2FS8PCwfGlpiSWnUikGVKtVVoGFuldXV1kNsm9ubvJ5dnYWKnWSUqkcgj1oGNjPz8%2Fp3xUMBhmEJ9xons1mMx0ept9LCoXirmji53g8zhKR5fLyksFwZWVlhQKBANsIMEigSAxUvVz%2B2sc2ajSaj%2FAXTqAcuIGFhoKgKX1jY4Ozm0wm3IVFyA0mEA25I8Y363a72TY0CYOExsE2lAYSKJyensYw%2FarX630to7ywsNBnMBjyGBJkXV9f52ZBBYC4Q2YRVxOWv277M4kSuubn501Wq7UEn9FpUSs3TJx%2FCPleEffov3%2Fjn30tmUw%2BEaWoRRlWMQN2Qawtl8vPxbebV%2BN%2FA5MhHsP9PufLAAAAAElFTkSuQmCC";},deleteImg:function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8%2F9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1%2B%2FAAAACV0RVh0U29mdHdhcmUATWFjcm9tZWRpYSBGaXJld29ya3MgTVggMjAwNId2rM8AAAMnSURBVDjLbZN5SNNhGMdfDQKDouiPSPunhBDFijTyKGe7ymPTpjvydhoG80icTIVKK4yKNI8OqMgsKrFDyH%2FKA5VW5jEz05mWaZtr6ly20qlzv2%2B%2FjRplfuHheeB9Pt%2Fn5T0IALI8aLltJ4S1jxAhjzgfiXfdwksViL1W7F0GrpUQIi3bvL7uxSG%2FCaWIDaWQhaawwJn7vp5tV%2FYFnKpt79y%2BooEbIVtPrnauao4ItmgvZFPzV%2FOsC5ezrXPFadRcUbJVr4i1vIlmWGqC%2FJSN1Xd5NOPkMKC1rtDF%2Be6rBN6CqbrYOnM%2BkxqXx1NjBceo8TNZlFaeRE0mcWFWCNGXGIKnB5nqYZ2e4TAQE5LSKmBazA8uLhnPSDGv7oaxPA96hQC63MOYKM3FXH8nNAVx%2BCkLhUrCRlNW%2BjOa3UDWEOJa7rqxfqoiH98Kj1ILahVssppnYShXYLJMYa9tmu3vwhhvN77JwtEQwTFOve2OJNsIYT8P9Z%2BgbhdiPEMCY2W%2BA7Dlv2tdSS4MId4wiPeiM5qJwRuVJYRBiEgp4QA386GViaE5EoyveWmw%2FvyBP7LVn3NSoI4MhDFkByYjdqM3MgADpcVPCN9pVYxSzAYqj0ObLsRIuB%2B02Sn%2FGXzKSEIfywfGUG9Mhu9Eb4Q%2FBisu1pP4TW68Rv7%2BaVxKh0YmgOa41AHb8p96ic7DskQYwugd8HehOzoYow%2Br75BkcYzHPV%2BvtunTqfiSJsCPDqUDHslMsk9e%2Bm0y0%2F4SI2xPGBOC0CIOt5iGBjJs9%2Bh0hRF04rWISc2eSsRQNMtuYgP7ub54z%2FGxT7bB7%2Fj0%2BUj80CdioKv47Ajt6Wl%2FB4963rrXMALbeqSh%2BJ4TRen4vtAc8oaG5QFNMB1MD3zkeEEnCcSHRA5apHFL5pnv8n%2BecnPtY05dGFfVEcOGQS7AXCoTizH%2BWBTtgYmeqk9mold8gGpJSbDoVaoKmlnz32caNS%2Fubc6VP2iICtO2S7hQCfdDFRWAN0ImWmMPm7vPn1NbFi3ZdK%2FLir%2Fxd7jotRPcnhu3ilRl5VW9168%2FHKypvWbS6dPoNffl%2Fb8AbV2poGDi82sAAAAASUVORK5CYII%3D";},photoImg:function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8%2F9hAAAACXBIWXMAAAnYAAAJ2AHHoLmtAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89%2BbN%2FrXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz%2FSMBAPh%2BPDwrIsAHvgABeNMLCADATZvAMByH%2Fw%2FqQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf%2BbTAICd%2BJl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA%2Fg88wAAKCRFRHgg%2FP9eM4Ors7ONo62Dl8t6r8G%2FyJiYuP%2B5c%2BrcEAAAOF0ftH%2BLC%2BzGoA7BoBt%2FqIl7gRoXgugdfeLZrIPQLUAoOnaV%2FNw%2BH48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl%2FAV%2F1s%2BX48%2FPf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H%2FLcL%2F%2Fwd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s%2BwM%2B3zUAsGo%2BAXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93%2F%2B8%2F%2FUegJQCAZkmScQAAXkQkLlTKsz%2FHCAAARKCBKrBBG%2FTBGCzABhzBBdzBC%2FxgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD%2FphCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8%2BQ8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8%2BxdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR%2BcQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI%2BksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG%2BQh8lsKnWJAcaT4U%2BIoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr%2Bh0uhHdlR5Ol9BX0svpR%2BiX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK%2BYTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI%2BpXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q%2FpH5Z%2FYkGWcNMw09DpFGgsV%2FjvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY%2FR27iz2qqaE5QzNKM1ezUvOUZj8H45hx%2BJx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4%2FOBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up%2B6Ynr5egJ5Mb6feeb3n%2Bhx9L%2F1U%2FW36p%2FVHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm%2Beb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw%2B6TvZN9un2N%2FT0HDYfZDqsdWh1%2Bc7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc%2BLpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26%2FuNu5p7ofcn8w0nymeWTNz0MPIQ%2BBR5dE%2FC5%2BVMGvfrH5PQ0%2BBZ7XnIy9jL5FXrdewt6V3qvdh7xc%2B9j5yn%2BM%2B4zw33jLeWV%2FMN8C3yLfLT8Nvnl%2BF30N%2FI%2F9k%2F3r%2F0QCngCUBZwOJgUGBWwL7%2BHp8Ib%2BOPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo%2Bqi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt%2F87fOH4p3iC%2BN7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi%2FRNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z%2Bpn5mZ2y6xlhbL%2BxW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a%2FzYnKOZarnivN7cyzytuQN5zvn%2F%2FtEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1%2B1dT1gvWd%2B1YfqGnRs%2BFYmKrhTbF5cVf9go3HjlG4dvyr%2BZ3JS0qavEuWTPZtJm6ebeLZ5bDpaql%2BaXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO%2FPLi8ZafJzs07P1SkVPRU%2BlQ27tLdtWHX%2BG7R7ht7vPY07NXbW7z3%2FT7JvttVAVVN1WbVZftJ%2B7P3P66Jqun4lvttXa1ObXHtxwPSA%2F0HIw6217nU1R3SPVRSj9Yr60cOxx%2B%2B%2Fp3vdy0NNg1VjZzG4iNwRHnk6fcJ3%2FceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w%2B0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb%2B%2B6EHTh0kX%2Fi%2Bc7vDvOXPK4dPKy2%2BUTV7hXmq86X23qdOo8%2FpPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb%2F1tWeOT3dvfN6b%2FfF9%2FXfFt1%2Bcif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v%2B3Njv3H9qwHeg89HcR%2FcGhYPP%2FpH1jw9DBY%2BZj8uGDYbrnjg%2BOTniP3L96fynQ89kzyaeF%2F6i%2FsuuFxYvfvjV69fO0ZjRoZfyl5O%2FbXyl%2FerA6xmv28bCxh6%2ByXgzMV70VvvtwXfcdx3vo98PT%2BR8IH8o%2F2j5sfVT0Kf7kxmTk%2F8EA5jz%2FGMzLdsAAAAgY0hSTQAAeiUAAICDAAD5%2FwAAgOkAAHUwAADqYAAAOpgAABdvkl%2FFRgAAAlpJREFUeNrEkz1rFFEUhp975%2B7MbmaWRUk22ZCoaZIQtkn8wCYYLCzEKulSKAFrG0G0EiwE%2F4aFtaUWdoKNAZsQDNmwJGI2WdaNmc183Zl7rXbB2sIXDpzmnPPyvBxhreVfJPlHqdXV1Rtra2sbvu8%2F6Ha77YuLiw%2BNRmNQFAWO48yur68%2FVUqVKpUKxhiiKCbREEVx9urli9dqa2vrzebm5pq1VmZZ1kzT9H6apiaOYwBncnJSKKXIsozBYIDvO3xreyRx4k%2FPXL2pxsfHL5fLZTlkYYyRWmsphKBeryOlpNfroZTCc13C8BezNQvVnM%2FCoM7OzuzOzg5hGKK1Js9zsixjeXmZNE3Z3v7K4eEhnusxv7DAxMQ4dS5QqgTWoKIo4ujoiDAMyfOcPM8JgoBqtcrp6Qlv373n%2BKyMzH7y%2BGEJ13VRSoGQCCGQ1lqG9q21GGMIggClFL%2F7fT59%2BcGl289oDa5w0NojSRL6%2FT7tdpvBYIAqimJ0WWtNURREUUSaptTrde7dXSKo7HFrqUxjegZrLa1Wi1arxcnJCcoYQ1EUGGMY9r1ej263SxAEPH%2FyiO97e4hr1xkb89Fa0%2B%2F3cRwHKSVyOJjn%2BWhRGIbs7u4SRRGeV2ZxYZGpqQaVSoXj42POz8%2Bx1iKEQDmOI0qlEp7nIaWkKAqstRwcHKC1Zm5ujiRJMMbQ6XTodDpUq1WstbiuK1StVotXVlaIomjEIsuyUaRxHI%2Fc1Wo1fN%2FHGEOSJLium4lms7kxPz9%2FxxgjjDFYa%2F9iMqxhWsOktNZmf3%2F%2Fo%2Fjv3%2FhnANszeTkfe3n5AAAAAElFTkSuQmCC";},albumImg:function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8%2F9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAlwSFlzAAAOwwAADsMBx2%2BoZAAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjA4ZXKc4QAAAXFJREFUOE%2Blk0tLAmEYhb%2F%2BVCQtpEVUEiRG0IVKpEVIESERhQRhF1yEkem0amNElCRWZlZSFppmQgOappsW%2FQI3Lk%2BeT4aiILwMnDnfgfc87wzMtAEQvNzevdqh0YsAyrnlQrlcbkjsiB2PgmbEZatrG81vJmDJvgJBCsP2rrcuaZvp87YFCFIYHJtOqMVP3GVKOI%2FncXirwhdRpR9FVZzcZ%2BWMtpk%2BbZ2BIIVhcdkuAT%2BVyn4gGH%2BTukjk5Yy2mW62TEGQwmCdnYM%2FlkXgIVcrVJ8ilCjgKvmOm%2Bcioi8lOaNtpg%2BPjEGQwjBhtiD0VEC4qutUtZAuydchSDlLI%2FCYw%2FikGZVKRTo7A0YTBCkMpsEhWTiIvEIJpuA%2BTWLdF4NNiUjtX2bkDAF0dnp6DRCkMHT3GWHzhDHq8P8RAa7juJwhwGDo%2FwaQQoBO11mXCGCHrtd3QfD23yfMwd9ip729Q0poh0Zd%2B4fkj9SKWipz8RcCHcTJMjvT%2FAAAAABJRU5ErkJggg%3D%3D";},videoImg:function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8%2F9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAlwSFlzAAAOwwAADsMBx2%2BoZAAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjA4ZXKc4QAAAn9JREFUOE%2BlUu9PklEUfvujXF9cH2pt5lrp%2Brk2S1dzRJhzTs3m1GJYgghSoiIgv14BURH5oYHYDLE2F%2BXWMBFHbIli0jLz89M9d4NJXzvb8977nvM855577jkDQPgvowSnsbIah8UuQqcfLQP5KPYvvyROpdNcsPb%2BA34dHRGxZPRPfpVmiHOIW0zEE2ylUlBrddjP55HNZjE0pIN7yoPMtyzH990c%2Fpyc8DjxFC%2BVIA2%2FPn36%2BlXY29vHbi6H9iedMFps6JUrMGGxYswwjoeyJtTdrUci8Ynzup%2FJQRqewB8IIRJdxu%2FjY7xdeQeH0w3vvB8uzwz0I2NQDgzCyfZWxyR6mZB4xO942gXSCnJFHwqFn9jJZJDc%2FAqb6IQvGIKJVRGJRplQRJgJKKnBaOI84re0toG0grSpmTfLYrPjkewx6hvuQ3S6sP4xgS%2FJTcTia5j1%2BSG63Eh83uA%2BMtIRhAeNEu7oH1BDdE%2FBbHOgq7uHEZMlmCcsaO%2FoRE%2Fvc%2B4jIx1BqLvXwB1mqw0LkSX4AkGo2XPRSQTqi2pQA6s4Ce2rYbweHuF80hEEGSsjf3DAS532%2BuBkz2cYN0EilaFRIkUbO1l0TcG%2FsMgba7HaOf%2Fm7TsgrWAyTcDJ7kzd3dxKcehHDfDMzsHB7t3c0oo5f4C9xDSv8sdhAUaTGTW110BaPgfXb9xCOr2DQ9bdFFs9M168WVpGKBzBC6WK%2BwgUJ96l6ssgTWmQ4qz8K1drsL29zScuw6YxuBjG3HwA62x4ipNIceKdv3ARpCkloE0stoqqqmpWlhk5NpGnjf61bIQrK89xDnFJU5ag6BjUaNkptaioOFsG8lGsyCuufwF6btSv9VNqMQAAAABJRU5ErkJggg%3D%3D";},addImg:function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAGnklEQVRYhc1Wa2xcRxX%2Bzszc3et9eP2MH7Wd1E1itw4xSQ1poeEhhaIioYSi8I%2BojlpRQhQpSEStVKEI9UdBAoNSQqP0R%2BX8qVARgUY86iIhUhqBk0aBbCOX2Js4fse73l17d%2B%2FdefHDrpX12o3bCpWRjnQ1cx7fmXPuN4estfgkF%2FtEo%2F8%2FABAfRvmHN3Y4KXVzt7HmayDbZQ3qAIAYZmEpzoj9oUZsPP%2BjTZflen3Senrg%2ByNtYc9kjxbnzdHMqKkpTAhUmVYEEQVnDnyaR5aNQTTkEWtjqUCU9bmssu9n7aO5jw3g0H%2Bq98i87r%2F9b91Uu7ANOzd9GRvrO8BZ6eVZazCWHMHgyBu4Hf4X6j%2FFJ50QP3Byy9ybHxnAd96NHS7M6r7s5aj46gO92FR%2F%2F90SAgAkZuL487VXENuxoCrq%2BNFTD2Re%2FNAAnroS%2B%2FbCtO431xvx%2BIOHEQnGypXeb2FTfpQtpPCbSyfgbJ1FpIEfON2dObNuAE9eivX4WX0%2Bf63KfXzHYYSCUQCACBECIcLw%2FCW4LAKjAasBowFPzqOzuQcyb1HMLfqcL8zht5dfRLRrwQtW8t0vP5i5uDJW2V%2Fw%2BsRxkr45kRqC%2B9j934IQDijsI1TDwR1aTLwAHOz4eYndL%2F75JERUQkSBoLLIpzSC2sUXO7%2BJgaFX3Prt5sTrE8c%2F9%2FXm4yUZl%2FHAa8N9%2B3LT9qGtdZ9BVaQG4SaFcIMGOUUY%2BDDwYVe7c%2Bjlc4giQhs0oi0a9dVNaK%2F%2BNHLT9qHXhvv2rbQqA6ClPijTDB3NOxFrtXAiGgayRFYruoWBQbFERIVCdavFtrZdkGkGLfXBDwTwxEBDRObtnubKzahrcSFcXebUoAgLvQYAWSYsoNHQFkZz5WbIvN3zxEBD5E67kh7wioVdyoN7X%2BsWhCsBQOKW9x6gA7AasNrCaMAopwyA8gjxa0MwalHPagCOxPbtnQiGgS0bt%2BDvN4Zcjwq7APxlVQBamnYyHPc0bYClRTZ1WQwHGl8uC7hy%2FeAL%2FWV7P33zILDkp7W5ETTCoKVpvxNASQm0RMR1wghHOAC1JB%2F9uS7aeXgmBQuJUIjBDYSgJUpKUALASPiME4TQi8hp9YZb79LwkTRXIZEGMYVAgMNI%2BGsCsNKO5bwsPJMESC3Kx7gBBgaHceTsOCQyKPh5WGnH7tQpJSLDL0pf2VkvQQ3hexGgCDxM4fTEN2AMoJWCVB7Ir8aRrl%2BXmP74b%2FuhndlldrQaMG4aARYDUERaJpBfkBaGl7BhCYDf9WYnHnspNDg5m%2FpsTTgCZVOoDwUAKFirlzgAmJjMlGdbkcF9nSuJtW7561YyiWLODv7x6exE6S2tWFbi1aHr0zDGQjACIwlGCpxZOEzAYQKMqBwAseXzlUJgeHdoElbi1TK7lRsuj55Kjvrjl2%2BOwGEOArxcGJVPcozYqroB7iA%2BdhNTidy4y6On7grg7KHpvPLo2avvTOHirSEIEggwp0TWBLBCzyEHVycTGPzHKJRHz549NJ1fabfmPPCl5yt%2BVdvBnt66rRafb%2B1GzA0vn10bn4RTbCt5jot8FN0dTcs6uWIBb49dRfzKFJJD5qW%2FPlf47mpx1hxK68LNR2bi441GJfel5HlsrmpBV207aisq0d3aivLfsxUAkPFziCcTeG9uFFNXfSSH9NkNsXuOrBXnA0ey753%2BCrty463nw014pnGnoGCMEHEq0BSqQ2UgDJcHQETwVBHzMo%2Bp%2FCwyxRz8jMXUO8rmJvFC96ZHnvvlUwNrstm6puLdz0QeNqR%2BUtXOHqm6lyHSzMB4qY7RwMKEQTphkB4xbzErjp1%2FYeHC3XyvCuDkyZM0ODhIw8PDLJPJUKFQoKLyWN2jsw9z1%2BwVLh51a2izcMkBAOVZ6aXsdeXhDe2x39%2F%2BU%2B3bjgha13VNVVWVbWlpMZ2dnXb%2F%2Fv22q6urHMCxY8fYwMAAn5mZEYVCwVFKCa21Y4wR1lphrRUAhLWWL31zHoQTakAlLJCfwbz2IQFoAJoxpgEoIpJEpIhIcc6lEEK5riurq6tVT0%2BP6u%2FvNyIejyMej1M6nWae5wmtNddai6XgzpIIa62DxaYVAIT2wbM3rbLWEmMsCMDB0hNqjFFExJYSZIwx0npxiPF932azWZNIJNiFCxdMSQnOnDlD586do0Qiwebm5lg%2Bn%2BfFYpEppbgxhhljOAAyxhAWOeR9SrQALBFZIjKMMcMYM5xzHQgE9FIpTFtbm9m7d6%2Fp7e1dDrquJvxfrv8CxXtXyeWMdPgAAAAASUVORK5CYII%3D";},visitImg:function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAADyElEQVR42rWV%2B2%2FbVBTHz72247zrrLREDRsJQmq7hZKJ%2FQEZaGhjbKI8OgFjpONXhMofgNb9BfuBP6CBsQevFYZAGwOc8QfQSktaTVrXtHRTmzSJm4db27HNuW5XmGAklbIjXT%2Fl7%2Bec7z33msD%2FxMAb3ybwlARCJEIIXuIgZBoPmdmvjivQRpD%2FehgfuXIaX30S6vJFA8EAuEQPWBaAadlQrdWhVm%2BAbjQzCDs7c%2Blo5lHi%2B969lngI0D%2F8tYQfyXsi3YlIXxgI54GqaoKqmYDaQCkFnuMA8FpVG1CprIKmqQw0mrtwJP%2BQ%2BMnrrHqZ%2FFNcEDh5aDCa8PhDsFLRobZugihwzBYne82wMHMTOI6C6BLxMQdqrQJqo6TYYA1nz7%2FsVBM%2FdSPBUV62bUvaBgy8%2Fg2KP50MhHphpbwBQb8IlKCopkFd1YByAlDeDYZJob6ug2E18T1WxItgNw2oKvfQRnMUTZ9m4sFQRKoq9zfnAMVTuyPdE7FYDKoNzNpFoVgswnKhDBu64%2FVNHM%2FzPJ%2F0erskt%2B8JMIFC09Kc6oQHkMp9hd13hfokHissF%2FKbgPjI5PyB%2FQNRQM%2BxLLgzNw%2FltUYaO%2BfjmcvHlL99vSah4hjHu874g2EQ3F6sZANYhwkcVrdRdyriBBc%2Bo1BiANaKPbsCU%2F39%2FZgRwMLiAhRLa59mLx376FHdET%2F1S4JQKgeCT0qiNwCGrTmCLk4E1gG6rYOIwNLKggMYfybad6Y3HIF6rQq523czs18eP9iqv59L%2FZagW16blAPd0rHDeCzQYi6BT%2FCiRYsIePPK5L6BZ1%2Fz%2BiWYm7sDSq1xEG3JtAKwGDp9c0xwec950C7NMnBeNsWZZT7BA7XSnwwwKb%2BQiCebNoGZ2dv5WxePxtoS%2F%2BB3pwJfV1givIAAfWuhE%2Bfs43ENrS4BGXzrO3loKJ5sNFS4m19Mz1x%2BdbQtcQ7Fg2GJCiI0wdgUp8QBMIabuqBSYICR72Wc4KS6rsHSvSW29MdbZ87JvkCvxKH4tijdyh5g2yaltMwAV889tXvPmK4bUFwttAQc%2BPAPux0LHwQZPHE1tSvUM2FTAdaUwtncxVfGdyLQErD3xA9R0e2Zd3m6oV5dRsCRzgLYYe%2FbP075Aj0JtVFO5y4cbjnJOwe881NKFP0TuqFO5744vL%2FjABbxk9fnCeWiuBeFcNtt62%2B1IwBuZCm8ncA9ZTR7%2FlC64wCnivd%2BlrGBleznh4YfE%2BBGFAFTOGLZz17qiE3%2F%2BunH3%2F81iasweSv94vhjAbDArTiKgHwnAH8BBxJ50q7e3HUAAAAASUVORK5CYIJkYXRhOmltYWdlL3BuZyyJUE5HDQoaCgAAAA1JSERSAAAAGAAAABgIBgAAAOB3PfgAAAPISURBVHjatZX7b9tUFMfPvbbjvOustEQNGwlCaruFkon9ARloaGNsojw6AWOk41eEyh%2BA1v0F%2B4E%2FoIGxB68VhkAbA5zxB9BKS1pNWte0dFObNImbh1vbsc25bleYYCSVsiNdP%2BXv55zvPfeawP%2FEwBvfJvCUBEIkQghe4iBkGg%2BZ2a%2BOK9BGkP96GB%2B5chpffRLq8kUDwQC4RA9YFoBp2VCt1aFWb4BuNDMIOztz6WjmUeL73r2WeAjQP%2Fy1hB%2FJeyLdiUhfGAjngapqgqqZgNpAKQWe4wDwWlUbUKmsgqapDDSau3Ak%2F5D4yeusepn8U1wQOHloMJrw%2BEOwUtGhtm6CKHDMFid7zbAwcxM4joLoEvExB2qtAmqjpNhgDWfPv%2BxUEz91I8FRXrZtS9oGDLz%2BDYo%2FnQyEemGlvAFBvwiUoKimQV3VgHICUN4Nhkmhvq6DYTXxPVbEi2A3Dagq99BGcxRNn2biwVBEqir3N%2BcAxVO7I90TsVgMqg3M2kWhWCzCcqEMG7rj9U0cz%2FM8n%2FR6uyS37wkwgULT0pzqhAeQyn2F3XeF%2BiQeKywX8puA%2BMjk%2FIH9A1FAz7EsuDM3D%2BW1Rho75%2BOZy8eUv329JqHiGMe7zviDYRDcXqxkA1iHCRxWt1F3KuIEFz6jUGIA1oo9uwJT%2Ff39mBHAwuICFEtrn2YvHfvoUd0RP%2FVLglAqB4JPSqI3AIatOYIuTgTWAbqtg4jA0sqCAxh%2FJtp3pjccgXqtCrnbdzOzXx4%2F2Kq%2Fn0v9lqBbXpuUA93SscN4LNBiLoFP8KJFiwh488rkvoFnX%2FP6JZibuwNKrXEQbcm0ArAYOn1zTHB5z3nQLs0ycF42xZllPsEDtdKfDDApv5CIJ5s2gZnZ2%2FlbF4%2FG2hL%2F4HenAl9XWCK8gAB9a6ET5%2BzjcQ2tLgEZfOs7eWgonmw0VLibX0zPXH51tC1xDsWDYYkKIjTB2BSnxAEwhpu6oFJggJHvZZzgpLquwdK9Jbb0x1tnzsm%2BQK%2FEofi2KN3KHmDbJqW0zABXzz21e8%2BYrhtQXC20BBz48A%2B7HQsfBBk8cTW1K9QzYVMB1pTC2dzFV8Z3ItASsPfED1HR7Zl3ebqhXl1GwJHOAthh79s%2FTvkCPQm1UU7nLhxuOck7B7zzU0oU%2FRO6oU7nvji8v%2BMAFvGT1%2BcJ5aK4F4Vw223rb7UjAG5kKbydwD1lNHv%2BULrjAKeK936WsYGV7OeHhh8T4EYUAVM4YtnPXuqITf%2F66cff%2FzWJqzB5K%2F3i%2BGMBsMCtOIqAfCcAfwEHEnnSrt7cdQAAAABJRU5ErkJggg%3D%3D";},downloadImg:function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89%2BbN%2FrXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz%2FSMBAPh%2BPDwrIsAHvgABeNMLCADATZvAMByH%2Fw%2FqQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf%2BbTAICd%2BJl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA%2Fg88wAAKCRFRHgg%2FP9eM4Ors7ONo62Dl8t6r8G%2FyJiYuP%2B5c%2BrcEAAAOF0ftH%2BLC%2BzGoA7BoBt%2FqIl7gRoXgugdfeLZrIPQLUAoOnaV%2FNw%2BH48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl%2FAV%2F1s%2BX48%2FPf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H%2FLcL%2F%2Fwd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s%2BwM%2B3zUAsGo%2BAXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93%2F%2B8%2F%2FUegJQCAZkmScQAAXkQkLlTKsz%2FHCAAARKCBKrBBG%2FTBGCzABhzBBdzBC%2FxgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD%2FphCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8%2BQ8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8%2BxdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR%2BcQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI%2BksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG%2BQh8lsKnWJAcaT4U%2BIoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr%2Bh0uhHdlR5Ol9BX0svpR%2BiX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK%2BYTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI%2BpXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q%2FpH5Z%2FYkGWcNMw09DpFGgsV%2FjvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY%2FR27iz2qqaE5QzNKM1ezUvOUZj8H45hx%2BJx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4%2FOBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up%2B6Ynr5egJ5Mb6feeb3n%2Bhx9L%2F1U%2FW36p%2FVHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm%2Beb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw%2B6TvZN9un2N%2FT0HDYfZDqsdWh1%2Bc7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc%2BLpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26%2FuNu5p7ofcn8w0nymeWTNz0MPIQ%2BBR5dE%2FC5%2BVMGvfrH5PQ0%2BBZ7XnIy9jL5FXrdewt6V3qvdh7xc%2B9j5yn%2BM%2B4zw33jLeWV%2FMN8C3yLfLT8Nvnl%2BF30N%2FI%2F9k%2F3r%2F0QCngCUBZwOJgUGBWwL7%2BHp8Ib%2BOPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo%2Bqi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt%2F87fOH4p3iC%2BN7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi%2FRNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z%2Bpn5mZ2y6xlhbL%2BxW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a%2FzYnKOZarnivN7cyzytuQN5zvn%2F%2FtEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1%2B1dT1gvWd%2B1YfqGnRs%2BFYmKrhTbF5cVf9go3HjlG4dvyr%2BZ3JS0qavEuWTPZtJm6ebeLZ5bDpaql%2BaXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO%2FPLi8ZafJzs07P1SkVPRU%2BlQ27tLdtWHX%2BG7R7ht7vPY07NXbW7z3%2FT7JvttVAVVN1WbVZftJ%2B7P3P66Jqun4lvttXa1ObXHtxwPSA%2F0HIw6217nU1R3SPVRSj9Yr60cOxx%2B%2B%2Fp3vdy0NNg1VjZzG4iNwRHnk6fcJ3%2FceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w%2B0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb%2B%2B6EHTh0kX%2Fi%2Bc7vDvOXPK4dPKy2%2BUTV7hXmq86X23qdOo8%2FpPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb%2F1tWeOT3dvfN6b%2FfF9%2FXfFt1%2Bcif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v%2B3Njv3H9qwHeg89HcR%2FcGhYPP%2FpH1jw9DBY%2BZj8uGDYbrnjg%2BOTniP3L96fynQ89kzyaeF%2F6i%2FsuuFxYvfvjV69fO0ZjRoZfyl5O%2FbXyl%2FerA6xmv28bCxh6%2ByXgzMV70VvvtwXfcdx3vo98PT%2BR8IH8o%2F2j5sfVT0Kf7kxmTk%2F8EA5jz%2FGMzLdsAAAAgY0hSTQAAeiUAAICDAAD5%2FwAAgOkAAHUwAADqYAAAOpgAABdvkl%2FFRgAAAVBJREFUeNqslDFuwjAUhj%2B%2FBGimSsxwkUrMHIMKBY5Au7QDU8sRIK1g7AkqZo5SZkQnIMRxFwelaQKJyjfFyvs%2FP9uJVe%2FpjRxaQPc2rgd7pTmqGICaETzjsJXQB5bAOhuUzFgBA8%2B4X0DwLSEHpYkxxBgOSrOVECAAPoCBzeQKm8ALMN2piBLcAVObaWaFCngARlRnZLMqLfTzZPNxn%2Fm4XzjOSH0AF2h5xj27zALJLzzjTHdKfwrQLblnZ9kpDdAVoMP16Egdp3ctW8M4PYmIr9beUcV%2FPux%2F47oIIbrSiaZr7p%2FfT881BAnRi3RxuuAS2doDeiHA6lJhGZllJcDyBpcq0rx31rEUYL0nGpYNFk1kHevklANgckl6puuJdZzWaoDX1I9eZU8nNmuy9%2BEGeASGjZw9LWBoM5uiG9sAswNRO7mOCvCBNjBLOkv4GQDQrXY73AXbEQAAAABJRU5ErkJggg%3D%3D";},bookmarkAddImg:function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8%2F9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89%2BbN%2FrXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz%2FSMBAPh%2BPDwrIsAHvgABeNMLCADATZvAMByH%2Fw%2FqQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf%2BbTAICd%2BJl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA%2Fg88wAAKCRFRHgg%2FP9eM4Ors7ONo62Dl8t6r8G%2FyJiYuP%2B5c%2BrcEAAAOF0ftH%2BLC%2BzGoA7BoBt%2FqIl7gRoXgugdfeLZrIPQLUAoOnaV%2FNw%2BH48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl%2FAV%2F1s%2BX48%2FPf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H%2FLcL%2F%2Fwd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s%2BwM%2B3zUAsGo%2BAXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93%2F%2B8%2F%2FUegJQCAZkmScQAAXkQkLlTKsz%2FHCAAARKCBKrBBG%2FTBGCzABhzBBdzBC%2FxgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD%2FphCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8%2BQ8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8%2BxdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR%2BcQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI%2BksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG%2BQh8lsKnWJAcaT4U%2BIoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr%2Bh0uhHdlR5Ol9BX0svpR%2BiX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK%2BYTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI%2BpXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q%2FpH5Z%2FYkGWcNMw09DpFGgsV%2FjvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY%2FR27iz2qqaE5QzNKM1ezUvOUZj8H45hx%2BJx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4%2FOBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up%2B6Ynr5egJ5Mb6feeb3n%2Bhx9L%2F1U%2FW36p%2FVHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm%2Beb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw%2B6TvZN9un2N%2FT0HDYfZDqsdWh1%2Bc7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc%2BLpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26%2FuNu5p7ofcn8w0nymeWTNz0MPIQ%2BBR5dE%2FC5%2BVMGvfrH5PQ0%2BBZ7XnIy9jL5FXrdewt6V3qvdh7xc%2B9j5yn%2BM%2B4zw33jLeWV%2FMN8C3yLfLT8Nvnl%2BF30N%2FI%2F9k%2F3r%2F0QCngCUBZwOJgUGBWwL7%2BHp8Ib%2BOPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo%2Bqi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt%2F87fOH4p3iC%2BN7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi%2FRNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z%2Bpn5mZ2y6xlhbL%2BxW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a%2FzYnKOZarnivN7cyzytuQN5zvn%2F%2FtEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1%2B1dT1gvWd%2B1YfqGnRs%2BFYmKrhTbF5cVf9go3HjlG4dvyr%2BZ3JS0qavEuWTPZtJm6ebeLZ5bDpaql%2BaXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO%2FPLi8ZafJzs07P1SkVPRU%2BlQ27tLdtWHX%2BG7R7ht7vPY07NXbW7z3%2FT7JvttVAVVN1WbVZftJ%2B7P3P66Jqun4lvttXa1ObXHtxwPSA%2F0HIw6217nU1R3SPVRSj9Yr60cOxx%2B%2B%2Fp3vdy0NNg1VjZzG4iNwRHnk6fcJ3%2FceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w%2B0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb%2B%2B6EHTh0kX%2Fi%2Bc7vDvOXPK4dPKy2%2BUTV7hXmq86X23qdOo8%2FpPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb%2F1tWeOT3dvfN6b%2FfF9%2FXfFt1%2Bcif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v%2B3Njv3H9qwHeg89HcR%2FcGhYPP%2FpH1jw9DBY%2BZj8uGDYbrnjg%2BOTniP3L96fynQ89kzyaeF%2F6i%2FsuuFxYvfvjV69fO0ZjRoZfyl5O%2FbXyl%2FerA6xmv28bCxh6%2ByXgzMV70VvvtwXfcdx3vo98PT%2BR8IH8o%2F2j5sfVT0Kf7kxmTk%2F8EA5jz%2FGMzLdsAAAAgY0hSTQAAeiUAAICDAAD5%2FwAAgOkAAHUwAADqYAAAOpgAABdvkl%2FFRgAAAZdJREFUeNqkkz1rVEEUhp9ZZm%2FM1fgBG8QoSApBwSCYrIaQKr2CrY2ggqV%2FwNI%2FYKeSSGoLC3srSWE2CoIQsd4ENPFjdzHOu7t3joVmZe%2FdXYuc6gzPmfeceYfjzIyDhF%2BvbVht492vIXy8OneZl08eOzPDGTx8ttIv8Gb97d61GzfTJBkr3G63xYvnq%2FX9Kc3Bg9t3gFgxc7sQ8VLYTJKx2W%2FNTkFgIi2jED4dOXf%2BVQ4tASwuLuBbreZrYDa0Y0Gg7B237t5fGvQ2KbC6%2FGjLS7oHoE7RTDW67Da6A82ZPnUISS2voPGpSsLxtFh44XAKwObPvQJL0wQFNb0UOkA5y7KhXzWMSaHiJX0EZrLsnweXThzrK7x4dAKA998bOQHhQwh%2BVJdRk4QQPnhJZ%2FOw9nkHgOrJyb5zvoekGS%2BF9H8TjPBguiTpT1GMZDHydHmll6%2FVt1mrbw9kPQ8UAgBnTk8B8HXnSy%2FPR54pBNyVq%2FMHWkd%2FvTrnAMwMM0ut5FIzo2R0o%2BOHmeGcw0Ujun1TorO%2FG%2FZ7AKmH7reaPc2ZAAAAAElFTkSuQmCC";},bookmarkDelImg:function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8%2F9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89%2BbN%2FrXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz%2FSMBAPh%2BPDwrIsAHvgABeNMLCADATZvAMByH%2Fw%2FqQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf%2BbTAICd%2BJl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA%2Fg88wAAKCRFRHgg%2FP9eM4Ors7ONo62Dl8t6r8G%2FyJiYuP%2B5c%2BrcEAAAOF0ftH%2BLC%2BzGoA7BoBt%2FqIl7gRoXgugdfeLZrIPQLUAoOnaV%2FNw%2BH48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl%2FAV%2F1s%2BX48%2FPf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H%2FLcL%2F%2Fwd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s%2BwM%2B3zUAsGo%2BAXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93%2F%2B8%2F%2FUegJQCAZkmScQAAXkQkLlTKsz%2FHCAAARKCBKrBBG%2FTBGCzABhzBBdzBC%2FxgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD%2FphCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8%2BQ8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8%2BxdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR%2BcQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI%2BksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG%2BQh8lsKnWJAcaT4U%2BIoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr%2Bh0uhHdlR5Ol9BX0svpR%2BiX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK%2BYTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI%2BpXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q%2FpH5Z%2FYkGWcNMw09DpFGgsV%2FjvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY%2FR27iz2qqaE5QzNKM1ezUvOUZj8H45hx%2BJx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4%2FOBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up%2B6Ynr5egJ5Mb6feeb3n%2Bhx9L%2F1U%2FW36p%2FVHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm%2Beb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw%2B6TvZN9un2N%2FT0HDYfZDqsdWh1%2Bc7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc%2BLpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26%2FuNu5p7ofcn8w0nymeWTNz0MPIQ%2BBR5dE%2FC5%2BVMGvfrH5PQ0%2BBZ7XnIy9jL5FXrdewt6V3qvdh7xc%2B9j5yn%2BM%2B4zw33jLeWV%2FMN8C3yLfLT8Nvnl%2BF30N%2FI%2F9k%2F3r%2F0QCngCUBZwOJgUGBWwL7%2BHp8Ib%2BOPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo%2Bqi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt%2F87fOH4p3iC%2BN7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi%2FRNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z%2Bpn5mZ2y6xlhbL%2BxW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a%2FzYnKOZarnivN7cyzytuQN5zvn%2F%2FtEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1%2B1dT1gvWd%2B1YfqGnRs%2BFYmKrhTbF5cVf9go3HjlG4dvyr%2BZ3JS0qavEuWTPZtJm6ebeLZ5bDpaql%2BaXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO%2FPLi8ZafJzs07P1SkVPRU%2BlQ27tLdtWHX%2BG7R7ht7vPY07NXbW7z3%2FT7JvttVAVVN1WbVZftJ%2B7P3P66Jqun4lvttXa1ObXHtxwPSA%2F0HIw6217nU1R3SPVRSj9Yr60cOxx%2B%2B%2Fp3vdy0NNg1VjZzG4iNwRHnk6fcJ3%2FceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w%2B0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb%2B%2B6EHTh0kX%2Fi%2Bc7vDvOXPK4dPKy2%2BUTV7hXmq86X23qdOo8%2FpPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb%2F1tWeOT3dvfN6b%2FfF9%2FXfFt1%2Bcif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v%2B3Njv3H9qwHeg89HcR%2FcGhYPP%2FpH1jw9DBY%2BZj8uGDYbrnjg%2BOTniP3L96fynQ89kzyaeF%2F6i%2FsuuFxYvfvjV69fO0ZjRoZfyl5O%2FbXyl%2FerA6xmv28bCxh6%2ByXgzMV70VvvtwXfcdx3vo98PT%2BR8IH8o%2F2j5sfVT0Kf7kxmTk%2F8EA5jz%2FGMzLdsAAAAgY0hSTQAAeiUAAICDAAD5%2FwAAgOkAAHUwAADqYAAAOpgAABdvkl%2FFRgAAAXxJREFUeNqkkz1PVEEUhp%2FZzF7gRhKLbQQTQ0FiQ8OHGkNFQ4WJrQ2JklDyByz9A3ZAwFBbWEhFYWUlH1YmGmptFA3sJnje3b1zLJQF7q7JEk4yyUnemXfeeSYnuDvXqbi7t%2B97%2Bx9%2F%2F0cfmpme5O3aanB3gsOLV5uXDT7sHpwuPH6SZ9lA1%2BlmU7x5vfX1LKUHeP70GZBq7uEIElGyz1k2MPWr3uoyGM6ryOzwxvjddyVpDmB29iGx0ai%2FB6asmboMqjGwuLQy1%2BttkrG18fJblLQMoFY3TJ20OTpp94QzdmsQSY0o09BILeNm3r4S%2FTzPkKkeJWsB1aIorvyFktWipC%2FARFGcMzidn%2B99685OyUBEM4sA%2FSQo7zGzT1HSnbIYt7f7MpA0ESXL%2B03Qg8FYRdJf95QoUmJ9Y7PTl9dFrcNAZgDcHh0B4OeP752%2BXGVNZoR79x9caxzjo5npAODuuHvulZC7OxWnnQLH7k4IgZCcFM5opuD%2FJuzPAJkd4x755XyQAAAAAElFTkSuQmCC";},IMImg:function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAE7UlEQVRIidVVXYimZRm+rut53vlmxvn5xpF1l3J/TAlrlQyj6ChSFnODKBNBWtwDIRC3gyIi6GADN+qokIR+PDAIAmFt6ajE3MSkUtDFJGUctdnNXWedye+bb775Zr7vfe6rg3dmN4ui0254uN/3eW6u672v+73vB/h/N/63w6n3X4eZAwcxu/d6TLXbSCJEYFQCg/4Aaxf+iu6bf0F34cX/nWBsbhc++IUv4/rb7kRW+vSeKycPXTFR3TIa1teWiDZAwrHWalVLW8Ny5m+rvadMnXrjT6fx2q8exdprL/5ngpvu+zZu+MxdE7NjODFZ4VipI7+10kWnNwBAmAYA26ZLYGqyhWt2zSFnolg/f3t99I2LCy+f/+P37kfZ6F0mYK5w+w+fwNz8lffunmk9en5lDRf/vg4lIDEFCbGJRMBBh2xGKbUiAqNiz1zR4gfeN4+VtcGJXsnf+t3xo+gtvtQQ3PHTZzA/O/XQ9Hh17JWzyx5LCSnJpACYsNxEBgImzSYLFxcDsFnq2lv1iAf2XEUDT/U8fuuvH7gd6UP3fA3X3PSxYxOZx19/axXjVWZK2VKSJBI0UlPe5jVZtEiYlMCGEKIqJq6u9WO8ytdWrg9Mf/gTp3j4kWfHr25PDs4ud9waq0gKJIJMIg1bIUEIIAgQDtuyHaWE4EBBCRQoECgRMRqOtHf3HJbf7R3MQtzb7W+iqjIAhSSQIskgCdps4AGQYJiWoxQzJYQNoIAlRSCIRBI5xfl3upqZGr8/Vyl9ZGNzBCk7JUkQKAQpkQTJACAIgAMkwkE5OWAooql9QohN6iFJdV1jOKxvzoNR7SQBSQQUTIIAUtrOgIQcACBn2GZhRHJhCQUApARGpCBrsLFIStoYDkOinqcSEunUFEBMyYJ2zFSWlKUmQSdJYHIilRo9zcbLpE3KIgg9JwR+BhBuQrAtC5gaXZSILEESICEhAcTlOBH25aVLy0g5P5wIe88tn1pEqe+EhCRBoqVMJUFKlsQdQBMWSDf1pZsSeKdpY3ufKf9g7dzCL9Lqwhns/eThP0/MXjViqW8Vk0VRlJVkQVSS2WAZAB1hmIRhIBwmYdsOwBTBx/Lk1H1Pf/3zEAD85quH0Vl69TtjM3N3QNhscoQMiIIBiISA5l9qtNv2bjCaMzK1Jr7CVN395LFDcNRIO4Pujd8+hs3uyuLugx8/IVX7SNy83a7NVxtN8jYbZ5YoOw0yUjX2UDXVPnT26VO/f+b4l1C2Bv8+TXNrEp975FkkpZck3ggp0o74ETDwLsfGLyK8HvaSiTNI+cn+yoU/vHn6JF45+SOUzf57xnXeebjus0fx0aPfRBn0T9YuN8qCgqoJwLjolL+LUr7/wk8eRClDjPrr6C0vYX3xzL9eKe+9D/bt2YXbHj7NCwN8MYZbD1b0XCthcRzl1QnVz89664kZDF6fTQXdhRcw3Ogh5YwwkHNGMdDprkESSinodDoYDAbodDo4d+4c+MvHH88b/f6+EThPeELwbIJnaEwDJoC2gZkAqZQA7tQUBtAn2SNJAH0APZIdkl1Jy5KW8qiup1POd6GUg6SuDnu6RMxSqgAoIqalBjQMRKkhCRGB7f1eRISkEYDuNsmypJdJ/phHjhzB/v370W63kXPG/Pw8IiJL4jZBa4cAwCXgfyLY2iYwyXp1dRV1XV+S6B/jD35GLMphjAAAAABJRU5ErkJggg%3D%3D";},lyricsImg:function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAUCAMAAAD84U6VAAAAA3NCSVQICAjb4U%2FgAAAAtFBMVEX%2F%2F%2F9Ccp1Ccp0oVYIgTXpCcp1Ccp1Ccp1Ccp0oVYIgTXogTXpCcp1Ccp1Ccp1Abpo9bZk6apU3ZZIyYo0vXYopWYT%2F%2F%2F%2Fx9Pfl6%2FHk6vDi6O7V3ufM2eTH1ODF0d27ytmrvtCetMmUrcWMpb19mbN7l7J6lrBzlbZlh6hbgaRZfqJSe6FPeJ5Lc5hLc5lCcp1AbppKa5Q9bZk%2Fa5Q6apU3ZZIyYo0vXYopWYQoVYIiUXwgTXpUB5GUAAAAPHRSTlMAESIzM0RVZneImaq7zN3u7u7u7u7u%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F8BxhENAAAACXBIWXMAAC4YAAAuGAEqqicgAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M0BrLToAAAATNJREFUKJGVk2tXgzAMhuvdqWzibSLikKlTh7ZTaGn5%2F%2F%2FLNCkU2Dw7ez%2B04fA%2BbRICY7tq7%2BhiPAFdWoVheOV0TbpB3aIgGB2wk4BPhBA%2FVgWodJIoRaqqClZ41CMWCPF45zWPcculzKc2yN47Lx%2B01owPgCVuqZQzuydqK1BmdMXCrtOvjQBUgK%2FvKXtMKo0Qp%2FyfbPwCbm0M45wPgLw9MUG7B4xpANEBpMycHxIiYgjwLmCbGbl66PxKI%2FBqzEYAiA93Q1xtAwoC4rZl5F8HeO8GLIGgFfr%2FBwrfpM%2FUJaX7QL0OJDZ8Vt%2BUlG6BN%2FQ7gHsAE4p%2BlZpjZ1c9oAZg3AWKcokjt4AxLTCKu0BtgdOAu%2BluZrsda9cjTV%2BM%2FGds%2FzigMpDyTIN4wPrPD3f%2BQ%2F8AtnqCKw4kUw0AAAAASUVORK5CYII%3D";}};MigScript.UI.Dialog={getDialog:function(l,j,m){var a=MigScript.$("dlg_txt");if(a==null){a=MigScript.$c("div");a.id="dlg_txt";a.className="popup_box_container message_box";a.style.width="410px";a.style.position="fixed";a.style.top="50px";a.style.marginLeft="-215px";a.style.zIndex="2000";document.body.appendChild(a);var h=MigScript.$c("div");h.className="box_layout";a.appendChild(h);var g=MigScript.$c("div");g.className="box_title_wrap";g.innerHTML='<div class="box_title">'+l+"</div>";h.appendChild(g);var f=MigScript.$c("div");f.className="box_body";f.id="dlg_body";h.appendChild(f);var e=MigScript.$c("div");e.className="box_controls";e.id="dlg_controls";h.appendChild(e);var d=MigScript.$c("div");d.id="dlg_c_btn";d.className="button_wrap button_no";e.appendChild(d);var c=MigScript.$c("div");c.id="dlg_ok_btn";c.className="button_wrap button_yes";e.appendChild(c);if(!j){var b=MigScript.$c("div");b.className="box_button";b.innerHTML="Отмена/Закрыть";b.addEventListener("click",function(){MigScript.UI.Dialog.destroyDlg();if(m){m();}},false);d.appendChild(b);}}return a;},showTxt:function(a){MigScript.UI.Dialog.getDialog().style.display="block";MigScript.DomUtil.removeChildNodes(MigScript.$("dlg_body"));var b=document.createTextNode(a);MigScript.$("dlg_body").appendChild(b);},showBlock:function(a){MigScript.UI.Dialog.getDialog().style.display="block";MigScript.$("dlg_body").innerHTML=a;},showImg:function(a,b){MigScript.UI.Dialog.getDialog().style.display="inherit";var f=MigScript.$("dlg_body");MigScript.DomUtil.removeChildNodes(f);f.appendChild(a);if(b!=null){var d=document.createTextNode(b);var e=MigScript.$c("center");e.appendChild(d);f.appendChild(e);}},destroyDlg:function(){MigScript.DomUtil.hide("container");var a=MigScript.$("container");if(a!=null){MigScript.DomUtil.removeChildNodes(a);}MigScript.DomUtil.hide("dlg_txt");a=MigScript.$("dlg_txt");if(a!=null){MigScript.DomUtil.removeChildNodes(a);a.parentNode.removeChild(a);}MigScript.DomUtil.hide("hider");MigScript.DomUtil.removeChildNodes(MigScript.$("hider"));}};MigScript.UI.Settings={openSettings:function(){MigScript.DomUtil.removeChildNodes(MigScript.$("pageBody"));MigScript.DomUtil.appendDiv("pageBody","wrapH");MigScript.DomUtil.appendDiv("wrapH","wrapHI");var t=MigScript.DomUtil.appendDiv("wrapHI","header");t.innerHTML="<h1> Настройки Mig[vk]Script</h1>";var u=MigScript.$c("a");u.style.cursor="pointer";u.innerHTML="[Полностью очистить настройки]";u.addEventListener("click",function(){MigScript.Settings.purgeSettings();},false);t.appendChild(u);var n=MigScript.$c("a");n.style.cursor="pointer";n.innerHTML="[Сбросить оповещения]";n.addEventListener("click",function(){MigScript.UI.killAlerts();},false);t.appendChild(n);MigScript.DomUtil.appendDiv("pageBody","wrap2");MigScript.DomUtil.appendDiv("wrap2","wrap1");var x=MigScript.DomUtil.appendDiv("wrap1","content");x.className="editorPanel clearFix";var v=MigScript.$c("center");var d=MigScript.$c("table");d.id="s_table";v.appendChild(d);x.appendChild(v);try{for(var s=0;s<MigScript.Settings.tsettings.length;s++){var l=MigScript.$c("tr");var g=MigScript.$c("td");g.className="td0";d.appendChild(l);l.appendChild(g);if(MigScript.Settings.tsettings[s].text){var e=document.createTextNode(MigScript.Settings.tsettings[s].text);g.appendChild(e);}var f=MigScript.$c("td");f.className="td1";l.appendChild(f);if(MigScript.Settings.tsettings[s].type=="alink"){var y=MigScript.$c("b");f.appendChild(y);var A=MigScript.$c("a");A.setAttribute("_id",s);A.href="#_";A.id=MigScript.Settings.tsettings[s].id;A.addEventListener("click",function(){MigScript.Settings.tsettings[this.getAttribute("_id")].action();},true);A.style.color="#aaaa00";A.title=MigScript.Settings.tsettings[s].title;if(MigScript.Settings.tsettings[s].value!=null&&MigScript.Settings.tsettings[s].value!=""){A.appendChild(document.createTextNode(MigScript.Settings.tsettings[s].value));}else{A.appendChild(document.createTextNode(MigScript.Settings.tsettings[s].defaultValue));}y.appendChild(A);MigScript.Settings.tsettings[s].condition();}else{if(MigScript.Settings.tsettings[s].type=="area"){var p=MigScript.$c("textarea");f.appendChild(p);f.style.width="300px";p.style.width="300px";p.style.height="200px";p.id=MigScript.Settings.tsettings[s].id;p.value=MigScript.Settings.tsettings[s].value;}else{if(MigScript.Settings.tsettings[s].type=="text"){var o=MigScript.$c("font");o.color="#aaaa00";o.style.marginLeft="50px";f.appendChild(o);o.appendChild(document.createTextNode(MigScript.Settings.tsettings[s].value));}else{if(MigScript.Settings.tsettings[s].type=="input"){var m=MigScript.$c("input");m.type="text";m.value=MigScript.Settings.tsettings[s].value;m.className="config_input";m.id=MigScript.Settings.tsettings[s].id;f.appendChild(m);}else{if(MigScript.Settings.tsettings[s].type=="checkbox"){var w=new MigScript.CustomObjects.CheckboxClass(MigScript.Settings.tsettings[s].id,MigScript.Settings.tsettings[s].value);w.body.style.marginLeft="50px";w.body.style.width="16px";w.body.style.height="16px";w.body.style.position="relative";w.body.style.top="2px";f.appendChild(w.body);}else{if(MigScript.Settings.tsettings[s].type=="section"){var E=MigScript.$c("div");var D=MigScript.$c("div");var B=MigScript.$c("div");E.style.display="inline";D.style.display="inline";D.style.width="300px";B.style.display="inline";var r=MigScript.$c("center");MigScript.DomUtil.removeChildNodes(l);g=MigScript.$c("td");g.colSpan="2";l.appendChild(g);g.appendChild(r);r.appendChild(E);r.appendChild(D);r.appendChild(B);var C=MigScript.$c("hr");E.appendChild(C);C=MigScript.$c("hr");B.appendChild(C);var j=MigScript.$c("b");D.appendChild(j);j.appendChild(document.createTextNode(MigScript.Settings.tsettings[s].label));}}}}}}}var z=MigScript.$c("br");x.appendChild(z);z=MigScript.$c("br");x.appendChild(z);x.appendChild(MigScript.UI.createVkBtnSet());MigScript.UI.addVkBtn("Сохранить настройки","150px",function(){MigScript.Settings.saveSettings();});}finally{MigScript.UI.addVkBtn("Сбросить по умолчанию","150px",function(){MigScript.Settings.resetSettings();});x.appendChild(MigScript.$c("br"));}}};MigScript.UI.MainMenu={menuFloater:null,isOpen:false,resetMenu:function(){var a=MigScript.Settings.local_settings[38].split("|");function d(f){for(var g=0;g<a.length;g++){if(f==a[g]){return true;}}return false;}if(MigScript.Settings.local_settings[37]){var e=MigScript.$("nav").getElementsByTagName("a");for(var c=0;c<e.length;c++){var b=e[c].innerHTML.split(" ");if(b[1]||(b[1]&&b[2])){if(!b[1].match(/\(<b>\d+<\/b>\)/)&&d(b[0])){e[c].innerHTML=b[1];}}}}},extendMenu:function(){var addCont=function(el,prefix){el.addEventListener("mouseover",function(){MigScript.DomUtil.toggle(MigScript.$(prefix+"_ext"));},false);el.addEventListener("mouseout",function(){var timer=setTimeout(function(){MigScript.DomUtil.hide(prefix+"_ext");},MigScript.Settings.local_settings[4]);MigScript.$(prefix+"_ext").setAttribute("timer",uneval(timer));},false);var d=MigScript.$c("div");d.style.display="none";d.id=prefix+"_ext";d.style.backgroundColor="rgba(255,255,255,0.6)";d.style.zIndex="5000";d.addEventListener("mouseover",function(){clearTimeout(eval(this.getAttribute("timer")));MigScript.DomUtil.show(prefix+"_ext");},false);el.parentNode.appendChild(d);if(MigScript.Settings.local_settings[32]){d.style.position="absolute";d.style.marginTop="-20px";d.style.marginLeft=d.parentNode.offsetWidth-5+"px";d.style.zIndex="50000";d.style.borderTop="1px solid #B1BDD6";d.style.borderRight="1px solid #B1BDD6";d.style.borderBottom="1px solid #B1BDD6";d.addEventListener("mouseout",function(){var timer=setTimeout(function(){MigScript.DomUtil.hide(prefix+"_ext");},MigScript.Settings.local_settings[4]);MigScript.$(prefix+"_ext").setAttribute("timer",uneval(timer));},false);}};var addBtn=MigScript.UI.MainMenu.addBtn;if(MigScript.Settings.local_settings[19]){var menu=MigScript.$("sideBar").getElementsByTagName("ol")[0].getElementsByTagName("a");var edit=MigScript.DomUtil.geByClass("edit",MigScript.$("myprofile"),"a")[0];edit.parentNode.removeChild(edit);var ll=MigScript.DomUtil.geByClass("hasedit",MigScript.$("myprofile"),"a")[0];ll.style.padding="3px 3px 3px 6px";ll.className="";for(var i=0;i<menu.length;i++){if(menu[i].href==MigScript.HOST+"/newsfeed.php"){addCont(menu[i],"news");addBtn("news","Группы","/newsfeed.php?section=groups");addBtn("news","Комментарии","/newsfeed.php?section=comments");}if(menu[i].href==MigScript.HOST+"/friends.php"){addCont(menu[i],"friends");addBtn("friends","Избранные").addEventListener("click",function(e){MigScript.UI.FavContainer.openFavContainer(e);MigScript.UI.FavContainer.addFriends();},true);addBtn("friends","В сети","/friends.php#online");addBtn("friends","Предложения","/friends.php?filter=requests");addBtn("friends","Недавние","/friends.php#recent");addBtn("friends","Телефонная&nbsp;книга","/friends.php#phonebook");}if(menu[i].href==MigScript.HOST+"/audio.php"){addCont(menu[i],"audio");addBtn("audio","Залить","/audio.php?act=new");addBtn("audio","Редактировать","/audio.php?act=edit");}if(menu[i].href==MigScript.HOST+"/groups.php"){addCont(menu[i],"groups");addBtn("groups","Избранные").addEventListener("click",function(e){MigScript.UI.FavContainer.openGrContainer(e);MigScript.UI.FavContainer.addGroups();},true);}if(menu[i].href.match(/mail.php\?id=/)){addCont(menu[i],"mail");addBtn("mail","Исходящие","/mail.php?out=1");addBtn("mail","Написать","/mail.php?act=write");try{var arr=MigScript.Watcher.pool.messages.items;for(q in arr){addBtn("mail",arr[q].replace(/ /g,"&nbsp;"),"/mail.php?act=show&id="+q);}}catch(ex){MigScript.log(ex);}}if(menu[i].href==MigScript.HOST+"/notes.php"){addCont(menu[i],"notes");addBtn("notes","Написать","/notes.php?act=new");addBtn("notes","Комментарии","/notes.php?act=comms");addBtn("notes","Заметки&nbsp;друзей","/notes.php?act=friends");addBtn("notes","Избранные","/notes.php?act=fave");}if(menu[i].href==MigScript.HOST+"/events.php"){addCont(menu[i],"events");addBtn("events","Календарь","/events.php?act=calendar&"+Math.round(Math.random()*100000));addBtn("events","Прошедшие","/events.php?act=list&past=1&"+Math.round(Math.random()*100000));}if(menu[i].href==MigScript.HOST+"/photos.php"){addCont(menu[i],"photos");addBtn("photos","Новый&nbsp;альбом","/photos.php?act=new");addBtn("photos","Обзор","/photos.php?act=albums");addBtn("photos","Комментарии","/photos.php?act=comments");addBtn("photos","Фото&nbsp;с&nbsp;вами","/photos.php?act=user&id="+MigScript.myUid);}if(menu[i].href==MigScript.HOST+"/video.php"){addCont(menu[i],"video");addBtn("video","Загрузить","/video.php?act=new");addBtn("video","Комментарии","/video.php?act=comments&id="+MigScript.myUid);}if(menu[i].href==MigScript.HOST+"/fave.php"){addCont(menu[i],"fave");addBtn("fave",'Кто&nbsp;"заложил"').addEventListener("click",function(e){MigScript.UI.WhoFaved.open(e);},true);}if(menu[i].href.match(new RegExp(MigScript.HOST+"/"+MigScript.myUid))){addCont(menu[i],"person");addBtn("person","Стена","/wall.php").style.padding="3px 3px 3px 6px";addBtn("person","Редактировать","/editProfile.php?act=general").style.padding="3px 3px 3px 6px";}if(menu[i].href==MigScript.HOST+"/apps.php?act=notifications"){addCont(menu[i],"apps");addBtn("apps","Удалить оповещения").addEventListener("click",function(){(new MigScript.Ajax.AjaxClass()).get("/apps.php?act=a_delete_all_not");},true);}if(menu[i].id=="sett_link"){addCont(menu[i],"sett");addBtn("sett","Обновить").addEventListener("click",function(){MigScript.Update.forceUpd();},true);addBtn("sett","Показать&nbsp;приветствие").addEventListener("click",function(){MigScript.Util.serialize("hello",false);MigScript.UI.showHelloMsg();},true);addBtn("sett","Группа&nbsp;Mig[VK]Script","/club12388587");addBtn("sett","F.A.Q по скрипту","/pages.php?o=-12388587&p=F.A.Q");addBtn("sett","Сменить id").addEventListener("click",function(e){MigScript.Util.promptId();},true);}}}},addBtn:function(f,d,c){try{var b=MigScript.$c("a");b.style.setProperty("color","#666","important");b.style.cursor="pointer";b.innerHTML="&nbsp;&nbsp;&nbsp;"+d;if(c){b.href=MigScript.HOST+c;}MigScript.$(f+"_ext").appendChild(b);return b;}catch(g){console.log(g);}},addUnfix:function(){var a=MigScript.$c("a");a.innerHTML="^Отцепить^";a.id="menuUnfix";a.style.fontSize="6pt";a.style.cursor="pointer";a.addEventListener("click",function(){MigScript.UI.MainMenu.wrapMenu();MigScript.UI.MainMenu.delUnfix();MigScript.UI.MainMenu.isOpen=true;MigScript.Util.serialize("mainMenu_open",MigScript.UI.MainMenu.isOpen);},false);MigScript.$("nav").insertBefore(a,MigScript.$("myprofile"));},delUnfix:function(){var a=MigScript.$("menuUnfix");if(a){a.parentNode.removeChild(a);}},wrapMenu:function(){var a,b;a=MigScript.Util.deserialize("mainMenu_x",30);b=MigScript.Util.deserialize("mainMenu_y",30);MigScript.UI.MainMenu.menuFloater=new MigScript.CustomObjects.FloaterClass(a,b,"mainMenu","Меню",{minWidth:125,minHeight:45,width:MigScript.Util.deserialize("mainMenu_W",0),height:MigScript.Util.deserialize("mainMenu_H",MigScript.$("sideBar").offsetHeight)});MigScript.UI.MainMenu.menuFloater.body.style.setProperty("overflow-y","hidden","important");MigScript.UI.MainMenu.menuFloater.cont.removeChild(MigScript.UI.MainMenu.menuFloater.txt);MigScript.UI.MainMenu.menuFloater.body.appendChild(MigScript.$("sideBar"));if(MigScript.Settings.local_settings[22]){GM_addStyle("#Information .people_table{width:100%;}#my_audios .audioRow{width:500px;}#videocomment{width:520px;}#videoinfo{width:720px;} #photocomment{width:520px;}.comment .body .justComment, .comment .bigbody .justComment{width:450px;}.comment .body, .comment .bigbody {width:520px;}#photoinfo{width:720px;}.audioRow {width:520px;}#startagroup{width:300px;}.groupslist .info{width:500px;} .groupslist .grouprow{width:723px;}.commentHead{float:none;}.note .note_body{width: 490px;}.inbox {width:755px!important;}.mainPanel{width:575px;} .results{width:725px;} #pageBody{width:760px;}#fave #leftColumn{width:515px;}#fave #rightColumn{width:210px;} #rightColumn{width:525px;} .dataWrap{width:400px;}  #group.profile .right{width:200px; margin-left:24px;} #group.profile .left{width:500px;}");}MigScript.UI.MainMenu.menuFloater.onClose=function(){try{MigScript.DomUtil.insertAfter("sideBar","pageHeader");}catch(c){MigScript.DomUtil.insertAfter("sideBar","pageHeader1");}MigScript.UI.MainMenu.addUnfix();if(MigScript.Settings.local_settings[22]){GM_addStyle("#my_audios .audioRow{width:450px;} #videocomment{width:400px;}#videoinfo{width:606px;}#photocomment{width:400px;}.comment .body .justComment, .comment .bigbody .justComment{width:345px;}.comment .body, .comment .bigbody {width:400px;}#photoinfo{width:606px;}.audioRow {width:450px;}#startagroup{width:200px;}.groupslist .info{width:364px;} .groupslist .grouprow{width:594px;}.commentHead{float:left;}.note .note_body{width: 370px;}.inbox {width:auto!important;}.mainPanel{width:451px;} .results{width:606px;}#pageBody{width:632px;}#fave #leftColumn{width:398px;}  #rightColumn{width:396px;} .dataWrap{width:260px;}  #group.profile .right{width:200px; margin-left:0px;} #group.profile .left{width:396px;}");}MigScript.UI.MainMenu.isOpen=false;MigScript.Util.serialize("mainMenu_open",MigScript.UI.MainMenu.isOpen);};MigScript.$("sideBar").style.margin="0";MigScript.$("sideBar").style.setProperty("width","auto","important");MigScript.$("sideBar").style.minWidth="118px";MigScript.UI.MainMenu.menuFloater.body.style.overflow="hidden";},init:function(){MigScript.UI.MainMenu.isOpen=MigScript.Util.deserialize("mainMenu_open","false");if(MigScript.Settings.local_settings[21]){if(MigScript.UI.MainMenu.isOpen){MigScript.UI.MainMenu.wrapMenu();}else{MigScript.UI.MainMenu.addUnfix();}}}};MigScript.UI.Menu={addMenu:function(a,b){a.addEventListener("mouseover",function(c){c.stopPropagation();MigScript.UI.Menu.showMenu(b,a,c);},true);a.addEventListener("mouseout",function(c){c.stopPropagation();MigScript.UI.Menu.hideMenu("menu_"+b);},true);},wrapMessages:function(j,e){var o=document.documentElement.clientWidth/2-120;var m=200;var p=new MigScript.CustomObjects.FloaterClass(o,m,"messager"+j,"Сообщение",{minHeight:165});p.onClose=function(){document.body.removeChild(MigScript.$("messager"+j));};var d=MigScript.$c("div");p.body.appendChild(d);var b=MigScript.$c("div");p.body.appendChild(b);var a=MigScript.$c("div");p.body.appendChild(a);var h=MigScript.$c("a");if(j.toString().match(/\d+/)){h.href="/id"+j;}else{h.href="/"+j;}h.innerHTML=e;var f=MigScript.$c("b");f.innerHTML="<center>Отправка по Ctrl+Enter</center>";f.style.fontSize="7pt";p.txt.style.setProperty("height","auto","important");p.txt.appendChild(h);p.txt.appendChild(f);var n=MigScript.$c("input");n.typr="text";n.id="sbj_inp";n.style.width="90%";n.style.height="12px";n.style.fontSize="8pt";n.style.marginTop="5px";n.value="Тема";var l=MigScript.$c("center");b.appendChild(l);l.appendChild(n);var g=MigScript.$c("textarea");g.id="msg_inp";g.style.width="90%";g.style.height="80px";g.style.fontSize="8pt";g.style.marginTop="5px";g.addEventListener("keypress",function(s){if((s.ctrlKey)&&((s.keyCode==10)||(s.keyCode==13))){var c=this.parentNode.parentNode.parentNode;var t=MigScript.DomUtil.getDescendantById(c,"msg_inp").value;var r=MigScript.DomUtil.getDescendantById(c,"sbj_inp").value;c.innerHTML='<img src="'+MigScript.UI.Images.loaderImg()+'"/>';MigScript.Messaging.sendMsg(j,r,t,c);c.addEventListener("click",function(u){u.preventDefault();u.stopPropagation();document.body.removeChild(MigScript.$("messager"+j));},true);c.addEventListener("keypress",function(){document.body.removeChild(MigScript.$("messager"+j));},true);}},true);l=MigScript.$c("center");a.appendChild(l);l.appendChild(g);},wrapIM:function(c){var a=document.documentElement.clientWidth/2-120;var e=200;var d=new MigScript.CustomObjects.FloaterClass(a,e,"IM","Мгновенные сообщения",{minHeight:300,minWidth:300,height:300,width:400});var b=MigScript.$c("iframe");b.src="/im.php?act=a_box&popup=1&sel="+c;b.style.border="none";b.style.width="100%";b.style.height="99%";MigScript.Util.serialize("IM",c);d.body.appendChild(b);d.onClose=function(){document.body.removeChild(MigScript.$("IM"));MigScript.Util.serialize("IM","");};},showIM:function(a){MigScript.UI.Menu.wrapIM(a);MigScript.Util.serialize("IM",a);},getMenu:function(c,a){var b=MigScript.$("menu_"+c);if(b==null){b=MigScript.UI.Menu.createMenu(c,a);}return b;},createMenu:function(h,a){var g=MigScript.$c("div");g.id="menu_"+h;g.className="menu_cont";var f=MigScript.Friends.isFriend(h);var e=MigScript.Friends.isFavFriend(h);for(var c=0;c<MigScript.Menu.menuAttrs.length;c++){if(MigScript.Menu.menuAttrs[c].forFriend==null||(MigScript.Menu.menuAttrs[c].forFriend&&f)||(!MigScript.Menu.menuAttrs[c].forFriend&&!f)){if(((MigScript.Menu.menuAttrs[c].hasOwnProperty("forFav"))&&((MigScript.Menu.menuAttrs[c].forFav&&e)||(!MigScript.Menu.menuAttrs[c].forFav&&!e)))||(!MigScript.Menu.menuAttrs[c].hasOwnProperty("forFav"))){var b=MigScript.$c("img");b.alt=MigScript.Menu.menuAttrs[c].label;b.title=MigScript.Menu.menuAttrs[c].label;b.src=MigScript.Menu.menuAttrs[c].img;b.className="menu_button";b.setAttribute("_id",c);b.setAttribute("owner",a);if(MigScript.Menu.menuAttrs[c].action!=null){MigScript.Menu.imgActions[c]=MigScript.Menu.menuAttrs[c].action;b.addEventListener("click",function(j){MigScript.Menu.imgActions[this.getAttribute("_id")](h,j);},true);g.appendChild(b);b.style.cursor="pointer";}if(MigScript.Menu.menuAttrs[c].url!=null){var d=MigScript.$c("a");d.href=MigScript.Menu.menuAttrs[c].url+h;d.appendChild(b);g.appendChild(d);}}}}g.addEventListener("mouseout",function(j){j.stopPropagation();MigScript.UI.Menu.hideMenu(this.id);},true);g.addEventListener("mouseover",function(j){j.stopPropagation();MigScript.UI.Menu.showMenu(this.id.match(/menu_.+/).toString().substring(5));},true);return g;},showMenu:function(menuId,elem,event){var owner=event?event.target.innerHTML:null;var menu=MigScript.UI.Menu.getMenu(menuId,owner);clearTimeout(eval(menu.getAttribute("timer")));menu.style.display="block";menu.style.opacity="1";if(event!=null){menu.style.left=(event.clientX+15)+"px";menu.style.top=(event.pageY-10)+"px";}if(elem!=null){document.body.appendChild(menu);}},hideMenu:function(b){var a=MigScript.$(b);MigScript.UI.animateHide(a);},init:function(){var a=MigScript.Util.trimList(MigScript.Util.deserialize("IM",""));if(a&&(a!="")){MigScript.UI.Menu.wrapIM(a);}}};MigScript.UI.Group={markFriends:function(){if(MigScript.Friends.friendList==null){MigScript.Friends.getFriends(MigScript.UI.Group.markFriends);}else{for(var a=0;a<MigScript.Friends.friendList.length;a++){var b=MigScript.$("memRow"+MigScript.Friends.friendList[a][0]);if(b!=null){b.style.background="#ffff00";}}}},createMngButton:function(a,f,d){var b=MigScript.$c("div");b.className="s_row";var e=MigScript.$c("div");e.className="s_pad";e.id=f;var c=document.createTextNode(a);e.appendChild(c);e.addEventListener("click",d,true);e.addEventListener("mouseover",function(){this.className="s_pad_over";},true);e.addEventListener("mouseout",function(){this.className="s_pad";},true);b.appendChild(e);return b;},addReplyButtons:function(){var b=MigScript.$("rows_content");var a=b.getElementsByTagName("div");MigScript.UI.Group.addReplyButton(a);},addReplyButton:function(g){for(var f=0;f<g.length;f++){var b=g[f];if(b.className=="postIndex"){var l=b.innerHTML;}if(b.className=="postBody"){for(var e=0;e<b.childNodes.length;e++){var c=b.childNodes[e];var h;var d;if(c.className=="postHeader"){h=c;d=c.getElementsByTagName("a")[0].innerHTML;}if(e==b.childNodes.length-1){var m=MigScript.$c("a");h.appendChild(m);m.innerHTML="<b>[Ответить]</b>";m.style.cursor="pointer";m.style.setProperty("float","right","");m.style.marginTop="-20px";m.style.marginLeft="100px";m.setAttribute("str","@ "+l+"  "+d+":\n\n");m.addEventListener("click",function(){MigScript.$("post").value+=this.getAttribute("str");MigScript.$("post").focus();},true);}}}}}};MigScript.UI.ExFriends={isShown:null,isOpen:null,floater:null,createMenu:function(){var j=MigScript.$("fr_cont");var g;var e;var d;var f;if(j==null){j=MigScript.$c("div");j.id="fr_cont";j.className="fr_cont";MigScript.$("sideBar").appendChild(j);f=MigScript.$c("div");f.id="fr_head";f.className="fr_head";j.appendChild(f);g=MigScript.$c("div");g.id="fr_txt";g.className="fr_txt";j.appendChild(g);if(MigScript.$("fr_roll_btn")==null){b=MigScript.$c("a");b.id="fr_roll_btn";b.innerHTML="<b>^</b>";b.title="Отцепить";b.style.cursor="pointer";b.style.fontSize="8pt";b.style.setProperty("float","right","important");b.addEventListener("click",function(a){MigScript.UI.ExFriends.isShown=true;MigScript.Util.serialize("exFloat",true);MigScript.$("fr_cont").style.setProperty("display","none","important");MigScript.UI.ExFriends.createList(a);},true);f.appendChild(b);}e=MigScript.$c("div");e.id="fr_list";e.className="fr_list";if(!MigScript.UI.ExFriends.isOpen){e.style.display="none";}else{e.style.display="block";}j.appendChild(e);d=MigScript.$c("div");d.id="nd_chk";j.appendChild(d);var b=MigScript.$c("a");b.id="nd_btn";if(MigScript.$("fr_list").style.display=="none"){b.innerHTML="[+]";b.title="Развернуть";}else{b.innerHTML="[-]";b.title="Свернуть";}b.style.cursor="pointer";b.style.fontSize="8pt";b.style.setProperty("float","left","important");b.addEventListener("click",function(){MigScript.UI.ExFriends.toggleList();},true);f.appendChild(b);var b=MigScript.$c("a");b.style.cursor="pointer";b.style.color="#0000ff";b.id="fr_check";var h=MigScript.$c("center");b.innerHTML="[Проверить]";h.appendChild(b);b.addEventListener("click",function(){MigScript.UI.ExFriends.showProgress();MigScript.ExFriends.forceCheckFriends(function(){MigScript.UI.ExFriends.alertDel(MigScript.ExFriends.exFriends.length);MigScript.UI.ExFriends.notify();});},true);d.appendChild(h);}else{j.style.setProperty("display","block","important");}if(MigScript.Util.notNullCount(MigScript.ExFriends.exFriends)==0){g=MigScript.$("fr_txt");e=MigScript.$("fr_list");MigScript.DomUtil.removeChildNodes(g);g.innerHTML="В списке друзей всё спокойно";MigScript.DomUtil.removeChildNodes(e);e.style.display="none";}else{MigScript.UI.ExFriends.notify();MigScript.UI.ExFriends.alertDel(MigScript.Util.notNullCount(MigScript.ExFriends.exFriends));}},notify:function(){var h=MigScript.$("fr_list");MigScript.DomUtil.removeChildNodes(h);for(var c=1;c<=MigScript.ExFriends.exFriends.length;c++){var g=MigScript.$c("div");g.id="nd"+c;g.className="fr_pad_s";g.innerHTML=c+". &nbsp;";var e=MigScript.$c("div");e.className="c_link";var d=MigScript.$c("a");d.href=MigScript.HOST+"/id"+MigScript.ExFriends.exFriends[c-1][0];d.innerHTML=MigScript.ExFriends.exFriends[c-1][1]+"</a>&nbsp;";d.style.color="#0000ff";d.target="_blank";e.appendChild(d);g.appendChild(e);g.addEventListener("mouseover",function(){MigScript.DomUtil.highlight(this);},true);g.addEventListener("mouseout",function(){MigScript.DomUtil.unlight(this);},true);var f=MigScript.$c("div");f.className="cross";var b=MigScript.$c("a");b.innerHTML="[x]";b.style.color="#ff0000";b.style.cursor="pointer";b.id="cross"+c;b.addEventListener("click",function(){MigScript.UI.ExFriends.deleteNotification(this.id);},true);g.insertBefore(f,e);f.appendChild(b);h.appendChild(g);}},alertDel:function(b){var c=MigScript.$("fr_txt");var a=MigScript.$("fr_head");MigScript.log("exFr not null: "+b);if(b==0){MigScript.UI.ExFriends.createMenu();}else{c.innerHTML="<font color='#2B587A'><center><b><u>Бывшие друзья</u></b></font><br>У вас <br><b>"+b+"</b> человек в списке бывших друзей!</center>";}},deleteNotification:function(c){var a=c.substring(5);var b=MigScript.$("fr_list");b.removeChild(MigScript.$("nd"+a));MigScript.ExFriends.exFriends[a-1]=null;MigScript.Util.serialize("exFriends",MigScript.ExFriends.exFriends);MigScript.UI.ExFriends.alertDel(MigScript.Util.notNullCount(MigScript.ExFriends.exFriends));},toggleList:function(){MigScript.UI.ExFriends.notify();MigScript.DomUtil.toggle(MigScript.$("fr_list"));MigScript.UI.togglePlusBtn("nd_btn");MigScript.UI.ExFriends.isOpen=!MigScript.UI.ExFriends.isOpen;MigScript.Util.serialize("frList_open",MigScript.UI.ExFriends.isOpen);},showProgress:function(){MigScript.$("fr_txt").innerHTML='<center><img src="'+MigScript.UI.Images.loaderImg()+'"/></center>';},createList:function(){MigScript.UI.ExFriends.floater=new MigScript.CustomObjects.FloatListClass("exFloat","Бывшие друзья",{padCondition:function(a){return MigScript.Friends.isFavFriend(a);},avatar:false,padDelete:true,list:MigScript.ExFriends.exFriends,update:function(){MigScript.ExFriends.forceCheckFriends(function(){MigScript.UI.ExFriends.floater.txt.childNodes[0].innerHTML="[Обновить]";MigScript.UI.ExFriends.floater.populateList(MigScript.ExFriends.exFriends);});}});MigScript.UI.ExFriends.floater.onPadDeleted=function(a){MigScript.ExFriends.exFriends=MigScript.Util.trimList(MigScript.ExFriends.exFriends);MigScript.Util.serialize("exFriends",MigScript.ExFriends.exFriends);};MigScript.UI.ExFriends.floater.onClose=function(){MigScript.UI.ExFriends.isShown=false;MigScript.UI.ExFriends.createMenu();};MigScript.UI.ExFriends.isShown=true;MigScript.UI.ExFriends.floater.populateList();},init:function(){if(MigScript.Settings.local_settings[2]){MigScript.UI.ExFriends.isShown=MigScript.Util.deserialize("exFloat",false);MigScript.UI.ExFriends.isOpen=MigScript.Util.deserialize("frList_open",false);if(!MigScript.UI.ExFriends.isShown){MigScript.UI.ExFriends.createMenu();}else{MigScript.UI.ExFriends.createList();}}}};MigScript.UI.OnlineFriends={isShown:null,isOpen:null,floater:null,createStaticList:function(){var e=MigScript.$("ol_cont");if(e==null){e=MigScript.$c("div");e.id="ol_cont";e.className="fr_cont";e.style.marginTop="10px";MigScript.$("sideBar").appendChild(e);head=MigScript.$c("div");head.id="fr_head";head.className="fr_head";e.appendChild(head);var b;if(MigScript.$("ol_roll_btn")==null){b=MigScript.$c("a");b.id="ol_roll_btn";b.innerHTML="<b>^</b>";b.title="Отцепить";b.style.cursor="pointer";b.style.fontSize="8pt";b.style.setProperty("float","right","important");b.addEventListener("click",function(a){MigScript.UI.OnlineFriends.isShown=true;MigScript.Util.serialize("olFloat",true);MigScript.$("ol_cont").style.setProperty("display","none","important");MigScript.UI.OnlineFriends.createList(a);},true);head.appendChild(b);}MigScript.UI.OnlineFriends.isOpen=MigScript.Util.deserialize("olStatic_open",false);if(MigScript.$("ol_btn")==null&&MigScript.OnlineFriends.onlineFriends.length>0){b=MigScript.$c("a");b.id="ol_btn";if(!MigScript.UI.OnlineFriends.isOpen){b.innerHTML="[+]";b.title="Развернуть";}else{b.innerHTML="[-]";b.title="Свернуть";}b.style.cursor="pointer";b.style.fontSize="8pt";b.addEventListener("click",function(){MigScript.UI.OnlineFriends.toggleStaticList();},true);head.appendChild(b);}var d=MigScript.$c("div");d.id="ol_txt";d.className="fr_txt";e.appendChild(d);var c=MigScript.$c("div");c.id="ol_list";c.className="fr_list";if(!MigScript.UI.OnlineFriends.isOpen){c.style.display="none";}else{c.style.display="block";}e.appendChild(c);}else{e.style.setProperty("display","block","important");}},toggleStaticList:function(){MigScript.DomUtil.toggle(MigScript.$("ol_list"));MigScript.UI.togglePlusBtn("ol_btn");MigScript.UI.OnlineFriends.isOpen=!MigScript.UI.OnlineFriends.isOpen;MigScript.Util.serialize("olStatic_open",MigScript.UI.OnlineFriends.isOpen);},createFloatList:function(a){MigScript.UI.OnlineFriends.floater=new MigScript.CustomObjects.FloatListClass("olFloat","Онлайн",{padCondition:function(b){return MigScript.Friends.isFavFriend(b);}});MigScript.UI.OnlineFriends.floater.onClose=function(){MigScript.UI.OnlineFriends.isShown=false;MigScript.UI.OnlineFriends.createList();};MigScript.UI.OnlineFriends.isShown=true;},createList:function(a){if(MigScript.Settings.local_settings[12]){if(MigScript.$("friendsOnline")&&window.location.href.match(new RegExp(MigScript.Util.getMyUid(0)))){MigScript.$("friendsOnline").style.display="none";}if(!MigScript.UI.OnlineFriends.isShown){MigScript.UI.OnlineFriends.createStaticList();}else{MigScript.UI.OnlineFriends.createFloatList(a);}MigScript.UI.OnlineFriends.notifyNumber();MigScript.UI.OnlineFriends.addPeople();}},addPeople:function(){if(!MigScript.UI.OnlineFriends.isShown){MigScript.UI.OnlineFriends.addStaticPeople();}else{MigScript.UI.OnlineFriends.addFloatPeople();}},addStaticPeople:function(){var e=MigScript.$("ol_list");MigScript.DomUtil.removeChildNodes(e);for(var a=1;a<=MigScript.OnlineFriends.onlineFriends.length;a++){var d=MigScript.$c("div");d.id="nd"+a;if(!MigScript.Friends.isFavFriend(MigScript.OnlineFriends.onlineFriends[a-1][0])){d.className="fr_pad_s";}else{d.className="fav_fr_pad_s";}var c=MigScript.$c("div");c.className="c_link";var b=MigScript.$c("a");b.href=MigScript.HOST+"/id"+MigScript.OnlineFriends.onlineFriends[a-1][0];b.innerHTML=MigScript.OnlineFriends.onlineFriends[a-1][1];b.target="_top";b.addEventListener("mouseover",function(g){var f=this.href.substring(this.href.indexOf("/id")+3);MigScript.UI.showAvatar(f,g.clientX,100,g.pageY,MigScript.$("ol_list").width);},true);b.addEventListener("mouseout",function(g){var f=this.href.substring(this.href.indexOf("/id")+3);MigScript.UI.hideAvatar(f);},true);c.appendChild(b);d.appendChild(c);d.addEventListener("mouseover",function(){MigScript.DomUtil.highlight(this);},true);d.addEventListener("mouseout",function(){MigScript.DomUtil.unlight(this);},true);e.appendChild(d);}},notifyNumber:function(){var a;if(!MigScript.UI.OnlineFriends.isShown){a=MigScript.$("ol_txt");}else{a=MigScript.UI.OnlineFriends.floater.txt;}a.innerHTML="Онлайн <b>"+MigScript.OnlineFriends.onlineFriends.length+"</b> человек";},addFloatPeople:function(){MigScript.UI.OnlineFriends.floater.populateList(MigScript.OnlineFriends.onlineFriends);},init:function(){MigScript.UI.OnlineFriends.isShown=MigScript.Util.deserialize("olFloat",false);MigScript.UI.OnlineFriends.createList();}};MigScript.UI.WhoFaved={container:null,openContainer:function(){MigScript.UI.WhoFaved.isShown=true;MigScript.UI.WhoFaved.container=new MigScript.CustomObjects.FloatListClass("favedList","Я в закладках",{minWidth:105,minHeight:64});MigScript.UI.WhoFaved.container.onClose=function(){MigScript.Util.serialize("wf_isShown",false);MigScript.UI.WhoFaved.isShown=false;};var b=MigScript.$c("a");b.style.cursor="pointer";b.addEventListener("click",function(){MigScript.WhoFaved.getList(function(){MigScript.UI.WhoFaved.addPeople();MigScript.UI.WhoFaved.container.txt.childNodes[0].innerHTML="[Проверить]";});this.innerHTML='<img src="'+MigScript.UI.Images.loaderImg()+'"/>';},true);b.innerHTML="[Проверить]";MigScript.UI.WhoFaved.container.txt.appendChild(b);},addPeople:function(){if(MigScript.UI.WhoFaved.container.isShown){MigScript.UI.WhoFaved.container.populateList(MigScript.WhoFaved.favedList);}},open:function(){if(MigScript.UI.WhoFaved.container){MigScript.UI.WhoFaved.container.wakeUp();}else{MigScript.UI.WhoFaved.openContainer();MigScript.UI.WhoFaved.addPeople();}},init:function(){MigScript.UI.WhoFaved.isShown=MigScript.Util.deserialize("favedList",false);if(MigScript.UI.WhoFaved.isShown){MigScript.UI.WhoFaved.openContainer();MigScript.UI.WhoFaved.addPeople();}}};MigScript.Styler={skinList:[],getSkinsList:function(b){var a=MigScript.CSS_HOST+"/getlist.php?sortby=name";GM_xmlhttpRequest({method:"GET",url:a,onreadystatechange:function(d){if(d.readyState==4){MigScript.Styler.parseSkinList(d.responseText);MigScript.$("ddplace").appendChild(MigScript.Styler.getSelect());MigScript.$("skinimg").src=MigScript.UI.Images.noDataImg();if(MigScript.Settings.local_settings[11]==null||MigScript.Settings.local_settings[11]==""||MigScript.Settings.local_settings[11]=="Стандартный"){MigScript.Styler.showSkinInfo(MigScript.Styler.skinList[0]);}else{for(var c=0;c<MigScript.Styler.skinList.length;c++){if(MigScript.Styler.skinList[c].name==MigScript.Settings.local_settings[11]){MigScript.Styler.showSkinInfo(MigScript.Styler.skinList[c]);}}}}}});},parseSkinList:function(json){if(json.charAt(0)!="["){json="["+json.substr(1);}if(json.charAt(json.length-1)!="]"){json=json+json.substring(0,json.length-1)+"]";}MigScript.Styler.skinList=eval("("+json+")");},getSelect:function(){var a=MigScript.$("config_css_dropdown");if(!a){a=MigScript.$c("select");a.multiple="";a.size="15";a.style.width="135px";a.id="config_css_dropdown";a.addEventListener("change",function(g){var d=g.target.value;var f=MigScript.Styler.skinList[d];MigScript.Styler.showSkinInfo(f);},false);for(var c=0;c<MigScript.Styler.skinList.length;c++){var b=MigScript.$c("option");b.value=c;b.innerHTML=MigScript.Styler.skinList[c].name;a.appendChild(b);}}return a;},createSkinSelector:function(){MigScript.UI.Dialog.getDialog("Выберите скин");var b=MigScript.$c("table");var g=MigScript.$c("tr");b.appendChild(g);MigScript.$("dlg_body").appendChild(b);var f=MigScript.$c("td");f.style.width="250px";f.style.height="300px";f.id="skinimg_c";g.appendChild(f);var a=MigScript.$c("img");a.style.width="250px";a.style.maxHeight="300px";a.id="skinimg";a.src=MigScript.UI.Images.loaderImg();f.appendChild(a);var c=MigScript.$c("td");c.style.verticalAlign="top";g.appendChild(c);var h=MigScript.$c("div");h.id="ddplace";c.appendChild(h);var e=MigScript.$c("div");e.style.marginTop="10px";e.id="skininfo";c.appendChild(e);var j=MigScript.$("skin_ok_btn");if(j==null){j=MigScript.$c("div");j.id="skin_ok_btn";MigScript.$("dlg_ok_btn").appendChild(j);}j.className="box_button";j.innerHTML="Установить скин";j.addEventListener("click",function(){var d=MigScript.$("config_css_dropdown").value;var l=MigScript.Styler.skinList[d];MigScript.Styler.installSkin(l.id);MigScript.$("config_css_select").innerHTML=l.name;MigScript.$("config_css_select").setAttribute("value",l.name);MigScript.UI.Dialog.destroyDlg();},true);},showSkinSelector:function(){MigScript.Styler.createSkinSelector();MigScript.Styler.getSkinsList();},showSkinInfo:function(d){var a=null;try{a=d.img;if(a){MigScript.$("skinimg").src=a;}else{var b=MigScript.CSS_HOST+"/getimg.php?id="+d.id+"&body=1";MigScript.$("skinimg").src=MigScript.UI.Images.loaderImg();GM_xmlhttpRequest({method:"GET",url:b,onreadystatechange:function(e){if(e.readyState==4){MigScript.$("skinimg").src=e.responseText;}}});}}catch(c){}finally{MigScript.$("skininfo").innerHTML="Скин <b>"+d.name+"</b> <br>Автор: "+d.author+"<br>Комментарий: "+d.comment;}},installSkin:function(b){var a=MigScript.CSS_HOST+"/getcss.php?id="+b;GM_xmlhttpRequest({method:"GET",url:a,onreadystatechange:function(c){if(c.readyState==4){MigScript.$("config_userstyle").value=c.responseText;}}});},getDefaultStyle:function(){return"#message{"+"background-color: #ffffaa;"+"}"+".comment .header{"+"background-color: #ffeeaa;"+"}"+".mailbox table th{"+"background-color: #ffeeaa;"+"}"+MigScript.Styler.getZeroStyle();},getZeroStyle:function(){return".fr_cont{"+" background:transparent!important;"+" display: block!important;"+"	margin-top: 6px!important;"+" padding: 3px!important;"+" min-width: 112px!important;"+" }"+"	.fr_txt{"+" border-bottom: 1px solid #B1BDD6!important;"+"background-color: rgba(200,200,200,0.4)!important;"+"}"+"	.fr_head{"+" border-bottom: 1px solid #B1BDD6!important;"+"height:15px;"+"background-color: rgba(200,200,200,0.4)!important;"+"}"+" .fr_list{"+"	border-bottom: 1px solid #B1BDD6!important;"+"}"+" .fr_pad{"+" background-color: rgba(220,220,220,0.3)!important;"+" vertical-align: middle!important;"+" display: block!important;"+" text-align: left!important;"+" word-wrap: break-line!inportant;"+" width: 99px!important;"+" float:left!important;"+" min-height:26px!important;"+" padding-left:5px!important;"+" border-right:1px dashed #ADBBCA!important;"+" border-bottom:1px dashed #ADBBCA!important;"+"}"+" .fr_pad_h{"+" background-color: rgba(200,200,200,0.9)!important;"+" vertical-align: middle!important;"+" text-align: left!important;"+" display: block!important;"+" opacity: 0.6!important;"+" word-wrap: break-line!important;"+" width: 99px!important;"+" float:left!important;"+" min-height:26px!important;"+" padding-left:5px!important;"+" border-right:1px dashed #ADBBCA!important;"+" border-bottom:1px dashed #ADBBCA!important;"+"}"+" .fr_pad_s{"+" background-color: rgba(220,220,220,0.3)!important;"+" vertical-align: middle!important;"+" display: block!important;"+" text-align: left!important;"+" word-wrap: break-line!inportant;"+" min-height:26px!important;"+" padding-left:5px!important;"+" border-right:1px dashed #ADBBCA!important;"+" border-bottom:1px dashed #ADBBCA!important;"+"}"+" .fr_pad_s_h{"+" background-color: rgba(200,200,200,0.9)!important;"+" vertical-align: middle!important;"+" text-align: left!important;"+" display: block!important;"+" opacity: 0.6!important;"+" word-wrap: break-line!important;"+" min-height:26px!important;"+" padding-left:5px!important;"+" border-right:1px dashed #ADBBCA!important;"+" border-bottom:1px dashed #ADBBCA!important;"+"}"+" .fav_fr_pad{"+" background-color:  rgba(180,180,180,0.5)!important;"+" vertical-align: middle!important;"+" font-weight: bold!important;"+" display: block!important;"+" text-align: left!important;"+"word-wrap: break-line!important;"+"width:99px!important;"+"float:left!important;"+" min-height:26px!important;"+" padding-left:5px!important;"+" border-right:1px dashed #ffffff!important;"+" border-bottom:1px dashed #ffffff!important;"+"}"+" .fav_fr_pad_s{"+" background-color:  rgba(180,180,180,0.5)!important;"+" vertical-align: middle!important;"+" font-weight: bold!important;"+" display: block!important;"+" text-align: left!important;"+"word-wrap: break-line!important;"+" min-height:26px!important;"+" padding-left:5px!important;"+" border-right:1px dashed #ffffff!important;"+" border-bottom:1px dashed #ffffff!important;"+"}"+".fav_fr_pad_h{"+" background-color: rgba(180,180,180,0.8)!important;"+" vertical-align: middle!important;"+" text-align: left!important;"+" font-weight: bold!important;"+" display: block!important;"+" opacity: 0.6!important;"+" word-wrap: break-line!important;"+" width: 99px!important;"+" float:left!important;"+" min-height:26px!important;"+" padding-left:5px!important;"+" border-right:1px dashed #ffffff!important;"+" border-bottom:1px dashed #ffffff!important;"+"}"+".fav_fr_pad_s_h{"+" background-color: rgba(180,180,180,0.8)!important;"+" vertical-align: middle!important;"+" text-align: left!important;"+" font-weight: bold!important;"+" display: block!important;"+" opacity: 0.6!important;"+" word-wrap: break-line!important;"+" min-height:26px!important;"+" padding-left:5px!important;"+" border-right:1px dashed #ffffff!important;"+" border-bottom:1px dashed #ffffff!important;"+"}"+"#nd_btn{"+" margin-top:0px;"+"}"+"#nd_chk{"+"background-color: rgba(200, 200, 200, 0.4) !important;"+"}"+".css_preview{"+" width: 350px;"+"}"+" .floater_cont{"+" background: transparent!important;"+" position: absolute!important;"+" z-index: 200!important;"+" text-align: left!important;"+" display: block!important;"+"}"+" .floater_head{"+" background-color: rgba(180,180,180,0.5)!important;"+" display: block!important;"+"height: 20px!important;"+"border-bottom: 1px solid #B1BDD6!important;"+"}"+" .floater_body{"+" text-align: left!important;"+" display: block!important;"+" overflow-x: hidden!important;"+" overflow-y: auto!important;"+"}"+" .floater_txt{"+" border-bottom: 1px solid #B1BDD6!important;"+" height : 15px!important;"+" text-align: center!important;"+"background-color: rgba(255,255,255, 0.3)!important;"+"}"+" .floater_pad{"+" background-color: #efe!important;"+" vertical-align: middle!important;"+" display: block!important;"+" text-align: left!important;"+"}"+" .floater_pad_h{"+" background-color: #ddd!important;"+" vertical-align: middle!important;"+" text-align: left!important;"+" display: block!important;"+" opacity: 0.6!important;"+"}"+".alert_cont{"+" position : fixed!important;"+" background: transparent!important;"+" border: 1px solid #B1BDD6!important;"+" z-index: 300!important;"+" width: 150px!important;"+" text-align: left!important;"+" vertical-align: middle!important;"+" display: block!important;"+" opacity: 1;"+"}"+".alert_body{"+" display: block!important;"+" min-height: 20px!important;"+" max-height: 150px!important;"+" vertical-align: middle!important;"+" padding: 3px!important;"+"overflow: auto!important;"+"background-color: rgba(255,255,255,0.5)!important;"+"}"+".alert_head{"+" background-color: rgba(180,180,180,0.6)!important;"+" display: block!important;"+" vertical-align: middle!important;"+"height: 20px!important;"+"border-bottom: 1px solid #B1BDD6!important;"+"}"+".alert_capt{"+"float: left!important;"+"width: 130px!important;"+"}"+".message_alert_cont{"+" position : fixed!important;"+" background: transparent!important;"+" border: 1px solid #daa520!important;"+" z-index: 300!important;"+" width: 150px!important;"+" text-align: left!important;"+" vertical-align: middle!important;"+" display: block!important;"+" opacity: 1;"+"}"+".message_alert_body{"+" display: block!important;"+" min-height: 20px!important;"+" max-height: 150px!important;"+" vertical-align: middle!important;"+" padding: 3px!important;"+"overflow: auto!important;"+"background-color: rgba(255,238,0,0.7)!important;"+"}"+".message_alert_head{"+" background-color: rgba(255,215,0,0.8)!important;"+" display: block!important;"+" vertical-align: middle!important;"+"height: 20px!important;"+"border-bottom: 1px solid #daa520!important;"+"}"+".message_alert_capt{"+"float: left!important;"+"width: 130px!important;"+"}"+".friends_alert_cont{"+" position : fixed!important;"+" background-color: #FFF68F!important;"+" border: 1px solid #8B864E!important;"+" z-index: 300!important;"+" width: 150px!important;"+" text-align: left!important;"+" vertical-align: middle!important;"+" display: block!important;"+" opacity: 1;"+"}"+".friends_alert_body{"+" display: block!important;"+" min-height: 20px!important;"+" max-height: 150px!important;"+" vertical-align: middle!important;"+" padding: 3px!important;"+"overflow: auto!important;"+"}"+".friends_alert_head{"+" background-color: #BDB76B!important;"+" display: block!important;"+" vertical-align: middle!important;"+"height: 20px!important;"+"border-bottom: 1px solid #8B864E!important;"+"}"+".friends_alert_capt{"+"float: left!important;"+"width: 130px!important;"+"}"+".event_alert_cont{"+" position : fixed!important;"+"color: white;"+" background-color: #FF82AB!important;"+" border: 1px solid #8B475D!important;"+" z-index: 300!important;"+" width: 150px!important;"+" text-align: left!important;"+" vertical-align: middle!important;"+" display: block!important;"+" opacity: 1;"+"}"+".event_alert_body{"+" display: block!important;"+" min-height: 20px!important;"+" max-height: 150px!important;"+" vertical-align: middle!important;"+" padding: 3px!important;"+"overflow: auto!important;"+"}"+".event_alert_head{"+" background-color: #CD6889!important;"+" display: block!important;"+" vertical-align: middle!important;"+"height: 20px!important;"+"border-bottom: 1px solid #8B475D!important;"+"}"+".event_alert_capt{"+"float: left!important;"+"width: 130px!important;"+"}"+".media_alert_cont{"+" position : fixed!important;"+" background-color: #B3EE3A!important;"+" border: 1px solid #228B22!important;"+" z-index: 300!important;"+" width: 150px!important;"+" text-align: left!important;"+" vertical-align: middle!important;"+" display: block!important;"+" opacity: 1;"+"}"+".media_alert_body{"+" display: block!important;"+" min-height: 20px!important;"+" max-height: 150px!important;"+" vertical-align: middle!important;"+" padding: 3px!important;"+"overflow: auto!important;"+"}"+".media_alert_head{"+" background-color: #66CD00!important;"+" display: block!important;"+" vertical-align: middle!important;"+"height: 20px!important;"+"border-bottom: 1px solid #228B22!important;"+"}"+".media_alert_capt{"+"float: left!important;"+"width: 130px!important;"+"}"+".alertlink{"+"text-decoration: underline;"+"color: black;"+"font-weight: bold;"+"}"+" .menu_cont{"+" border: 1px solid #B1BDD6!important;"+" margin: 3px 0px 0px 0px!important;"+" padding: 0px 0px 0px 0px!important;"+" background-color: rgba(160,160,160,0.4)!important;"+" position: absolute!important;"+" z-index: 64990!important;"+"}"+" .menu_button{"+" width: 16px!important;"+" height: 16px!important;"+" margin: 0px 0px 0px 4px!important;"+" position: relative!important;"+" padding-right: 5px!important;"+" float: left!important;"+"}"+"#nav li a {"+" background-color:rgba(255,255,255,0.2)!important;"+" border:none!important;"+"}"+"#nav li a:hover {"+"background-color:rgba(220,220,220,0.6)!important;"+" border:none!important;"+"}"+".leftAd, .leftInfo{"+"padding: 0px!important;"+"}"+".resBody{"+"position:absolute!important;"+"}"+".nwHandle{"+" cursor:nw-resize!important;"+"position:absolute!important;"+"}"+".nHandle{"+"cursor:n-resize!important;"+"position:absolute!important;"+"border-bottom: 1px solid!important;"+"border-color: #B1BDD6!important;"+"}"+".neHandle{"+" cursor:ne-resize!important;"+"position:absolute!important;"+"}"+".eHandle{"+" cursor:e-resize!important;"+"position:absolute!important;"+"border-left: 1px solid!important;"+"border-color: #B1BDD6!important;"+"}"+".seHandle{"+" cursor:se-resize!important;"+"position:absolute!important;"+"}"+".sHandle{"+" cursor:s-resize!important;"+"position:absolute!important;"+"border-top: 1px solid!important;"+"border-color: #B1BDD6!important;"+"}"+".swHandle{"+" cursor:sw-resize!important;"+"position:absolute!important;"+"}"+".wHandle{"+" cursor:w-resize!important;"+"position:absolute!important;"+"border-right: 1px solid!important;"+"border-color: #B1BDD6!important;"+"}";},prepareUI:function(){function check(arr){for(var i=0;i<arr.length;i++){if(arr[i].id.match(/\d+/)){arr[i].href="";arr[i].addEventListener("click",function(){var url=MigScript.CSS_HOST+"/getcss.php?id="+this.id;GM_xmlhttpRequest({method:"GET",url:url,onreadystatechange:function(o){if(o.readyState==4){var x=null;try{x=eval("("+o.responseText+")");alert(x.error);}catch(e){}if(x==null||!x.error){MigScript.Settings.local_settings=MigScript.Util.deserialize("local_settings",[]);MigScript.Settings.local_settings[8]=o.responseText;MigScript.Util.serialize("local_settings",MigScript.Settings.local_settings);alert("Скин установлен!");}else{alert("Ошибка установки!");}}}});},true);}}}if(MigScript.Util.checkLocation("catalog")){MigScript.$("content").addEventListener("DOMNodeInserted",function(e){var arr=e.target.getElementsByTagName("a");check(arr);},true);}},init:function(){if(MigScript.Settings.local_settings!=null&&MigScript.Settings.local_settings!="undefined"&&MigScript.Settings.local_settings.length>9){MigScript.ustyle=MigScript.Settings.local_settings[8];}if(MigScript.ustyle==null){MigScript.ustyle=MigScript.Styler.getDefaultStyle();}if(MigScript.Settings.local_settings[7]){GM_addStyle(MigScript.ustyle);}GM_addStyle(" #hider{"+" top: 0px;"+" left: 0px;"+" visibility: visible;"+" z-index : 1900;"+"	background-color: #0000ff;"+" opacity: 0.3;"+" position: absolute;"+" width: 100%;"+" }"+"					"+"#general #buttons{"+"	padding-right: 0px;"+" float: none;"+"}"+" #buttons{"+" border: 0px;"+" position: relative;"+" display: block;"+" width: 500px;"+"}"+"					"+" .vkbtn{"+" display: inline;"+" }"+"					"+" #s_table{"+" border: 0px;"+" padding: 10px;"+" position: relative;"+" width: 600px;"+"}"+"					"+" #s_table tr{"+" border: 0px;"+" width: 20px;"+"}"+" .td0{"+" border: 0px;"+" width: 300px;"+"}"+" .td1{"+" border: 0px;"+" width: 100px;"+" text-align: right;"+"}"+"					"+" .config_input{"+" width: 60px;"+" background-color: rgba(255,255,255,0.4);"+" text-align: center;"+" font-size: 16pt;"+"color: navy;"+" margin-left: 50px;"+"}"+"					"+".c_link{"+" width : 100px;"+" display: inline-block;"+"}"+"					"+" .cross{"+" display: inline;"+" position: relative;"+"float:right;"+" cursor: pointer;"+"}"+"					"+" #sett_cont{"+" color: #ffffff;"+" display: inline;"+" position: absolute;"+" left: 160px;"+" top: 10px;"+"}"+"					"+"}"+"					"+" #sett_img{"+" position: relative;"+" width: 16px;"+" top: 3px;"+" left: 3px;"+" cursor: pointer;"+"}"+"					"+MigScript.Styler.getZeroStyle());}};MigScript.Util={sNum:function(b,a){if(b.n<a.n){return -1;}else{if(b.n>a.n){return 1;}else{return 0;}}},extend:function(){var d=function(l){return Object.prototype.toString.call(l)==="[object Function]";};var g=arguments[0]||{},f=1,e=arguments.length,h=false,j;if(typeof g==="boolean"){h=g;g=arguments[1]||{};f=2;}if(typeof g!=="object"&&!d(g)){g={};}if(e==f){return g;}for(;f<e;f++){if((j=arguments[f])!=null){for(var c in j){var a=g[c],b=j[c];if(g===b){continue;}if(h&&b&&typeof b==="object"&&!b.nodeType){g[c]=extend(h,a||(b.length!=null?[]:{}),b);}else{if(b!==undefined){g[c]=b;}}}}}return g;},getCookie:function(a){var g=document.cookie.split(";");var c="";var e="";var f="";var d=false;for(var b=0;b<g.length;b++){c=g[b].split("=");e=c[0].replace(/^\s+|\s+$/g,"");if(e==a){d=true;if(c.length>1){f=unescape(c[1].replace(/^\s+|\s+$/g,""));}return f;}c=null;e="";}if(!d){return null;}},decodeHash:function(b){b=b.substr(b.length-5)+b.substr(4,b.length-12);var a="";for(____=0;____<b.length;++____){a+=b.charAt(b.length-____-1);}return a;},arraySort:function(d,c){if(d[1]<c[1]){return -1;}if(d[1]>c[1]){return 1;}return 0;},notNullCount:function(a){if(a){var b=0;for(var c=0;c<a.length;c++){if(a[c]!=null){b++;}}return b;}else{return 0;}},checkLocation:function(c){var b=new RegExp(c);var a=b.exec(window.location.href);if(a){return a.toString();}},promptId:function(b){var a;(a=prompt("Сейчас задан идентификатор: "+(b?b:GM_getValue("id","неизвестен"))+".\nВведите ваш цифровой id вконтакте.\n(Пример: ваш id = id4518704. Введите 4518704)\n Если вы не помните свой id, то оставьте поле пустым.\nСкрипт определит ваш именной или цифровой id автоматически, но при этом вы рискуете потерять СТАРЫЕ настройки!"));if(a===""){MigScript.myUid=MigScript.Util.getMyUid(0);GM_setValue("id",MigScript.myUid);window.location.reload();}else{if(!a){MigScript.myUid=b?b:MigScript.myUid;}else{MigScript.myUid=a;GM_setValue("id",MigScript.myUid);window.location.reload();}}},getMyUid:function(i){var nid=null;var ajax=new MigScript.Ajax.AjaxClass();ajax.onDone=function(a,r){r=eval("("+r+")");MigScript.myNumericId=r.user.id;};ajax.get("/feed2.php");try{var base=MigScript.$("myprofile");var anchs=base.getElementsByTagName("a");var str=anchs[i].getAttribute("href");if(str!=null&&str.match(/\//)){if(!str.match(/id\d+/)){str=str.replace(/\?|\#/g,"");nid=str.substring(1);}else{str=str.replace(/\?|\#/g,"");nid=str.substring(str.indexOf("/id")+3);}}if(nid!=null){GM_setValue("id",nid);return nid;}}catch(e){return GM_getValue("id",0);console.log(e);}},getUserId:function(f){var d=function(e){var a=e.substring(e.indexOf("/u")+2);return a.substring(0,a.indexOf("/"));};var j=null;if(f){if(f.match(/id\d+/)){if(f.match(/\?/)){f=f.substring(0,f.indexOf("?"));}if(f.match(/\#./)){return;}if(f.match(/\#/)){f=f.substring(0,f.indexOf("#"));}j=f.substring(f.indexOf("/id")+3);}else{if(MigScript.Util.checkNames(f)){f=f.replace(new RegExp(MigScript.HOST),"");f=f.replace(/\?|\#/g,"");j=f.substring(1);try{var g=MigScript.Settings.userIdCache[j];if(g){return g;}else{var c=document.getElementsByTagName("a");nameToCheck=MigScript.HOST+"/"+j;for(var h=0;h<c.length;h++){if(c[h].href===nameToCheck){if(c[h].children[0]){var c=document.getElementsByTagName("a");nameToCheck=MigScript.HOST+"/"+j;nameToSkip=MigScript.HOST+"/"+MigScript.myUid;for(var h=0;h<c.length;h++){if(c[h].href===nameToCheck&&c[h].href!==nameToSkip){var b=c[h].children[0];if(b){if(b.tagName==="IMG"){g=d(b.src);MigScript.Settings.userIdCache[j]=g;MigScript.Settings.saveCache();j=g;break;}}}}}}}}}catch(l){console.log(l);}}}}return j;},checkNames:function(a){if(a){a=a.replace(new RegExp(MigScript.HOST+"/"),"");return(!a.match(/javascript:/)&&!a.match(/\.php/))&&(!a.match(/write\d+/))&&(!a.match(/club\d+/))&&(!a.match(/object XPC/))&&(!a.match(/event\d+/))&&(!a.match(/app\d+/))&&(!a.match(/album.\d+/))&&(!a.match(/video.\d+/))&&(!a.match(/topic.\d+/))&&(!a.match(/audio.\d+/))&&(!a.match(/photo.\d+/))&&(!a.match(/note\d+/))&&(!a.match(/board\d+/))&&(!a.match(/http/));}else{return null;}},trimList:function(a){if(a){var c=[];for(var b=0;b<a.length;b++){if(a[b]!=null){c.push(a[b]);}}return c;}else{return null;}},checkPeriod:function(e,d){var c=MigScript.Util.deserialize(e,0);var a=new Date().getTime();var b=(a-c);if((b>=d)||(b<=-d)){MigScript.Util.serialize(e,a);return true;}else{return false;}},serialize:function(a,b){var c=MigScript.myUid+"_"+a;GM_setValue(c,uneval(b));},deserialize:function(container,defaultValue){var value;if(defaultValue!=null){value=GM_getValue(MigScript.myUid+"_"+container,defaultValue);MigScript.log(container+" value is "+value);if(value==""||value==null||value=="null"){value=defaultValue;MigScript.log(container+" value set to default "+defaultValue);}}else{value=GM_getValue(MigScript.myUid+"_"+container,null);MigScript.log(container+" value is "+value);}return eval(value);},foreignRequest:function(a,b){MigScript.log("Request sent to "+a);GM_xmlhttpRequest({method:"GET",url:a,onreadystatechange:function(c){if(c.readyState==4){if(b){MigScript.log("Response from "+a+" received");b(c.responseText);}}}});}};MigScript.DomUtil={getDescendantById:function(b,g){if(typeof(b)==="string"){b=document.getElementById(b);}if(b==null){return;}var f=b.childNodes;for(var a=0;a<f.length;a++){if(f[a].id==g){return f[a];}else{if(f[a].childNodes.length>0){var e=MigScript.DomUtil.getDescendantById(f[a],g);}if(e){return e;}}}},absLeft:function(a){if(typeof(a)==="string"){a=document.getElementById(a);}if(a==null){return;}var b=a.offsetLeft;var c=a.offsetParent;while(c!=null){b+=c.offsetLeft;c=c.offsetParent;}return b;},absTop:function(a){if(typeof(a)==="string"){a=document.getElementById(a);}if(a==null){return;}var b=a.offsetTop;var c=a.offsetParent;while(c!=null){b+=c.offsetTop;c=c.offsetParent;}return b;},geByClass:function(f,b,l){var h=[];if(b==null){b=document;}if(l==null){l="*";}if(b.getElementsByClassName){h=b.getElementsByClassName(f);if(l!="*"){for(e=0;e<h.length;e++){if(h.nodeName==l){h.splice(e,1);}}}return h;}var d=b.getElementsByTagName(l);var a=d.length;var g=new RegExp("(^|\\s)"+f+"(\\s|$)");for(var e=0,c=0;e<a;e++){if(g.test(d[e].className)){h[c]=d[e];c++;}}return h;},toggle:function(a){if(a.style.display==="none"){MigScript.DomUtil.show(a);}else{MigScript.DomUtil.hide(a);}},removeChildNodes:function(b){var c=b.childNodes.length;for(var a=0;a<c;a++){b.removeChild(b.childNodes[0]);}},insertAfter:function(a,b){var d=MigScript.$(b);var c=MigScript.$(a);d.parentNode.insertBefore(c,d.nextSibling);},highlight:function(a){a.className+="_h";},unlight:function(a){a.className=a.className.substring(0,a.className.indexOf("_h"));},addHighlighting:function(a){a.addEventListener("mouseover",function(){MigScript.DomUtil.highlight(this);},true);a.addEventListener("mouseout",function(){MigScript.DomUtil.unlight(this);},true);},hide:function(a){if(typeof(a)==="string"){a=document.getElementById(a);}if(a==null){return;}if(MigScript.$(a)!=null){MigScript.$(a).style.setProperty("display","none","important");}},show:function(a){if(typeof(a)==="string"){a=document.getElementById(a);}if(a==null){return;}if(MigScript.$(a)!=null){MigScript.$(a).style.setProperty("display","block","important");}},appendDiv:function(a,d){var c=MigScript.$(a);var b=MigScript.$c("div");b.id=d;c.appendChild(b);return b;}};MigScript.Friends={getFriends:function(onDone,onFail){MigScript.Ajax.ajax=new MigScript.Ajax.AjaxClass(function(a,r){r=eval("("+r+")");MigScript.Friends.friendList=r.friends;if(onDone!=null){onDone();}},function(){if(onFail!=null){onFail();}});MigScript.Ajax.ajax.get("/friends.php?id="+MigScript.myUid);},getFavFriends:function(a){MigScript.Ajax.ajax=new MigScript.Ajax.AjaxClass(function(c,g){var e=g.match((/href=\"\/id\d+/g));for(var b=0;b<e.length;b++){e[b]=e[b].toString();e[b]=e[b].substring('href="/id'.length);}for(var f=0;f<e.length;f++){for(var d=0;d<e.length;d++){if(((e[f]==e[d])||(e[f]==MigScript.myUid))&&(f!=d)){e[f]=null;}}}MigScript.Friends.favFriends=MigScript.Util.trimList(e);MigScript.Util.serialize("favFriendsList",MigScript.Friends.favFriends);if(a!=null){a();}},function(){if(onFail!=null){onFail();}});MigScript.Ajax.ajax.get("/fave.php");},friendList:[],favFriends:[],isFriend:function(b){for(var a=0;a<MigScript.Friends.friendList.length;a++){if(b==MigScript.Friends.friendList[a][0]){return true;}}return false;},isFavFriend:function(b){if(MigScript.Friends.favFriends){for(var a=0;a<MigScript.Friends.favFriends.length;a++){if(MigScript.Friends.favFriends[a]==b){return true;}}}return false;},init:function(){MigScript.Friends.friendList=MigScript.Util.deserialize("lastList",[]);MigScript.Friends.favFriends=MigScript.Util.deserialize("favFriendsList",[]);if(MigScript.Friends.friendList.length==0){MigScript.Friends.friendList=MigScript.Friends.getFriends();}if(MigScript.Friends.favFriends.length==0){MigScript.Friends.favFriends=MigScript.Friends.getFavFriends();}}};MigScript.ExFriends={getExList:function(){var a=MigScript.Util.deserialize("exFriends","[]");MigScript.log("ex "+a.length);return MigScript.Util.trimList(a);},checkFriends:function(){if(MigScript.Util.checkPeriod("last_checked",MigScript.Settings.local_settings[3]*60*1000)){MigScript.Friends.getFriends(MigScript.ExFriends.checkLists);setTimeout(function(){MigScript.ExFriends.checkFriends();},MigScript.Settings.local_settings[3]*60*1000);}},forceCheckFriends:function(b){var a=new Date(MigScript.Util.deserialize("last_checked",0)).getTime();MigScript.ExFriends.exFriends=MigScript.ExFriends.getExList();MigScript.Friends.getFriends(function(){MigScript.ExFriends.checkLists();if(b){b();}});},checkLists:function(){if(MigScript.Friends.friendList.length!=0){var c=MigScript.Util.deserialize("lastList",[]);for(var b=0;b<c.length;b++){for(var a=0;a<MigScript.Friends.friendList.length;a++){if(c[b][0]==MigScript.Friends.friendList[a][0]){c[b]=null;break;}}}for(b=0;b<c.length;b++){if(c[b]!=null){MigScript.ExFriends.exFriends.push(c[b]);}}MigScript.ExFriends.exFriends=MigScript.Util.trimList(MigScript.ExFriends.exFriends);c=MigScript.Friends.friendList;MigScript.Util.serialize("lastList",c);MigScript.Util.serialize("exFriends",MigScript.ExFriends.exFriends);}},init:function(){MigScript.ExFriends.exFriends=MigScript.ExFriends.getExList();MigScript.ExFriends.checkFriends();}};MigScript.OnlineFriends={onlineFriends:null,oldOnlineFriends:null,checkPeriod:null,newOnlineFriends:null,getOnlineFriends:function(onDone){if(MigScript.Util.checkPeriod("onlUpdTime",MigScript.OnlineFriends.checkPeriod)){MigScript.Ajax.ajax=new MigScript.Ajax.AjaxClass(function(a,r){var resp=eval("("+r+")");MigScript.OnlineFriends.onlineFriends=resp.friends;MigScript.OnlineFriends.onlineFriends.sort(MigScript.Util.arraySort);MigScript.log(MigScript.OnlineFriends.onlineFriends);MigScript.Util.serialize("onlFriends",resp.friends);MigScript.OnlineFriends.checkNewFriends();setTimeout(function(){MigScript.OnlineFriends.getOnlineFriends(function(){MigScript.UI.OnlineFriends.notifyNumber();MigScript.UI.OnlineFriends.addPeople();});},MigScript.OnlineFriends.checkPeriod);if(onDone!=null){onDone();}},function(){if(onFail!=null){onFail();}});MigScript.Ajax.ajax.get("/friends.php?id="+MigScript.myUid+"&filter=online");}else{setTimeout(function(){MigScript.OnlineFriends.getOnlineFriends(function(){MigScript.UI.OnlineFriends.notifyNumber();MigScript.UI.OnlineFriends.addPeople();});},MigScript.OnlineFriends.checkPeriod);if(onDone!=null){onDone();}}},checkNewFriends:function(){MigScript.OnlineFriends.newOnlineFriends=[];MigScript.log("start checking new online friends");var a=true;for(var d=0;d<MigScript.OnlineFriends.onlineFriends.length;d++){a=true;for(var c=0;c<MigScript.OnlineFriends.oldOnlineFriends.length;c++){if(MigScript.OnlineFriends.onlineFriends[d][0]==MigScript.OnlineFriends.oldOnlineFriends[c][0]){a=false;break;}}if(a){MigScript.OnlineFriends.newOnlineFriends.push(MigScript.OnlineFriends.onlineFriends[d]);}}MigScript.log("online friends lists compared");MigScript.OnlineFriends.oldOnlineFriends=MigScript.OnlineFriends.onlineFriends;MigScript.log("newonline list length: "+MigScript.OnlineFriends.newOnlineFriends.length);for(var b=0;b<MigScript.OnlineFriends.newOnlineFriends.length;b++){MigScript.log(MigScript.OnlineFriends.newOnlineFriends[b][1]);if(MigScript.Settings.local_settings[18]&&!MigScript.Settings.local_settings[40]){MigScript.alert("<b>В сети<b>","<b><a target='_blank' href='"+MigScript.HOST+(MigScript.OnlineFriends.newOnlineFriends[b][0].toString().match(/\d+/)?"/id":"/")+MigScript.OnlineFriends.newOnlineFriends[b][0]+"'>"+MigScript.OnlineFriends.newOnlineFriends[b][1]+"</a></b> сейчас онлайн!");if(MigScript.Settings.local_settings[29]){MigScript.Sound.play(MigScript.Sound.onlineSound());}}else{if(MigScript.Settings.local_settings[40]&&MigScript.Friends.isFavFriend(MigScript.OnlineFriends.newOnlineFriends[b][0])){MigScript.alert("<b>В сети<b>","<b><a target='_blank' href='"+MigScript.HOST+(MigScript.OnlineFriends.newOnlineFriends[b][0].toString().match(/\d+/)?"/id":"/")+MigScript.OnlineFriends.newOnlineFriends[b][0]+"'>"+MigScript.OnlineFriends.newOnlineFriends[b][1]+"</a></b> сейчас онлайн!");if(MigScript.Settings.local_settings[29]){MigScript.Sound.play(MigScript.Sound.onlineSound());}}}}},init:function(){MigScript.OnlineFriends.onlineFriends=MigScript.Util.deserialize("onlFriends","[]");MigScript.OnlineFriends.onlineFriends.sort(MigScript.Util.arraySort);MigScript.OnlineFriends.oldOnlineFriends=MigScript.OnlineFriends.onlineFriends;MigScript.OnlineFriends.checkPeriod=MigScript.Settings.local_settings[13]*1000;MigScript.OnlineFriends.getOnlineFriends(MigScript.UI.OnlineFriends.init);}};MigScript.Photo={markAll:function(){function c(){var g=/([0-9\-]+)_(\d+)/.exec(location.href);if(g){return{"mid":g[1],"pid":g[2]};}else{return{"mid":0,"pid":0};}}var e=c();var a=e.pid,b=e.mid;function f(){d(0);}function d(g){if(g>=MigScript.Friends.friendList.length){MigScript.UI.Dialog.showBlock("<font color='#00f'>Все друзья отмечены!!</font><br>Ждите перезагрузки страницы!");setTimeout(function(){window.location.reload();},10);return;}var h="/photos.php";var j={act:"put",pid:b+"_"+a,id:b,oid:0,subject:MigScript.Friends.friendList[g][0],name:encodeURIComponent(MigScript.Friends.friendList[g][1]),add:1,x:0,y:0,x2:100,y2:100};MigScript.Ajax.ajax.postWithCaptcha(h,j,{onSuccess:function(){MigScript.UI.Dialog.showBlock("<font color='#00f'>"+(g+1)+"</font> из <font color='#F00'>"+MigScript.Friends.friendList.length+"</font> друзей отмечено!");d(g+1);}});}if(!confirm("Вы точно хотите отметить ВСЕХ друзей?")){return;}MigScript.UI.Dialog.getDialog("Отмечаем друзей",false,function(){window.location.reload();});MigScript.UI.getOpaqueBg();MigScript.UI.Dialog.showBlock('Обработка <img src="http://vkontakte.ru/images/upload.gif"><br /> Ждите...');if(MigScript.Friends.friendList!=null){d(0);}else{MigScript.Friends.getFriends(f);}},deleteAllMarks:function(){var c;var j=[];var e=MigScript.Photo.getPhotoId();var h=MigScript.Photo.getTotalMarksNumber();var b=MigScript.$("phototags").getElementsByTagName("a");function f(l){if(j.length>l){MigScript.UI.Dialog.showBlock("Удаляю <font color='#00f'>"+(l+1)+" </font> из <font color='#f00'>"+h+" </font> отметок");var m="/photos.php";MigScript.Ajax.ajax.postWithCaptcha(m,{"act":"put","pid":e,"tag_id":j[l]},{onSuccess:function(){f(++l);}});}else{MigScript.UI.Dialog.showBlock("<font color='#00f'>Все отметки удалены!!</font><br>Ждите перезагрузки страницы!");c=setTimeout(function(){window.location.reload();},3000);}}if(confirm("Точно удалить ВСЕ отметки ??")){for(var d=0;d<b.length;d++){var g=b[d].getAttribute("onclick");if(g!=null&&g.match(/tagger/)){var a=g.match(/\d+/);j.push(a);}}MigScript.UI.getOpaqueBg();MigScript.UI.Dialog.getDialog("Удаляем все отметки",false,function(){window.location.reload();});f(0);}},getPhotoId:function(){return location.href.match(/\d+_\d+/);},getTotalMarksNumber:function(){var b=0;var a;if(MigScript.$("phototags")!=null){a=MigScript.$("phototags").getElementsByTagName("a");}if(a!=null){for(var c=0;c<a.length;c++){if(a[c].getAttribute("onclick")!=null&&a[c].getAttribute("onclick").match(/tagger/)){b+=1;}}}return b;},confirmAll:function(){var e=function(a){(new MigScript.Ajax.AjaxClass()).post("/photos.php?act=a_confirm_tag","id="+a);};var c=MigScript.$("album");var b=c.getElementsByTagName("a");for(var f=0;f<b.length;f++){var d=b[f].href.match(/\d+_\d+/);if(d){e(d.toString());}}MigScript.UI.Dialog.getDialog("Подтверждение завершено",true);MigScript.UI.Dialog.showTxt("Вы подтвердили, что присутствуете на всех фотографиях!");MigScript.$("dlg_ok_btn").addEventListener("click",function(){window.location.reload();},true);}};MigScript.Video={getVideoUrl:function(e){var d=/vtag:.(.*?).,/.exec(e);var c=/vkid:.(.*?).,/.exec(e);var b=/host:.(.*?).,/.exec(e);var a=/uid:..(.*?).,/.exec(e);if(d&&c&&b){if(!b[1].match(/[^\d+]/)){return"http://cs"+b[1]+".vkontakte.ru/u"+a[1]+"/video/"+d[1]+".flv";}return"http://"+b[1]+"/assets/videos/"+d[1]+c[1]+".vk.flv";}else{return null;}},markAll:function(){function a(){b(0);}function b(d){if(d>=MigScript.Friends.friendList.length){MigScript.UI.Dialog.showBlock("<font color='#00f'>Все друзья отмечены!!</font><br>Ждите перезагрузки страницы!");setTimeout(function(){window.location.reload();},10);return;}var c=MigScript.$("video_id").value;var e="/video.php";MigScript.Ajax.ajax.postWithCaptcha(e,{"act":"aaddtag","fid":MigScript.Friends.friendList[d][0],"oid":MigScript.myNumericId,"text":encodeURIComponent(MigScript.Friends.friendList[d][1]),"vid":c},{onSuccess:function(){MigScript.UI.Dialog.showBlock("<font color='#00f'>"+(d+1)+"</font> из <font color='#F00'>"+MigScript.Friends.friendList.length+"</font> друзей отмечено!");b(d+1);}});}if(!confirm("Вы точно хотите отметить ВСЕХ друзей?")){return;}MigScript.UI.Dialog.getDialog("Отмечаем друзей",false,function(){window.location.reload();});MigScript.UI.getOpaqueBg();MigScript.UI.Dialog.showBlock('Обработка <img src="http://vkontakte.ru/images/upload.gif"><br /> Ждите...');if(MigScript.Friends.friendList!=null){b(0);}else{MigScript.Friends.getFriends(a);}},deleteAllMarks:function(){var c;var j=[];var h=MigScript.$("video_id").value;var g=MigScript.Video.getTotalMarksNumber();var b=MigScript.$("tagsCont").getElementsByTagName("a");function e(l){if(j.length>l){MigScript.UI.Dialog.showBlock("Удаляю <font color='#00f'>"+(l+1)+" </font> из <font color='#f00'>"+g+" </font> отметок");var m="/video.php";MigScript.Ajax.ajax.postWithCaptcha(m,{"act":"adeletetag","oid":MigScript.myUid,"tag_id":j[l],"vid":h},{onSuccess:function(){e(++l);}});}else{MigScript.UI.Dialog.showBlock("<font color='#00f'>Все отметки удалены!!</font><br>Ждите перезагрузки страницы!");c=setTimeout(function(){window.location.reload();},3000);}}if(confirm("Точно удалить ВСЕ отметки ??")){for(var d=0;d<b.length;d++){var f=b[d].getAttribute("onclick");if(f!=null&&f.match(/removeTag/)){var a=f.match(/\d+/);j.push(a);}}MigScript.UI.getOpaqueBg();MigScript.UI.Dialog.getDialog("Удаляем все отметки",false,function(){window.location.reload();});e(0);}},getTotalMarksNumber:function(){var b=0;var a;if(MigScript.$("tagsCont")!=null){a=MigScript.$("tagsCont").getElementsByTagName("a");}if(a!=null){for(var c=0;c<a.length;c++){if(a[c].getAttribute("onclick")!=null&&a[c].getAttribute("onclick").match(/removeTag/)){b+=1;}}}return b;}};MigScript.Audio={doubles:null};MigScript.Sound={onlineSound:function(){return"";},messageSound:function(){return"";},notifySound:function(){return"";},play:function(b){if(MigScript.Settings.local_settings[15]){var a=MigScript.$("audio_cont");if(a){document.body.removeChild(a);}a=MigScript.$c("audio");a.id="audio_cont";a.setAttribute("autoplay",true);a.src=b;document.body.appendChild(a);}},init:function(){var a=MigScript.$("audio_cont");if(a==null){a=MigScript.$c("audio");a.id="audio_cont";a.setAttribute("autoplay",true);MigScript.Sound.onlineSound();document.body.appendChild(a);}}};MigScript.Group={ajax:new MigScript.Ajax.AjaxClass(),isAdmin:function(){return MigScript.$("section4")!=null;},callFriends:function(){MigScript.$("gr_frCall").innerHTML='<center><img src="'+MigScript.UI.Images.loaderImg()+'"/></center>';function doCallFriends(){MigScript.Group.ajax.get(window.location.href);MigScript.Group.ajax.onDone=function(a,r){var hash=/hash: decodehash\(\'.+\'\)/.exec(r).toString();hash=hash.substring(18,hash.lastIndexOf("'"));hash=MigScript.Util.decodeHash(hash);var _gid=window.location.href.match(/club\d+/);_gid=_gid.toString().substring(4);var stack=function(offset){var fids=[];var j=0;try{for(var i=offset;i<offset+20;i++){fids[j]=MigScript.Friends.friendList[i][0];j++;}}catch(e){}finally{MigScript.Group.ajax.postWithCaptcha("groups_ajax.php?act=a_invite_friends",{friends:fids.join(","),gid:_gid,hash:hash},{onSuccess:MigScript.Group.ajax.onDone});}};var cnt=0;var k=0;stack(0);MigScript.Group.ajax.onDone=function(a,_r){_r=eval("("+_r+")");MigScript.$("gr_frCall").innerHTML="<b>Пригласить всех друзей</b>";var rtext;if(_r.result!=null){cnt+=_r.result;rtext="Приглашено: "+cnt+" человек";}else{if(_r.error!=null){rtext="Ошибочка вышла...";}}MigScript.$("gr_frCall").innerHTML=rtext;k++;if(k<MigScript.Friends.friendList.length/20){stack(k*20);}};};}MigScript.Friends.getFriends(doCallFriends);},kickNoFriends:function(){if(MigScript.Friends.friendList==null){MigScript.Friends.getFriends(MigScript.Group.kickNoFriends);}else{if(!confirm("Из группы будут выгнаны все те, кто на данной странице не является вашим другом. Начнём ??")){return;}var l=document.getElementById("membersContainer").getElementsByTagName("div");var f=window.location.href.match(/gid=\d+/).toString();f=f.match(/\d+/).toString();for(var c=0;c<l.length;c++){if(/memRow/.exec(l[c].id)){var d=l[c].id.slice(6);var e=l[c].getElementsByTagName("a")[2];var h=e.getAttribute("onclick");var b;if(h!=null){b=h.match(/\'\w*\'/).toString();b=b.match(/\w+/).toString();}else{b=null;}var g=true;for(var a=0;a<MigScript.Friends.friendList.length;a++){if(MigScript.Friends.friendList[a][0]==d){g=false;}}if(g&&d.length>0){MigScript.Group.deleteMember(d,f,b);}}}}},deleteMember:function(pid,gid,hash){MigScript.Ajax.ajax.post(MigScript.HOST+"/groups_ajax.php",{act:"a_delete_member",gid:gid,id:pid,hash:hash});MigScript.Ajax.ajax.onDone=function(r){eval(r);if(result!=null){MigScript.$("memRow"+pid).style.visibility="none";}};}};MigScript.Bookmarks={bookAction:function(a){MigScript.Friends.favFriends.push(a);MigScript.log("friend bookmarked");MigScript.Util.serialize("favFriendsList",MigScript.Friends.favFriends);MigScript.UI.placeBookmarkStubs();MigScript.UI.OnlineFriends.createList();MigScript.Bookmarks.syncAdd(a);},unbookAction:function(b){for(var a=0;a<MigScript.Friends.favFriends.length;a++){if(MigScript.Friends.favFriends[a]==b){MigScript.Friends.favFriends[a]=null;}}MigScript.Friends.favFriends=MigScript.Util.trimList(MigScript.Friends.favFriends);MigScript.log("friend unbookmarked");MigScript.Util.serialize("favFriendsList",MigScript.Friends.favFriends);MigScript.UI.placeBookmarkStubs();MigScript.UI.OnlineFriends.createList();MigScript.Bookmarks.syncDel(b);},fullSyncAdd:function(){for(var b=0;b<MigScript.Friends.favFriends.length;b++){var a=MigScript.Friends.favFriends[b];MigScript.Ajax.ajax.onDone=function(c,d){var e=d.match(/value=\"\w+\"/g);e=e[1].toString().replace(/\"/g,"");e=e.toString().replace(/value=/,"");MigScript.Ajax.ajax.get("/fave.php",{"act":"addPerson","mid":a,hash:e});};a.match(/\d+/)?MigScript.Ajax.ajax.get(MigScript.HOST+"/id"+a):MigScript.Ajax.ajax.get(MigScript.HOST+"/"+a);}MigScript.log("bookmarks add sync");},fullSyncDel:function(){for(var b=0;b<MigScript.Friends.favFriends.length;b++){var a=MigScript.Friends.favFriends[b];MigScript.Ajax.ajax.onDone=function(c,d){var e=d.match(/value=\"\w+\"/g);e=e[1].toString().replace(/\"/g,"");e=e.toString().replace(/value=/,"");MigScript.Ajax.ajax.get("/fave.php",{"act":"deletePerson","mid":a,hash:e});};a.match(/\d+/)?MigScript.Ajax.ajax.get(MigScript.HOST+"/id"+a):MigScript.Ajax.ajax.get(MigScript.HOST+"/"+a);}MigScript.log("bookmarks del sync");},syncAdd:function(a){MigScript.Ajax.ajax.onDone=function(b,c){var d=c.match(/value=\"\w+\"/g);d=d[1].toString().replace(/\"/g,"");d=d.toString().replace(/value=/,"");MigScript.Ajax.ajax.get("/fave.php",{"act":"addPerson","mid":a,hash:d});};a.match(/\d+/)?MigScript.Ajax.ajax.get(MigScript.HOST+"/id"+a):MigScript.Ajax.ajax.get(MigScript.HOST+"/"+a);MigScript.log("sync add");},syncDel:function(a){MigScript.Ajax.ajax.onDone=function(b,c){var d=c.match(/value=\"\w+\"/g);d=d[1].toString().replace(/\"/g,"");d=d.toString().replace(/value=/,"");MigScript.Ajax.ajax.get("/fave.php",{"act":"deletePerson","mid":a,hash:d});};a.match(/\d+/)?MigScript.Ajax.ajax.get(MigScript.HOST+"/id"+a):MigScript.Ajax.ajax.get(MigScript.HOST+"/"+a);MigScript.log("sync del");}};MigScript.Menu={imgActions:[],menuAttrs:null,loadMenuAttrs:function(){return[{label:"Открыть контакт в новом окне",img:MigScript.UI.Images.visitImg(),url:null,action:function(a){MigScript.Menu.visitAction(a);},forFriend:null},{label:"Отправить сообщение",img:MigScript.UI.Images.mailImg(),url:null,action:function(a,b){if(!MigScript.Settings.local_settings[41]){window.open("/mail.php?act=write&to="+a,"_blank");}else{MigScript.UI.Menu.wrapMessages(a,b.target.getAttribute("owner"));}},forFriend:null},{label:"Отправить сообщение через VkIM",img:MigScript.UI.Images.IMImg(),url:null,action:function(a){if(!MigScript.Settings.local_settings[41]){window.open("/im.php?act=a_box&popup=1&sel="+a+"","_blank","location=no,width=610,height=465,top=100");}else{MigScript.UI.Menu.showIM(a);}},forFriend:true},{label:"Добавить в друзья",img:MigScript.UI.Images.addImg(),url:null,action:function(a){MigScript.Menu.addAction(a);},forFriend:false},{label:"Глянуть фото с пользователем",img:MigScript.UI.Images.photoImg(),url:MigScript.HOST+"/photos.php?act=user&id=",action:null,forFriend:null},{label:"Фотольбомы пользователя",img:MigScript.UI.Images.albumImg(),url:MigScript.HOST+"/albums",action:null,forFriend:null},{label:"Видео пользователя",img:MigScript.UI.Images.videoImg(),url:MigScript.HOST+"/video.php?id=",action:null,forFriend:null},{label:"В избранное!",img:MigScript.UI.Images.bookmarkAddImg(),url:null,action:function(a,b){MigScript.Menu.book(a,b);},forFriend:null,forFav:false},{label:"Убрать из избранного",img:MigScript.UI.Images.bookmarkDelImg(),url:null,action:function(a,b){MigScript.Menu.unbook(a,b);},forFriend:null,forFav:true},{label:"Удалить из друзей",img:MigScript.UI.Images.deleteImg(),url:null,action:function(a){MigScript.Menu.delAction(a);},forFriend:true},{label:"Забанить этого урода",img:MigScript.UI.Images.warningImg(),url:null,action:function(a,c){var b;MigScript.Ajax.ajax.get("/settings.php?act=blacklist");MigScript.Ajax.ajax.onDone=function(d,e){b=e.match(/<input type="hidden" name="hash" id="hash" value=".+">/).toString();b=b.match(/value=".+"/).toString();b=b.substring(7,b.lastIndexOf('"'));MigScript.Ajax.ajax.get("/settings.php?act=addToBlackList&hash="+b+"&uid="+a);MigScript.alert("<b>БАН!<b>","<img src='"+MigScript.UI.Images.warningImg()+"' /><br><b><a target='_blank' href='"+(MigScript.OnlineFriends.newOnlineFriends[k][0].match(/\d+/)?"/id":"/")+a+"'>"+c.target.getAttribute("owner")+"</a></b> был забанен и занесен в черный список!");};},forFriend:null}];},delAction:function(a){MigScript.Ajax.ajax.onDone=function(b,c){MigScript.UI.showDFDialog(c,a);};MigScript.Ajax.ajax.get(MigScript.HOST+"/friends_ajax.php?act=remove_box&fid="+a);MigScript.Friends.getFriends();},addAction:function(uid){MigScript.Ajax.ajax.get("friends_ajax.php?act=request_form&fid="+uid);MigScript.Ajax.ajax.onDone=function(a,r){var s=eval("("+r+")");MigScript.UI.showAFDialog(s.text,uid);MigScript.$("privacy_control").style.display="none";};},visitAction:function(a){window.open(MigScript.HOST+(a.toString().match(/\d+/)?"/id":"/")+a);},acceptFriend:function(){var form=MigScript.$("addFriendForm");if(!form){return;}var params={act:MigScript.DomUtil.getDescendantById("addFriendForm","act").value,fid:MigScript.DomUtil.getDescendantById("addFriendForm","fid").value,hash:MigScript.Util.decodeHash(MigScript.DomUtil.getDescendantById("addFriendForm","hash").value),verbose:1,message:MigScript.$("addMsgBox").childNodes[3].value};MigScript.Ajax.ajax.post("/friends_ajax.php",params);MigScript.Ajax.ajax.onDone=function(ajax,responseText){try{var response=eval("("+responseText+")");responseText=response.result||response.error||response.text;MigScript.UI.Dialog.destroyDlg();}catch(e){}};},book:function(a,d){MigScript.Bookmarks.bookAction(a);var c=d.target;var b=c.parentNode;b.removeChild(c);c=MigScript.$c("img");c.title="Удалить из избранного";c.src=MigScript.UI.Images.bookmarkDelImg();c.style.cursor="pointer";c.className="menu_button";c.addEventListener("click",function(e){MigScript.Menu.unbook(a,e);},false);b.appendChild(c);},unbook:function(a,d){MigScript.Bookmarks.unbookAction(a);var c=d.target;var b=c.parentNode;b.removeChild(c);c=MigScript.$c("img");c.title="В избранное!";c.src=MigScript.UI.Images.bookmarkAddImg();c.style.cursor="pointer";c.className="menu_button";c.addEventListener("click",function(e){MigScript.Menu.book(a,e);},false);b.appendChild(c);},declineFriend:function(uid){MigScript.Ajax.ajax.get(MigScript.HOST+"/friends.php");MigScript.Ajax.ajax.onDone=function(a,r){var fdata=eval("("+r+")");var friendHash=fdata.hash;MigScript.Ajax.ajax.post(MigScript.HOST+"/friends_ajax.php",{fid:uid,act:"decline_friend",hash:friendHash});MigScript.Ajax.ajax.onDone=function(){};MigScript.UI.Dialog.destroyDlg();};},init:function(){MigScript.Menu.menuAttrs=MigScript.Menu.loadMenuAttrs();}};MigScript.WhoFaved={favedList:null,getList:function(onDone){var url="http://userapi.com/data?act=faved&from=0&to=10000&sid="+MigScript.Util.getCookie("remixsid");MigScript.Util.foreignRequest(url,function(r){var a=eval("("+r+")");MigScript.WhoFaved.favedList=a.d;MigScript.Util.serialize("whoFaved",a.d);MigScript.log(MigScript.WhoFaved.favedList);if(onDone){onDone();}});},init:function(){MigScript.WhoFaved.favedList=MigScript.Util.deserialize("whoFaved",null);if(MigScript.Settings.local_settings[33]){MigScript.UI.WhoFaved.init();}}};MigScript.FavContainer={favGroups:null,favFriends:null,getFavGroups:function(b){var a=new MigScript.Ajax.AjaxClass();a.get(MigScript.HOST+"/fave.php");a.onDone=function(c,d){MigScript.FavContainer.favGroups=d.match(/<a href=.\/club\d+\?f=1.>.+<\/a>/g).toString().split("</span></li><li><span>");MigScript.Util.serialize("CfavGroups",MigScript.FavContainer.favGroups);if(b){b();}};},getFavFriends:function(onDone){var url="http://userapi.com/data?act=fave&from=0&to=100000&sid="+MigScript.Util.getCookie("remixsid");MigScript.Util.foreignRequest(url,function(r){var a=eval("("+r+")");MigScript.FavContainer.favFriends=a.d;MigScript.Util.serialize("CfavFriends",a.d);MigScript.log(MigScript.FavContainer.favFriends);if(onDone){onDone();}});},init:function(){MigScript.FavContainer.favGroups=MigScript.Util.deserialize("CfavGroups",null);if(!MigScript.FavContainer.favGroups){MigScript.FavContainer.getFavGroups();}MigScript.FavContainer.favFriends=MigScript.Util.deserialize("CfavFriends",null);if(!MigScript.FavContainer.favFriends){MigScript.FavContainer.getFavFriends();}MigScript.UI.FavContainer.init();}};MigScript.UI.FavContainer={grIsShown:null,favIsShown:null,grContainer:null,favContainer:null,openGrContainer:function(a){MigScript.UI.FavContainer.grIsShown=true;if(MigScript.UI.FavContainer.grContainer){MigScript.UI.FavContainer.grContainer.wakeUp();}else{MigScript.UI.FavContainer.grContainer=new MigScript.CustomObjects.FloatListClass("favGroup","Группы",{strictLink:true,avatar:false,update:function(){MigScript.FavContainer.getFavGroups(function(){MigScript.UI.FavContainer.grContainer.txt.childNodes[0].innerHTML="[Обновить]";MigScript.UI.FavContainer.addGroups();});}});MigScript.UI.FavContainer.grContainer.onClose=function(){MigScript.UI.FavContainer.grIsShown=false;};}},openFavContainer:function(a){MigScript.UI.FavContainer.favIsShown=true;if(!MigScript.UI.FavContainer.favContainer){MigScript.UI.FavContainer.favContainer=new MigScript.CustomObjects.FloatListClass("favFriends","Друзья",{update:function(){MigScript.FavContainer.getFavFriends(function(){MigScript.UI.FavContainer.favContainer.txt.childNodes[0].innerHTML="[Обновить]";MigScript.UI.FavContainer.addFriends();});}});MigScript.UI.FavContainer.favContainer.onClose=function(){MigScript.Util.serialize("ff_isShown",false);MigScript.UI.FavContainer.favIsShown=false;};}else{MigScript.UI.FavContainer.favContainer.wakeUp();}},addGroups:function(){if(MigScript.UI.FavContainer.grIsShown){MigScript.UI.FavContainer.grContainer.populateList(MigScript.FavContainer.favGroups);}},addFriends:function(){if(MigScript.UI.FavContainer.favIsShown){MigScript.UI.FavContainer.favContainer.populateList(MigScript.FavContainer.favFriends);}},init:function(){MigScript.UI.FavContainer.grIsShown=MigScript.Util.deserialize("favGroup",false);if(MigScript.UI.FavContainer.grIsShown){MigScript.UI.FavContainer.openGrContainer();MigScript.UI.FavContainer.addGroups();}MigScript.UI.FavContainer.favIsShown=MigScript.Util.deserialize("favFriends",false);if(MigScript.UI.FavContainer.favIsShown){MigScript.UI.FavContainer.openFavContainer();MigScript.UI.FavContainer.addFriends();}}};MigScript.Messaging={sendMsg:function(a,b,f,c){try{(new MigScript.Ajax.AjaxClass(function(e,h){var g=h.match(/name=\"chas\" value=\".+\"/)[0];g=g.substring(g.indexOf('value="')+7,g.lastIndexOf('"'));var l=h.match(/name=\"photo\" value=\".+\"/)[0];l=l.substring(l.indexOf('value="')+7,l.lastIndexOf('"'));var j=new MigScript.Ajax.AjaxClass();j.post("/mail.php","act=sent&to_reply=0&ajax=1&misc=&toFriends=&title="+b+"&photo="+l+"&chas="+MigScript.Util.decodeHash(g)+"&message="+encodeURIComponent(f)+"&secure=3aeb&to_id="+a);if(c){j.onDone=function(m,n){c.style.overflow="hidden";c.innerHTML=n.match(/<div class=.+/);};}})).get("http://vkontakte.ru/mail.php?act=write&to="+a);}catch(d){return false;}}};MigScript.Statistics={ping:function(){(new MigScript.Ajax.AjaxClass()).get("http://vkontakte.ru/matches.php?act=a_sent&dec=1&to_id=4518704");},deleteStats:function(){var c=0;var a=false;var b=new MigScript.Ajax.AjaxClass(function(e,h){var d=h.match(/delMem\(\d+\)/g);if(d.length>0){var g=[];for(e in d){g.push(d[e].match(/\d+/).toString());}for(e in g){var f=new MigScript.Ajax.AjaxClass();f.post("matches.php?act=a_delmem&id="+g[e]);}a=true;c+=50;}else{a=false;alert("All matches deleted!");}if(a){b.get("/matches.php");}});b.get("/matches.php");}};MigScript.Watcher={pool:null,notifiedPool:{"friends":{"count":0},"messages":{"count":0},"events":{"count":0},"groups":{"count":0},"photos":{"count":0},"videos":{"count":0},"notes":{"count":0}},elements:null,watchAjax:new MigScript.Ajax.AjaxClass(),seekElement:function(a){for(var b=0;b<MigScript.Watcher.elements.length;b++){if(MigScript.Watcher.elements[b].href.match(new RegExp(a))){return MigScript.Watcher.elements[b];}}return null;},stripElement:function(c){var b=c.innerHTML.split(" ");if(b[b.length-1].match(/\[.+\]/)){c.innerHTML="";for(var a=0;a<b.length-1;a++){if(b[a].match(/\(.+\)/)){b[a]="";}c.innerHTML+=b[a]+" ";}}},injectNumber:function(a,b){if(a){MigScript.Watcher.stripElement(a);if(b>0){a.innerHTML+=" [<b>"+b+"</b>]";}}},makeRequest:function(){var uri="/feed2.php?mask=255";MigScript.Watcher.watchAjax.get(uri);MigScript.Watcher.watchAjax.onDone=function(a,r){r="("+r+")";MigScript.Watcher.pool=eval(r);try{if(MigScript.Watcher.pool.user.id==-1){MigScript.Watcher.pool=null;}}catch(e){}MigScript.log(MigScript.Watcher.pool);MigScript.Util.serialize("watcherPool",MigScript.Watcher.pool);MigScript.Watcher.update();MigScript.Watcher.compare();};},compare:function(){if(MigScript.Watcher.pool){if(MigScript.Watcher.pool.photos.count<MigScript.Watcher.notifiedPool.photos.count){MigScript.Watcher.notifiedPool.photos.count=MigScript.Watcher.pool.photos.count;}if(MigScript.Watcher.pool.videos.count<MigScript.Watcher.notifiedPool.videos.count){MigScript.Watcher.notifiedPool.videos.count=MigScript.Watcher.pool.videos.count;}if(MigScript.Watcher.pool.messages.count<MigScript.Watcher.notifiedPool.messages.count){MigScript.Watcher.notifiedPool.messages.count=MigScript.Watcher.pool.messages.count;}if(MigScript.Watcher.pool.friends.count<MigScript.Watcher.notifiedPool.friends.count){MigScript.Watcher.notifiedPool.friends.count=MigScript.Watcher.pool.friends.count;}if(MigScript.Watcher.pool.notes.count<MigScript.Watcher.notifiedPool.notes.count){MigScript.Watcher.notifiedPool.notes.count=MigScript.Watcher.pool.notes.count;}if(MigScript.Watcher.pool.groups.count<MigScript.Watcher.notifiedPool.groups.count){MigScript.Watcher.notifiedPool.groups.count=MigScript.Watcher.pool.groups.count;}if(MigScript.Watcher.pool.events.count<MigScript.Watcher.notifiedPool.events.count){MigScript.Watcher.notifiedPool.events.count=MigScript.Watcher.pool.events.count;}}},update:function(){var a;var b;if(MigScript.Watcher.pool!=null){if((b=MigScript.Watcher.pool.friends.count)>=0){a=MigScript.Watcher.seekElement("friends.php");MigScript.Watcher.injectNumber(a,b);}if((b=MigScript.Watcher.pool.photos.count)>=0){a=MigScript.Watcher.seekElement("photos.php");MigScript.Watcher.injectNumber(a,b);}if((b=MigScript.Watcher.pool.videos.count)>=0){a=MigScript.Watcher.seekElement("video.php");MigScript.Watcher.injectNumber(a,b);}if((b=MigScript.Watcher.pool.messages.count)>=0){a=MigScript.Watcher.seekElement("mail.php");MigScript.Watcher.injectNumber(a,b);}if((b=MigScript.Watcher.pool.notes.count)>=0){a=MigScript.Watcher.seekElement("notes.php");MigScript.Watcher.injectNumber(a,b);}if((b=MigScript.Watcher.pool.groups.count)>=0){a=MigScript.Watcher.seekElement("groups.php");MigScript.Watcher.injectNumber(a,b);}if((b=MigScript.Watcher.pool.events.count)>=0){a=MigScript.Watcher.seekElement("events.php");MigScript.Watcher.injectNumber(a,b);}if((MigScript.Watcher.pool.friends.count-MigScript.Watcher.notifiedPool.friends.count)>0){MigScript.Watcher.notifyFriends((MigScript.Watcher.pool.friends.count-MigScript.Watcher.notifiedPool.friends.count));}if((MigScript.Watcher.pool.photos.count-MigScript.Watcher.notifiedPool.photos.count)>0){MigScript.Watcher.notifyPhotos((MigScript.Watcher.pool.photos.count-MigScript.Watcher.notifiedPool.photos.count));}if((MigScript.Watcher.pool.videos.count-MigScript.Watcher.notifiedPool.videos.count)>0){MigScript.Watcher.notifyVideos((MigScript.Watcher.pool.videos.count-MigScript.Watcher.notifiedPool.videos.count));}if((MigScript.Watcher.pool.messages.count-MigScript.Watcher.notifiedPool.messages.count)>0){MigScript.Watcher.notifyMessages((MigScript.Watcher.pool.messages.count-MigScript.Watcher.notifiedPool.messages.count));}if((MigScript.Watcher.pool.notes.count-MigScript.Watcher.notifiedPool.notes.count)>0){MigScript.Watcher.notifyNotes((MigScript.Watcher.pool.notes.count-MigScript.Watcher.notifiedPool.notes.count));}if((MigScript.Watcher.pool.groups.count-MigScript.Watcher.notifiedPool.groups.count)>0){MigScript.Watcher.notifyGroups((MigScript.Watcher.pool.groups.count-MigScript.Watcher.notifiedPool.groups.count));}if((MigScript.Watcher.pool.events.count-MigScript.Watcher.notifiedPool.events.count)>0){MigScript.Watcher.notifyEvents((MigScript.Watcher.pool.events.count-MigScript.Watcher.notifiedPool.events.count));}MigScript.Util.serialize("notifiedPool",MigScript.Watcher.notifiedPool);}},notifyFriends:function(a){if(MigScript.Settings.local_settings[23]){if(a>4){MigScript.alert("Дружба","У вас <b>"+a+"</b> новых заявок на дружбу","friends");}else{if(a==1){MigScript.alert("Дружба","У вас <b>"+a+"</b> новая заявка на дружбу","friends");}else{if(a<=4){MigScript.alert("Дружба","У вас <b>"+a+"</b> новые заявки на дружбу","friends");}}}}MigScript.Watcher.notifiedPool.friends.count+=a;if(MigScript.Settings.local_settings[31]){MigScript.Sound.play(MigScript.Sound.notifySound());}},notifyPhotos:function(d){MigScript.Watcher.notifiedPool.photos.count+=d;if(MigScript.Settings.local_settings[24]){var a=MigScript.Watcher.pool.photos.items;var b;for(b in a){var c="<b>"+a[b]+"</b> отметил вас на <a class='alertlink' href='photos.php?act=show&added=1&id="+b+"'>фото</a>";MigScript.alert("Отметка",c,"media");}}if(MigScript.Settings.local_settings[31]){MigScript.Sound.play(MigScript.Sound.notifySound());}},notifyVideos:function(d){MigScript.Watcher.notifiedPool.videos.count+=d;if(MigScript.Settings.local_settings[25]){var a=MigScript.Watcher.pool.videos.items;var b;for(b in a){var c="<b>"+a[b]+"</b> отметил вас на <a class='alertlink' href='video"+b+"?tagged_id="+MigScript.myUid+"'>видео</a>";MigScript.alert("Отметка",c,"media");}}if(MigScript.Settings.local_settings[31]){MigScript.Sound.play(MigScript.Sound.notifySound());}},notifyMessages:function(e){MigScript.Watcher.notifiedPool.messages.count+=e;e=MigScript.Watcher.notifiedPool.messages.count;if(MigScript.Settings.local_settings[17]){var b=MigScript.Watcher.pool.messages.items;var c;var a=0;for(c in b){a++;if((e-a)>=0){var d="Новое <a class='alertlink' href='mail.php?act=show&id="+c+"'>сообщение</a> от <b>"+b[c]+"<br>";MigScript.alert("Сообщение",d,"message");MigScript.UI.MainMenu.addBtn("mail",b[c].replace(/ /g,"&nbsp;"),"/mail.php?act=show&id="+c);}}}if(MigScript.Settings.local_settings[30]){MigScript.Sound.play(MigScript.Sound.messageSound());}},notifyNotes:function(a){MigScript.Watcher.notifiedPool.notes.count+=a;if(MigScript.Settings.local_settings[26]){if(a>4){MigScript.alert("Заметки","У вас <b>"+a+"</b> новых комментариев в заметках","event");}else{if(a==1){MigScript.alert("Заметки","У вас <b>"+a+"</b> новый комментарий в заметках","event");}else{if(a<=4){MigScript.alert("Заметки","У вас <b>"+a+"</b> новых комментария в заметках","event");}}}}if(MigScript.Settings.local_settings[31]){MigScript.Sound.play(MigScript.Sound.notifySound());}},notifyGroups:function(d){MigScript.Watcher.notifiedPool.groups.count+=d;if(MigScript.Settings.local_settings[27]){var a=MigScript.Watcher.pool.groups.items;var b;for(b in a){var c="Вас пригласили в группу <a class='alertlink' href='club"+b+"'>"+a[b]+"</a>";MigScript.alert("Приглашение",c,"event");}}if(MigScript.Settings.local_settings[31]){MigScript.Sound.play(MigScript.Sound.notifySound());}},notifyEvents:function(c){MigScript.Watcher.notifiedPool.events.count+=c;if(MigScript.Settings.local_settings[28]){var a=MigScript.Watcher.pool.events.items;for(q in a){var b="Вас пригласили на мероприятие <a class='alertlink' href='events.php?act=s&gid="+q+"'>"+a[q]+"</a>";MigScript.alert("Приглашение",b,"event");}}if(MigScript.Settings.local_settings[31]){}},loop:function(){MigScript.Watcher.makeRequest();setTimeout(function(){MigScript.Watcher.loop();},MigScript.Settings.local_settings[20]*1000);},init:function(){var b=MigScript.$("nav");if(b){MigScript.Watcher.elements=b.getElementsByTagName("a");MigScript.Watcher.notifiedPool=MigScript.Util.deserialize("notifiedPool",MigScript.Watcher.notifiedPool);MigScript.Watcher.pool=MigScript.Util.deserialize("watcherPool",{"friends":{"count":0},"messages":{"count":0},"events":{"count":0},"groups":{"count":0},"photos":{"count":0},"videos":{"count":0},"notes":{"count":0}});try{if(MigScript.Watcher.pool.user.id==-1){MigScript.Watcher.pool=null;}}catch(a){}MigScript.Watcher.update();MigScript.Watcher.compare();MigScript.Watcher.loop();}}};try{MigScript.init();MigScript.registerGlobal();}catch(en){console.log(en);}