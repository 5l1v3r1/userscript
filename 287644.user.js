// ==UserScript==// @name           Fix Pin Applet// @description    Replace Java applets with proper inputs// @include        http*://*blackboard*/*// @require        http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js// @require	   http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js// @version        1.0// @grant          none// ==/UserScript==function createFileName(stuInd, classInd) {    var encoder = "qa0zw5sx9ed6crf2vt3gb8yhn1ujm4iko7lp";        var eInd = classInd + 3;    var ind = eInd % 30;    var fileName = encoder.substring(ind, ind + 1);    ind = classInd / 100 + 10;    fileName = fileName + encoder.substring(ind, ind + 1);    ind = stuInd / 100 + 20;    fileName = fileName + encoder.substring(ind, ind + 1);        eInd += 3;    ind = eInd % 30;    fileName = fileName + encoder.substring(ind, ind + 1);    ind = classInd / 10 % 10 + 20;    fileName = fileName + encoder.substring(ind, ind + 1);    ind = stuInd % 10 + 10;    fileName = fileName + encoder.substring(ind, ind + 1);        eInd += 3;    ind = eInd % 30;    fileName = fileName + encoder.substring(ind, ind + 1);    ind = classInd % 10;    fileName = fileName + encoder.substring(ind, ind + 1);    ind = stuInd / 10 % 10;    fileName = fileName + encoder.substring(ind, ind + 1);    eInd += 3;    ind = classInd % 30;    fileName = fileName + encoder.substring(ind, ind + 1);    eInd += 3;    ind = stuInd % 30;    fileName = fileName + encoder.substring(ind, ind + 1);        fileName = fileName + ".htm";    return fileName;  }    function is_digit(ch) {	return !isNaN(parseInt(ch));  }    function encodeString(inString, offset)   {    var encoder = "qa0zw5sx9ed6crf2vt3gb8yhn1ujm4iko7lp";    var outString = "";    var intZero = '0'.charCodeAt(0);        var ind = offset;    for (var ii = 0; ii < inString.length; ii++)    {      var c = inString.charAt(ii);      if (is_digit(c))      {        var intChar = c.charCodeAt(0);        ind = (intChar - intZero + offset + ii * 3) % 36;        outString = outString + encoder.substring(ind, ind + 1);      }      else      {        outString = outString + c;      }    }    return outString;  }  function getStuInd(stuid, ids) {	for(var ind = 0; ind < ids.length; ind++) {		var encodedID = encodeString(stuid, ind);		if (ids[ind] == encodedID) {			return ind;		}	}	return null;  }  function open_grades(stuid, encoded_ids, class_id) {	var stuInd = getStuInd(stuid, encoded_ids);	if(stuInd === null)		return false;	window.open(createFileName(stuInd, class_id), '_self');	return true;}$('applet[code="pinApplet.class"]').each(function() {	var $applet = $(this);	var ids = $applet.children('param[name="IDs"]').attr('value');	var class_id = parseInt($applet.children('param[name="CLASS"]').attr('value'));	var stuid = document.createElement('input');	var submit = document.createElement('input');	var parent = $applet.parent()[0];	$(stuid).attr({		'type': 'text',		'class': 'stuId'	});		$(submit).attr({		'type': 'button',		'class': 'stuSubmit',		'value': 'Submit'	});		parent.innerHTML = "Enter your Student ID: ";	parent.appendChild(stuid);	parent.appendChild(submit);	parent.appendChild(document.createElement('br'));		$(submit).button().click(function() {		var entered_id = $(stuid).val();		var encoded_class_ids = ids.split(',');		var parsed_class_id = parseInt(class_id);				if(!open_grades(entered_id, encoded_class_ids, parsed_class_id)) {			$(submit).attr('value', 'Invalid Student ID');		}	});});